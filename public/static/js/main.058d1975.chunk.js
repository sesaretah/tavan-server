(window["webpackJsonpd1-react"]=window["webpackJsonpd1-react"]||[]).push([[0],{166:function(e,t){e.exports={"generic.add":"\u0627\u0641\u0632\u0648\u062f\u0646","generic.cancel":"\u0644\u063a\u0648","components.controls.blocktype.h1":"H1","components.controls.blocktype.h2":"H2","components.controls.blocktype.h3":"H3","components.controls.blocktype.h4":"H4","components.controls.blocktype.h5":"H5","components.controls.blocktype.h6":"H6","components.controls.blocktype.blockquote":"Blockquote","components.controls.blocktype.code":"Code","components.controls.blocktype.blocktype":"Block Type","components.controls.blocktype.normal":"Normal","components.controls.colorpicker.colorpicker":"Color Picker","components.controls.colorpicker.text":"Text","components.controls.colorpicker.background":"Highlight","components.controls.embedded.embedded":"Embedded","components.controls.embedded.embeddedlink":"Embedded Link","components.controls.embedded.enterlink":"Enter link","components.controls.emoji.emoji":"Emoji","components.controls.fontfamily.fontfamily":"Font","components.controls.fontsize.fontsize":"Font Size","components.controls.history.history":"History","components.controls.history.undo":"Undo","components.controls.history.redo":"Redo","components.controls.image.image":"\u0639\u06a9\u0633","components.controls.image.fileUpload":"\u0628\u0627\u0631\u06af\u0630\u0627\u0631\u06cc","components.controls.image.byURL":"\u067e\u06cc\u0648\u0646\u062f","components.controls.image.dropFileText":"\u0627\u06cc\u0646\u062c\u0627 \u0631\u0627 \u06a9\u0644\u06cc\u06a9 \u06a9\u0646\u06cc\u062f ","components.controls.inline.bold":"Bold","components.controls.inline.italic":"Italic","components.controls.inline.underline":"Underline","components.controls.inline.strikethrough":"Strikethrough","components.controls.inline.monospace":"Monospace","components.controls.inline.superscript":"Superscript","components.controls.inline.subscript":"Subscript","components.controls.link.linkTitle":"\u0639\u0646\u0648\u0627\u0646 \u067e\u06cc\u0648\u0646\u062f","components.controls.link.linkTarget":"\u0622\u062f\u0631\u0633","components.controls.link.linkTargetOption":"\u062f\u0631 \u067e\u0646\u062c\u0631\u0647 \u062c\u062f\u06cc\u062f \u0628\u0627\u0632 \u06a9\u0646","components.controls.link.link":"\u067e\u06cc\u0648\u0646\u062f","components.controls.link.unlink":"\u0644\u063a\u0648 \u067e\u06cc\u0648\u0646\u062f","components.controls.list.list":"List","components.controls.list.unordered":"Unordered","components.controls.list.ordered":"Ordered","components.controls.list.indent":"Indent","components.controls.list.outdent":"Outdent","components.controls.remove.remove":"Remove","components.controls.textalign.textalign":"Text Align","components.controls.textalign.left":"Left","components.controls.textalign.center":"Center","components.controls.textalign.right":"Right","components.controls.textalign.justify":"Justify"}},167:function(e,t,a){e.exports=a(420)},413:function(e,t,a){},415:function(e,t,a){},416:function(e,t,a){},417:function(e,t,a){},418:function(e,t,a){},420:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),s=a(36),l=a.n(s),o=a(11),r=a(1),c=a(38),u=a.n(c),m=a(61),d=a(4),h=a(7),f=a(3),p=a(5),g=a(2),v=a(6),b=a(161),k=new(a(162).Dispatcher),E=new(function(e){function t(){var e;return Object(d.a)(this,t),(e=Object(f.a)(this,Object(p.a)(t).call(this))).list=[],e.multipleList=[],e.instance=null,e.klass=null,e}return Object(v.a)(t,e),Object(h.a)(t,[{key:"listModel",value:function(e){this.list=[],this.klass=e.klass;for(var t=0,a=e.data.length;t<a;++t)this.list.push(e.data[t]),t===a-1&&this.emit("got_list");0==e.data.length&&this.emit("got_list")}},{key:"listMultipleModel",value:function(e){this.multipleList=e.data,this.klass=e.klass,this.emit("got_multiple_list")}},{key:"showIntance",value:function(e){this.klass=e.klass,this.instance=e.data,this.emit("got_instance")}},{key:"setIntance",value:function(e){this.klass=e.klass,this.instance=e.data,this.emit("set_instance")}},{key:"deleteIntance",value:function(e){this.klass=e.klass,this.instance=e.data,this.emit("deleted_instance")}},{key:"postFile",value:function(e){console.log(e),this.klass=e.klass,this.instance=e.data,this.emit("file_posted")}},{key:"getIntance",value:function(){return this.instance}},{key:"getList",value:function(){return this.list}},{key:"getMutipleList",value:function(){return this.multipleList}},{key:"getListnKlass",value:function(){return[this.list,this.klass]}},{key:"getKlass",value:function(){return this.klass}},{key:"handleActions",value:function(e){switch(e.type){case"LIST_MODEL_SUCCESS":this.listModel(e.list);break;case"MULTIPLE_LIST_MODEL_SUCCESS":this.listMultipleModel(e.list);break;case"GET_INSTANCE_SUCCESS":this.showIntance(e.instance);break;case"DELETE_INSTANCE_SUCCESS":this.deleteIntance(e.instance);break;case"SET_INSTANCE_SUCCESS":this.setIntance(e.instance);break;case"POST_FILE_SUCCESS":case"GENERAL_POST_FILE_SUCCESS":this.postFile(e.instance)}}}]),t}(b.EventEmitter));k.register(E.handleActions.bind(E));var _=E,y=a(37),C=a.n(y),O={server:"/v1"},j=O.server;function w(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3?arguments[3]:void 0,i=Object.keys(a).map((function(e){return e+"="+a[e]})).join("&");C.a.get(j+"/"+e+"?page="+t+"&"+i,{headers:{"Content-Type":"application/json",Authorization:"bearer "+n}}).then((function(e){k.dispatch({type:"LIST_MODEL_SUCCESS",list:e.data})})).catch((function(e){console.log(e)}))}function I(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3?arguments[3]:void 0,i=Object.keys(a).map((function(e){return e+"="+a[e]})).join("&");C.a.get(j+"/"+e+"?page="+t+"&"+i,{headers:{"Content-Type":"application/json",Authorization:"bearer "+n}}).then((function(e){k.dispatch({type:"MULTIPLE_LIST_MODEL_SUCCESS",list:e.data})})).catch((function(e){console.log(e)}))}function S(e,t,a,n){var i=j+"/"+e+"/"+t,s=new FormData;s.append("profile[avatar]",a),s.append("profile[id]",t);var l={headers:{"content-type":"multipart/form-data",Authorization:"bearer "+n}};Object(y.put)(i,s,l).then((function(e){k.dispatch({type:"POST_FILE_SUCCESS",instance:e.data})})).catch((function(e){console.log(e)}))}function N(e,t,a){C.a.get(j+"/"+e+"/"+t,{headers:{"Content-Type":"application/json",Authorization:"bearer "+a}}).then((function(e){k.dispatch({type:"GET_INSTANCE_SUCCESS",instance:e.data})})).catch((function(e){console.log(e)}))}function L(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0,n=Object.keys(t).map((function(e){return e+"="+t[e]})).join("&");C.a.get(j+"/"+e+"/delete?"+n,{headers:{"Content-Type":"application/json",Authorization:"bearer "+a}}).then((function(e){k.dispatch({type:"DELETE_INSTANCE_SUCCESS",instance:e.data})})).catch((function(e){console.log(e)}))}function T(e,t,a){C.a.post(j+"/"+e+"/",t,{headers:{"Content-Type":"application/json",Authorization:"bearer "+a}}).then((function(e){k.dispatch({type:"SET_INSTANCE_SUCCESS",instance:e.data})})).catch((function(e){console.log(e)}))}function x(e,t,a){C.a.put(j+"/"+e+"/"+t.id,t,{headers:{"Content-Type":"application/json",Authorization:"bearer "+a}}).then((function(e){k.dispatch({type:"SET_INSTANCE_SUCCESS",instance:e.data})})).catch((function(e){console.log(e)}))}var D=a(101),A=(a(422),D.initializeApp({apiKey:"AIzaSyAbQ1NDkKB_E_SbfgHY3w-esVWhjwj9DeE",authDomain:"tavan-e768d.firebaseapp.com",databaseURL:"https://tavan-e768d.firebaseio.com",projectId:"tavan-e768d",storageBucket:"tavan-e768d.appspot.com",messagingSenderId:"498708095861",appId:"1:498708095861:web:00428b1330b24e1eece93c",measurementId:"G-55DLXZ4VZY"})),$=null;D.messaging.isSupported()&&($=A.messaging()).usePublicVapidKey("BGtSQdySGVQOeOwFha6rSVdmtfIUo_V33Eq-RTRb5kUNLvvwM7AVGCLtChjnGlD50fudRx8D4Aw-7br71Qfefrc");var M,W=a(9),V=a.n(W),R=a(8),q=(M={home:"\u062e\u0627\u0646\u0647",name:"\u0646\u0627\u0645 \u0648 \u0646\u0627\u0645 \u062e\u0627\u0646\u0648\u0627\u062f\u06af\u06cc ",login:"\u0648\u0631\u0648\u062f",username:"\u0646\u0627\u0645 \u06a9\u0627\u0631\u0628\u0631\u06cc ",password:"\u0631\u0645\u0632 \u0639\u0628\u0648\u0631 ",password_confirmation:"\u062a\u06a9\u0631\u0627\u0631 \u0631\u0645\u0632 \u0639\u0628\u0648\u0631",mobile:"\u0634\u0645\u0627\u0631\u0647 \u0645\u0648\u0628\u0627\u06cc\u0644 ",error:"\u062e\u0637\u0627",sign_in:"\u0648\u0631\u0648\u062f ",sign_up:"\u062b\u0628\u062a \u0646\u0627\u0645",back:"\u0628\u0627\u0632\u06af\u0634\u062a",signed_up_already:"\u062a\u0627 \u06a9\u0646\u0648\u0646 \u062b\u0628\u062a \u0646\u0627\u0645 \u0646\u06a9\u0631\u062f\u0647 \u0627\u06cc\u062f\u061f",new_advert:"\u062f\u0631\u062c \u0622\u06af\u0647\u06cc ",title:"\u0639\u0646\u0648\u0627\u0646",abstract:"\u0686\u06a9\u06cc\u062f\u0647",content:"\u0645\u062a\u0646",submit:"\u062b\u0628\u062a ",upload_from_gallery:"\u0627\u0646\u062a\u062e\u0627\u0628 \u0627\u0632 \u06af\u0627\u0644\u0631\u06cc",welcome:"\u062e\u0648\u0634 \u0622\u0645\u062f\u06cc\u062f",sign_out:"\u062e\u0631\u0648\u062c",phone_number:"\u0634\u0645\u0627\u0631\u0647 \u062a\u0644\u0641\u0646",telegram_channel:"\u06a9\u0627\u0646\u0627\u0644 \u062a\u0644\u06af\u0631\u0627\u0645",instagram_page:"\u0635\u0641\u062d\u0647 \u0627\u06cc\u0646\u0633\u062a\u0627\u06af\u0631\u0627\u0645",address:"\u0622\u062f\u0631\u0633 ",email:"\u0627\u06cc\u0645\u06cc\u0644 ",contact_information:"\u0627\u0637\u0644\u0627\u0639\u0627\u062a \u062a\u0645\u0627\u0633 ",search:"\u062c\u0633\u062a\u062c\u0648 ",cancel:"\u0627\u0646\u0635\u0631\u0627\u0641",view:"\u0646\u0645\u0627\u06cc\u0634",edit:"\u0648\u06cc\u0631\u0627\u06cc\u0634",delete:"\u062d\u0630\u0641",adverts_nes:"\u0639\u0646\u0648\u0627\u0646\u060c \u0645\u062a\u0646 \u0648 \u0634\u0645\u0627\u0631\u0647 \u062a\u0644\u0641\u0646 \u0627\u062c\u0628\u0627\u0631\u06cc \u0627\u0633\u062a",my_pins:" \u0646\u0634\u0627\u0646 \u0634\u062f\u0647\u200c\u0647\u0627 ",pin:"\u0646\u0634\u0627\u0646 \u06a9\u0646",pinned:"\u0646\u0634\u0627\u0646 \u0634\u062f\u0647",message_to_seller:"\u0627\u0631\u0633\u0627\u0644 \u067e\u06cc\u0627\u0645",messages:"\u067e\u06cc\u0627\u0645 \u0647\u0627 ",send_message:"\u067e\u06cc\u0627\u0645 \u062e\u0648\u062f \u0631\u0627 \u0628\u0646\u0648\u06cc\u0633\u06cc\u062f",province:"\u0627\u0633\u062a\u0627\u0646",city:"\u0634\u0647\u0631",website:"\u0648\u0628\u0633\u0627\u06cc\u062a",call:"\u062a\u0645\u0627\u0633 \u0628\u06af\u06cc\u0631\u06cc\u062f",ago:" \u0642\u0628\u0644",all_above:"\u0647\u0645\u0647 \u06cc \u0645\u0648\u0627\u0631\u062f \u0641\u0648\u0642",no_result:"\u0645\u0648\u0631\u062f\u06cc \u06cc\u0627\u0641\u062a \u0646\u0634\u062f ",category:"\u062f\u0633\u062a\u0647 \u0628\u0646\u062f\u06cc ",leg:"\u0645\u0633\u06cc\u0631",date:"\u062a\u0627\u0631\u06cc\u062e",time:"\u0632\u0645\u0627\u0646",numberOfPassngers:"\u062a\u0639\u062f\u0627\u062f \u0645\u0633\u0627\u0641\u0631\u0627\u0646 ",surename:"\u0646\u0627\u0645 \u062e\u0627\u0646\u0648\u0627\u062f\u06af\u06cc",fathername:"\u0646\u0627\u0645 \u067e\u062f\u0631",ssn:"\u06a9\u062f\u0645\u0644\u06cc",birthplace:"\u0645\u062d\u0644 \u062a\u0648\u0644\u062f",pass_no:"\u0634\u0645\u0627\u0631\u0647 \u06af\u0630\u0631\u0646\u0627\u0645\u0647",birthdate:"\u062a\u0627\u0631\u06cc\u062e \u062a\u0648\u0644\u062f",place_of_birth:"\u0645\u062d\u0644 \u062a\u0648\u0644\u062f",required_fields:"\u0641\u06cc\u0644\u062f\u0647\u0627\u06cc \u0627\u062c\u0628\u0627\u0631\u06cc",en_father_name:"\u0646\u0627\u0645 \u067e\u062f\u0631 \u0644\u0627\u062a\u06cc\u0646",en_name:"\u0646\u0627\u0645 \u0644\u0627\u062a\u06cc\u0646",en_surename:"\u0646\u0627\u0645 \u062e\u0627\u0646\u0648\u0627\u062f\u06af\u06cc \u0644\u0627\u062a\u06cc\u0646 ",passport_no:"\u0634\u0645\u0627\u0631\u0647 \u06af\u0630\u0631\u0646\u0627\u0645\u0647",final_confirm:"\u062a\u0627\u06cc\u06cc\u062f \u0646\u0647\u0627\u06cc\u06cc ",document_form:"\u0641\u0631\u0645 \u0627\u0633\u0646\u0627\u062f ",save:"\u0630\u062e\u06cc\u0631\u0647",documents:"\u0627\u0633\u0646\u0627\u062f ",type:"\u0646\u0648\u0639",string:"\u0645\u062a\u0646 \u06a9\u0648\u062a\u0627\u0647",text:"\u0645\u062a\u0646 \u0628\u0644\u0646\u062f",select:"\u06af\u0632\u06cc\u0646\u0647",multiSelect:"\u0686\u0646\u062f \u06af\u0632\u06cc\u0646\u0647",table:"\u062c\u062f\u0648\u0644"},Object(R.a)(M,"date","\u062a\u0627\u0631\u06cc\u062e"),Object(R.a)(M,"refundable","\u0642\u0627\u0628\u0644 \u0627\u0639\u0627\u062f\u0647"),Object(R.a)(M,"yes","\u0628\u0644\u0647"),Object(R.a)(M,"no","\u062e\u06cc\u0631"),Object(R.a)(M,"commentable","\u0642\u0627\u0628\u0644 \u0646\u0638\u0631\u062f\u0647\u06cc"),Object(R.a)(M,"end_point","\u0646\u0642\u0637\u0647 \u067e\u0627\u06cc\u0627\u0646"),Object(R.a)(M,"start_point","\u0646\u0642\u0637\u0647 \u0634\u0631\u0648\u0639"),Object(R.a)(M,"votable","\u0631\u0627\u06cc \u06af\u06cc\u0631\u06cc"),Object(R.a)(M,"publishable","\u0642\u0627\u0628\u0644 \u0627\u0646\u062a\u0634\u0627\u0631"),Object(R.a)(M,"field_name","\u0646\u0627\u0645 \u0641\u06cc\u0644\u062f"),Object(R.a)(M,"add","\u0627\u0641\u0632\u0648\u062f\u0646 "),Object(R.a)(M,"remove","\u062d\u0630\u0641"),Object(R.a)(M,"auxiliary_tables","\u062c\u062f\u0627\u0648\u0644 \u06a9\u0645\u06a9\u06cc"),Object(R.a)(M,"create_by","\u0627\u06cc\u062c\u0627\u062f \u0634\u062f\u0647 \u062a\u0648\u0633\u0637"),Object(R.a)(M,"list","\u0644\u06cc\u0633\u062a"),Object(R.a)(M,"workflows","\u06af\u0631\u062f\u0634 \u06a9\u0627\u0631\u0647\u0627"),Object(R.a)(M,"auxiliary_records","\u0645\u0642\u0627\u062f\u06cc\u0631 \u06a9\u0645\u06a9\u06cc"),Object(R.a)(M,"basic_table","\u062c\u062f\u0648\u0644 \u067e\u0627\u06cc\u0647"),Object(R.a)(M,"relation_table","\u062c\u062f\u0648\u0644 \u0631\u0627\u0628\u0637\u0647"),Object(R.a)(M,"auxiliary_table_form","\u0641\u0631\u0645 \u062c\u062f\u0648\u0644 \u06a9\u0645\u06a9\u06cc "),Object(R.a)(M,"Basic","\u067e\u0627\u06cc\u0647"),Object(R.a)(M,"Relation","\u0631\u0627\u0628\u0637\u0647 "),Object(R.a)(M,"Divan","\u062f\u06cc\u0648\u0627\u0646"),Object(R.a)(M,"workflow_form","\u0641\u0631\u0645 \u06af\u0631\u062f\u0634 \u06a9\u0627\u0631"),Object(R.a)(M,"submitting","\u062f\u0631 \u062d\u0627\u0644 \u0627\u0631\u0633\u0627\u0644 ... "),Object(R.a)(M,"settings","\u062a\u0646\u0638\u06cc\u0645\u0627\u062a"),Object(R.a)(M,"receiving","\u062f\u0631 \u062d\u0627\u0644 \u062f\u0631\u06cc\u0627\u0641\u062a ..."),Object(R.a)(M,"workflow_tables","\u062c\u062f\u0627\u0648\u0644 \u06a9\u0645\u06a9\u06cc \u06af\u0631\u062f\u0634 \u06a9\u0627\u0631 "),Object(R.a)(M,"auxiliary_table","\u062c\u062f\u0648\u0644 \u06a9\u0645\u06a9\u06cc"),Object(R.a)(M,"workflow","\u06af\u0631\u062f\u0634 \u06a9\u0627\u0631"),Object(R.a)(M,"actions","\u0639\u0645\u0644\u06cc\u0627\u062a"),Object(R.a)(M,"roles","\u0646\u0642\u0634 \u0647\u0627"),Object(R.a)(M,"divan","\u062f\u06cc\u0648\u0627\u0646"),Object(R.a)(M,"enter_your_email","\u0627\u06cc\u0645\u06cc\u0644 \u062e\u0648\u062f \u0631\u0627 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f"),Object(R.a)(M,"enter_your_password","\u0631\u0645\u0632 \u0639\u0628\u0648\u0631 \u0631\u0627 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f "),Object(R.a)(M,"enter_your_password_confirmation","\u0631\u0645\u0632 \u0639\u0628\u0648\u0631 \u0631\u0627 \u062a\u06a9\u0631\u0627\u0631 \u06a9\u0646\u06cc\u062f "),Object(R.a)(M,"profiles","\u0627\u0641\u0631\u0627\u062f "),Object(R.a)(M,"firstname","\u0646\u0627\u0645"),Object(R.a)(M,"if_registered","\u0627\u06af\u0631 \u0642\u0628\u0644\u0627 \u062b\u0628\u062a \u0646\u0627\u0645 \u06a9\u0631\u062f\u0647 \u0627\u06cc\u062f"),Object(R.a)(M,"you_can_login","\u0648\u0627\u0631\u062f \u0634\u0648\u06cc\u062f "),Object(R.a)(M,"if_not_registered","\u0627\u06af\u0631 \u062b\u0628\u062a \u0646\u0627\u0645 \u0646\u06a9\u0631\u062f\u0647 \u0627\u06cc\u062f"),Object(R.a)(M,"you_can_sign_up","\u062b\u0628\u062a \u0646\u0627\u0645 \u06a9\u0646\u06cc\u062f"),Object(R.a)(M,"new_assignment","\u0627\u0639\u0637\u0627\u06cc \u0646\u0642\u0634 \u062c\u062f\u06cc\u062f"),Object(R.a)(M,"posts","\u067e\u0633\u062a \u0647\u0627"),Object(R.a)(M,"bookmark","\u0646\u0634\u0627\u0646"),Object(R.a)(M,"like","\u0639\u0644\u0627\u0642\u0647"),Object(R.a)(M,"follow","\u062f\u0646\u0628\u0627\u0644"),Object(R.a)(M,"share","\u0627\u0634\u062a\u0631\u0627\u06a9"),Object(R.a)(M,"social_acts","\u0639\u0645\u0644\u06af\u0631\u0647\u0627\u06cc \u0627\u062c\u062a\u0645\u0627\u0639\u06cc "),Object(R.a)(M,"channels","\u06a9\u0627\u0646\u0627\u0644 \u0647\u0627"),Object(R.a)(M,"close","\u0628\u0633\u062a\u0646"),Object(R.a)(M,"channel","\u06a9\u0627\u0646\u0627\u0644 "),Object(R.a)(M,"details","\u0634\u0631\u062d"),Object(R.a)(M,"Shoa","\u0634\u0639\u0627\u0639 "),Object(R.a)(M,"role","\u0646\u0642\u0634"),Object(R.a)(M,"Default","\u067e\u06cc\u0634 \u0641\u0631\u0636"),Object(R.a)(M,"NonDefault","\u063a\u06cc\u0631 \u067e\u06cc\u0634 \u0641\u0631\u0636 "),Object(R.a)(M,"value"," \u0645\u0642\u062f\u0627\u0631"),Object(R.a)(M,"true","\u0645\u062b\u0628\u062a"),Object(R.a)(M,"false","\u0645\u0646\u0641\u06cc"),Object(R.a)(M,"access_control_list","\u0644\u06cc\u0633\u062a \u06a9\u0646\u062a\u0631\u0644 \u062f\u0633\u062a\u0631\u0633\u06cc"),Object(R.a)(M,"access_control_form","\u0641\u0631\u0645 \u06a9\u0646\u062a\u0631\u0644 \u062f\u0633\u062a\u0631\u0633\u06cc"),Object(R.a)(M,"assignment_form","\u0641\u0631\u0645 \u0627\u0639\u0637\u0627\u06cc \u0646\u0642\u0634"),Object(R.a)(M,"comment_form","\u0646\u0638\u0631 \u0628\u062f\u0647\u06cc\u062f"),Object(R.a)(M,"post_form","\u0641\u0631\u0645 \u067e\u0633\u062a"),Object(R.a)(M,"metas","\u067e\u06cc\u0634 \u062c\u062f\u0627\u0648\u0644"),Object(R.a)(M,"shoa","\u0634\u0639\u0627\u0639"),Object(R.a)(M,"form","\u0648\u0631\u0648\u062f \u0627\u0637\u0644\u0627\u0639\u0627\u062a"),Object(R.a)(M,"choose_image","\u0627\u0646\u062a\u062e\u0627\u0628 \u0639\u06a9\u0633"),Object(R.a)(M,"logout","\u062e\u0631\u0648\u062c"),Object(R.a)(M,"more","\u0628\u06cc\u0634\u062a\u0631 ..."),Object(R.a)(M,"social","\u0627\u062c\u062a\u0645\u0627\u0639\u06cc"),Object(R.a)(M,"courses","\u062f\u0631\u0648\u0633"),Object(R.a)(M,"discussions","\u06af\u0641\u062a\u06af\u0648 \u0647\u0627"),Object(R.a)(M,"exams","\u0622\u0632\u0645\u0648\u0646 \u0647\u0627 "),Object(R.a)(M,"public","\u0639\u0645\u0648\u0645\u06cc"),Object(R.a)(M,"private","\u062e\u0635\u0648\u0635\u06cc "),Object(R.a)(M,"course_type","\u0646\u0648\u0639 \u062f\u0631\u0633"),Object(R.a)(M,"select_appropriate_title","\u0639\u0646\u0648\u0627\u0646\u06cc \u0645\u0646\u0627\u0633\u0628 \u0627\u0646\u062a\u062e\u0627\u0628 \u06a9\u0646\u06cc\u062f"),Object(R.a)(M,"write_appropriate_description","\u0634\u0631\u062d\u06cc \u0627\u0632 \u0627\u0647\u062f\u0627\u0641 \u0648 \u0631\u0648\u0634 \u0647\u0627 \u0628\u0646\u0648\u06cc\u0633\u06cc\u062f"),Object(R.a)(M,"description","\u0634\u0631\u062d "),Object(R.a)(M,"drag_or_browse","\u0641\u0627\u06cc\u0644 \u0645\u0648\u0631\u062f \u0646\u0638\u0631 \u0631\u0627 \u0627\u06cc\u0646\u062c\u0627 \u0628\u06cc\u0627\u0646\u062f\u0627\u0632\u06cc\u062f \u06cc\u0627 \u06a9\u0644\u06cc\u06a9 \u06a9\u0646\u06cc\u062f"),Object(R.a)(M,"attachment","\u0641\u0627\u06cc\u0644 \u0647\u0627\u06cc \u067e\u06cc\u0648\u0633\u062a"),Object(R.a)(M,"tasks","\u0648\u0638\u0627\u06cc\u0641"),Object(R.a)(M,"start_date","\u062a\u0627\u0631\u06cc\u062e \u0634\u0631\u0648\u0639"),Object(R.a)(M,"deadline","\u0645\u0647\u0644\u062a \u0646\u0647\u0627\u06cc\u06cc"),Object(R.a)(M,"select_a_date","\u06cc\u06a9 \u062a\u0627\u0631\u06cc\u062e \u0627\u0646\u062a\u062e\u0627\u0628 \u06a9\u0646\u06cc\u062f"),Object(R.a)(M,"incomplete_data","\u0647\u0645\u0647 \u06cc \u0645\u0648\u0627\u0631\u062f \u0631\u0627 \u062a\u06a9\u0645\u06cc\u0644 \u06a9\u0646\u06cc\u062f"),Object(R.a)(M,"alert","\u0647\u0634\u062f\u0627\u0631"),Object(R.a)(M,"deadline_time","\u0633\u0627\u0639\u062a"),Object(R.a)(M,"start_time","\u0633\u0627\u0639\u062a"),Object(R.a)(M,"select_a_time","\u0627\u0646\u062a\u062e\u0627\u0628 \u0633\u0627\u0639\u062a"),Object(R.a)(M,"coworkers","\u0647\u0645\u06a9\u0627\u0631\u0627\u0646"),Object(R.a)(M,"works","\u06a9\u0627\u0631\u0647\u0627 "),Object(R.a)(M,"dashboard","\u0645\u06cc\u0632\u06a9\u0627\u0631"),Object(R.a)(M,"tavan","\u062a\u0648\u0627\u0646"),Object(R.a)(M,"statuses","\u0648\u0636\u0639\u06cc\u062a \u0647\u0627"),Object(R.a)(M,"status","\u0648\u0636\u0639\u06cc\u062a"),Object(R.a)(M,"add_stauts","\u062a\u063a\u06cc\u06cc\u0631 \u0648\u0636\u0639\u06cc\u062a"),Object(R.a)(M,"select","\u0627\u0646\u062a\u062e\u0627\u0628"),Object(R.a)(M,"new","\u062c\u062f\u06cc\u062f"),Object(R.a)(M,"task","\u0648\u0638\u06cc\u0641\u0647"),Object(R.a)(M,"attachments","\u067e\u06cc\u0648\u0633\u062a \u0647\u0627"),Object(R.a)(M,"reports","\u0627\u0633\u0646\u0627\u062f \u0648 \u06af\u0632\u0627\u0631\u0634\u0627\u062a"),Object(R.a)(M,"tags","\u0628\u0631\u0686\u0633\u0628 \u0647\u0627"),Object(R.a)(M,"new_tag","\u0628\u0631\u0686\u0633\u0628 \u062c\u062f\u06cc\u062f "),Object(R.a)(M,"recent_tasks","\u0648\u0638\u0627\u06cc\u0641 \u0627\u062e\u06cc\u0631"),Object(R.a)(M,"public_tasks","\u0648\u0638\u0627\u06cc\u0641 \u0639\u0645\u0648\u0645\u06cc"),Object(R.a)(M,"sort_by","\u0645\u0631\u062a\u0628 \u0633\u0627\u0632\u06cc"),Object(R.a)(M,"by_title","\u0639\u0646\u0648\u0627\u0646"),Object(R.a)(M,"by_events","\u0631\u062e\u062f\u0627\u062f"),Object(R.a)(M,"deadline_near","\u0645\u0647\u0644\u062a \u0646\u0647\u0627\u06cc\u06cc \u0646\u0632\u062f\u06cc\u06a9"),Object(R.a)(M,"new_report","\u06af\u0632\u0627\u0631\u0634 \u062c\u062f\u06cc\u062f"),Object(R.a)(M,"new_comments","\u06af\u0641\u062a\u06af\u0648\u06cc \u062c\u062f\u06cc\u062f"),Object(R.a)(M,"Admin","\u0645\u062f\u06cc\u0631"),Object(R.a)(M,"Colleague","\u0647\u0645\u06a9\u0627\u0631"),Object(R.a)(M,"Observer","\u0646\u0627\u0638\u0631"),Object(R.a)(M,"Creator","\u0633\u0627\u0632\u0646\u062f\u0647"),Object(R.a)(M,"verification_code","\u06a9\u062f \u0627\u062d\u0631\u0627\u0632"),Object(R.a)(M,"enter_verification_code","\u06a9\u062f \u0627\u062d\u0631\u0627\u0632 \u0631\u0627 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f"),Object(R.a)(M,"your_tasks","\u0648\u0638\u0627\u06cc\u0641 \u0645\u0631\u062a\u0628\u0637 \u0628\u0627 \u0634\u0645\u0627"),Object(R.a)(M,"your_newest_works","\u062c\u062f\u06cc\u062f\u062a\u0631\u06cc\u0646 \u06a9\u0627\u0631\u0647\u0627\u06cc \u0645\u0631\u062a\u0628\u0637 \u0628\u0627 \u0634\u0645\u0627"),Object(R.a)(M,"todo_list","\u062a\u0642\u0633\u06cc\u0645 \u0628\u0646\u062f\u06cc \u06a9\u0627\u0631"),Object(R.a)(M,"todo_participants","\u0627\u0641\u0631\u0627\u062f"),Object(R.a)(M,"new_todo_participants","\u0627\u0641\u0631\u0627\u062f \u062c\u062f\u06cc\u062f"),Object(R.a)(M,"not_found","\u0686\u06cc\u0632\u06cc \u06cc\u0627\u0641\u062a \u0646\u0634\u062f"),Object(R.a)(M,"are_you_sure","\u0645\u0637\u0645\u0626\u0646 \u0647\u0633\u062a\u06cc\u062f\u061f"),Object(R.a)(M,"Confirmer","\u062a\u0627\u06cc\u06cc\u062f \u06a9\u0646\u0646\u062f\u0647"),Object(R.a)(M,"time_sheets","\u06a9\u0627\u0631\u0646\u0645\u0627"),Object(R.a)(M,"morning_report","\u06af\u0632\u0627\u0631\u0634 \u067e\u06cc\u0634 \u0627\u0632 \u0638\u0647\u0631"),Object(R.a)(M,"afternoon_report","\u06af\u0632\u0627\u0631\u0634 \u0628\u0639\u062f \u0627\u0632 \u0638\u0647\u0631"),Object(R.a)(M,"extra_report","\u06af\u0632\u0627\u0631\u0634 \u0627\u0636\u0627\u0641\u0647 \u06a9\u0627\u0631\u06cc"),Object(R.a)(M,"write_appropriate_details","\u0634\u0631\u062d\u06cc \u06a9\u0627\u0645\u0644 \u0628\u0646\u0648\u06cc\u0633\u06cc\u062f"),Object(R.a)(M,"associations","\u0645\u0631\u062a\u0628\u0637 \u0628\u0627"),Object(R.a)(M,"sheet_date","\u062a\u0627\u0631\u06cc\u062e \u062c\u062f\u0648\u0644"),Object(R.a)(M,"recipients","\u062f\u0631\u06cc\u0627\u0641\u062a \u06a9\u0646\u0646\u062f\u06af\u0627\u0646"),Object(R.a)(M,"sent_by_me","\u0627\u0631\u0633\u0627\u0644 \u0634\u062f\u0647 \u0647\u0627"),Object(R.a)(M,"sent_to_me","\u062f\u0631\u06cc\u0627\u0641\u062a \u0634\u062f\u0647 \u0647\u0627"),Object(R.a)(M,"priority","\u0644\u0648\u0644\u0648\u06cc\u062a"),Object(R.a)(M,"normal","\u0639\u0627\u062f\u06cc"),Object(R.a)(M,"high","\u0641\u0648\u0631\u06cc"),Object(R.a)(M,"urgent","\u0628\u0633\u06cc\u0627\u0631 \u0641\u0648\u0631\u06cc"),Object(R.a)(M,"archived","\u0622\u0631\u0634\u06cc\u0648 \u0634\u062f\u0647"),Object(R.a)(M,"write_archive_note","\u0645\u062a\u0646 \u062c\u0645\u0639 \u0628\u0646\u062f\u06cc \u0628\u0647 \u0645\u0646\u0638\u0648\u0631 \u0622\u0631\u0634\u06cc\u0648 \u0633\u0627\u0632\u06cc \u0628\u0646\u0648\u06cc\u0633\u06cc\u062f"),Object(R.a)(M,"user_groups","\u06af\u0631\u0648\u0647 \u0628\u0646\u062f\u06cc \u06a9\u0627\u0631\u0628\u0631\u0627\u0646"),Object(R.a)(M,"user_settings","\u062a\u0646\u0638\u06cc\u0645\u0627\u062a \u0634\u062e\u0635\u06cc"),Object(R.a)(M,"add_involvement_to_tasks","\u0627\u0641\u0632\u0648\u062f\u0646 \u0647\u0645\u06a9\u0627\u0631\u0627\u0646 \u0628\u0647 \u0648\u0638\u0627\u06cc\u0641"),Object(R.a)(M,"remove_involvement_from_tasks","\u062d\u0630\u0641 \u0647\u0645\u06a9\u0627\u0631\u0627\u0646 \u0627\u0632 \u0648\u0638\u0627\u06cc\u0641"),Object(R.a)(M,"change_status_tasks","\u062a\u063a\u06cc\u06cc\u0631 \u0648\u0636\u0639\u06cc\u062a \u0648\u0638\u0627\u06cc\u0641"),Object(R.a)(M,"add_works_to_tasks","\u0627\u0641\u0632\u0648\u062f\u0646 \u06a9\u0627\u0631 \u0628\u0647 \u0648\u0638\u0627\u06cc\u0641"),Object(R.a)(M,"add_reports_to_tasks","\u0627\u0641\u0632\u0648\u062f\u0646 \u06af\u0632\u0627\u0631\u0634 \u0628\u0647 \u0648\u0638\u0627\u06cc\u0641"),Object(R.a)(M,"add_comments_to_tasks","\u0627\u0641\u0632\u0648\u062f\u0646 \u0646\u0638\u0631 \u0628\u0647 \u0648\u0638\u0627\u06cc\u0641"),Object(R.a)(M,"add_involvement_to_works","\u0627\u0641\u0632\u0648\u062f\u0646 \u0647\u0645\u06a9\u0627\u0631\u0627\u0646 \u0628\u0647 \u06a9\u0627\u0631\u0647\u0627"),Object(R.a)(M,"remove_involvement_from_works","\u062d\u0630\u0641 \u0647\u0645\u06a9\u0627\u0631\u0627\u0646 \u0627\u0632 \u06a9\u0627\u0631\u0647\u0627"),Object(R.a)(M,"change_status_works","\u062a\u063a\u06cc\u06cc\u0631 \u0648\u0636\u0639\u06cc\u062a \u06a9\u0627\u0631\u0647\u0627"),Object(R.a)(M,"add_todos_to_works","\u0627\u0641\u0632\u0648\u062f\u0646 \u062a\u0642\u0633\u06cc\u0645 \u06a9\u0627\u0631 \u0628\u0647 \u06a9\u0627\u0631\u0647\u0627"),Object(R.a)(M,"add_reports_to_works","\u0627\u0641\u0632\u0648\u062f\u0646 \u06af\u0632\u0627\u0631\u0634 \u0628\u0647 \u06a9\u0627\u0631\u0647\u0627"),Object(R.a)(M,"add_comments_to_works","\u0627\u0641\u0632\u0648\u062f\u0646 \u0646\u0638\u0631 \u0628\u0647 \u06a9\u0627\u0631\u0647\u0627"),Object(R.a)(M,"add_involvement_to_todos","\u0627\u0641\u0632\u0648\u062f\u0646 \u0647\u0645\u06a9\u0627\u0631 \u0628\u0647 \u062a\u0642\u0633\u06cc\u0645 \u06a9\u0627\u0631"),Object(R.a)(M,"remove_involvement_from_todos","\u062d\u0630\u0641 \u0647\u0645\u06a9\u0627\u0631 \u0627\u0632 \u062a\u0642\u0633\u06cc\u0645 \u06a9\u0627\u0631"),Object(R.a)(M,"add_involvement_to_time_sheets","\u0627\u0641\u0632\u0648\u062f\u0646 \u06af\u06cc\u0631\u0646\u062f\u0647 \u0628\u0647 \u06a9\u0627\u0631\u0646\u0645\u0627"),Object(R.a)(M,"remove_involvement_from_timesheets","\u062d\u0630\u0641 \u06af\u06cc\u0631\u0646\u062f\u0647 \u0627\u0632 \u06a9\u0627\u0631\u0646\u0645\u0627"),Object(R.a)(M,"notification_type","\u0634\u06cc\u0648\u0647 \u0627\u0637\u0644\u0627\u0639 \u0631\u0633\u0627\u0646\u06cc"),Object(R.a)(M,"mail_notification","\u0627\u06cc\u0645\u06cc\u0644"),Object(R.a)(M,"push_notification","\u0622\u06af\u0627\u0647\u0633\u0627\u0632\u06cc \u0648\u0628"),Object(R.a)(M,"sms","\u067e\u06cc\u0627\u0645\u06a9"),Object(R.a)(M,"if_someone_adds_you_youll_be_asked","\u0686\u0646\u0627\u0646\u0686\u0647 \u06a9\u0633\u06cc \u0634\u0645\u0627 \u0631\u0627 \u0628\u0647 \u06cc\u06a9 \u0641\u0639\u0627\u0644\u06cc\u062a \u0628\u06cc\u0627\u0641\u0632\u0627\u06cc\u062f \u0634\u0645\u0627 \u0628\u0627\u06cc\u062f \u062a\u0627\u06cc\u06cc\u062f \u06a9\u0646\u06cc\u062f."),Object(R.a)(M,"previous_attachments","\u067e\u06cc\u0648\u0633\u062a \u0647\u0627\u06cc \u0642\u0628\u0644\u0627 \u0622\u067e\u0644\u0648\u062f \u0634\u062f\u0647"),Object(R.a)(M,"cas","\u0627\u062d\u0631\u0627\u0632 \u0647\u0648\u06cc\u062a \u0645\u0631\u06a9\u0632\u06cc"),Object(R.a)(M,"profile","\u067e\u0631\u0648\u0641\u0627\u06cc\u0644"),Object(R.a)(M,"groups","\u06af\u0631\u0648\u0647\u0628\u0646\u062f\u06cc \u0647\u0645\u06a9\u0627\u0631\u0627\u0646"),Object(R.a)(M,"confirmed","\u062a\u0627\u06cc\u06cc\u062f \u0634\u062f\u0647"),Object(R.a)(M,"not_confirmed","\u062a\u0627\u06cc\u06cc\u062f \u0646\u0634\u062f\u0647"),Object(R.a)(M,"blocked_list","\u06a9\u0627\u0631\u0628\u0631\u0627\u0646 \u0645\u0633\u062f\u0648\u062f \u0634\u062f\u0647"),Object(R.a)(M,"notifications","\u0627\u0637\u0644\u0627\u0639 \u0631\u0633\u0627\u0646\u06cc"),Object(R.a)(M,"privacy","\u062d\u0631\u06cc\u0645 \u062e\u0635\u0648\u0635\u06cc"),Object(R.a)(M,"add_comments_to_reports","\u0627\u0641\u0632\u0648\u062f\u0646 \u0646\u0638\u0631 \u0628\u0647 \u06af\u0632\u0627\u0631\u0634\u0627\u062a"),Object(R.a)(M,"new_notifications","\u0622\u06af\u0627\u0647\u0633\u0627\u0632\u06cc \u0647\u0627\u06cc \u062c\u062f\u06cc\u062f"),Object(R.a)(M,"new_reports","\u0622\u062e\u0631\u06cc\u0646 \u06af\u0632\u0627\u0631\u0634\u0627\u062a"),Object(R.a)(M,"events_calendar","\u062a\u0642\u0648\u06cc\u0645 \u0631\u062e\u062f\u0627\u062f\u0647\u0627"),Object(R.a)(M,"to","\u0628\u0647"),Object(R.a)(M,"statusChanges","\u062a\u063a\u06cc\u06cc\u0631\u0627\u062a \u0648\u0636\u0639\u06cc\u062a \u0647\u0627"),Object(R.a)(M,"in_reply_to","\u062f\u0631 \u067e\u0627\u0633\u062e \u0628\u0647"),Object(R.a)(M,"surveillance","\u0646\u0638\u0627\u0631\u062a"),Object(R.a)(M,"start","\u0634\u0631\u0648\u0639"),Object(R.a)(M,"stop","\u067e\u0627\u06cc\u0627\u0646"),M),P=a(16),F=a.n(P),U=(a(22),a(18),a(19),function(e){function t(e){var t=[];return e.deadline_alert&&t.push(i.a.createElement("span",{className:"color-red ml-5"},i.a.createElement("i",{class:"fa fa-bell-o","aria-hidden":"true"}))),e.report_alert&&t.push(i.a.createElement("span",{className:"color-blue ml-5"},i.a.createElement("i",{class:"fa fa-file-text-o ","aria-hidden":"true"}))),e.comment_alert&&t.push(i.a.createElement("span",{className:"color-green mr-5"},i.a.createElement("i",{class:"fa fa-comments-o ","aria-hidden":"true"}))),t}return e.tasks?i.a.createElement(i.a.Fragment,null,i.a.createElement(r.i,null,e.header,function(){if(e.sortChange)return i.a.createElement("a",{className:" fs-10 smart-select smart-select-init","data-open-in":"popover"},i.a.createElement("select",{name:"superhero",onChange:function(t){e.sortChange({title:t.target.value})}},i.a.createElement("option",{value:"title",key:"option-title"},q.by_title),i.a.createElement("option",{value:"events",key:"option-events",selected:!0},q.by_events)),i.a.createElement("div",{className:"item-content"},i.a.createElement("div",{className:"item-inner"},i.a.createElement("div",{className:"item-title"},q.sort_by))))}()),i.a.createElement(r.g,{className:"h-200"},i.a.createElement(r.o,{mediaList:!0,className:"fs-11"},e.tasks.map((function(e){return i.a.createElement(r.q,{key:"task"+e.id,title:e.title,text:e.details,after:t(e),link:"/tasks/"+e.id})})))),i.a.createElement(r.h,null)):i.a.createElement("ul",null)}),B=function(e){function t(e){var t=[];return e.deadline_alert&&t.push(i.a.createElement("span",{className:"color-red ml-5"},i.a.createElement("i",{class:"fa fa-bell-o","aria-hidden":"true"}))),e.report_alert&&t.push(i.a.createElement("span",{className:"color-blue ml-5"},i.a.createElement("i",{class:"fa fa-file-text-o ","aria-hidden":"true"}))),e.comment_alert&&t.push(i.a.createElement("span",{className:"color-green mr-5"},i.a.createElement("i",{class:"fa fa-comments-o ","aria-hidden":"true"}))),t}return e.works?i.a.createElement(i.a.Fragment,null,i.a.createElement(r.i,null,e.header),i.a.createElement(r.g,{className:"h-200"},i.a.createElement(r.o,{mediaList:!0,className:"fs-11"},e.works.map((function(e){return i.a.createElement(r.q,{className:"fs-10",key:"workList"+e.id,title:e.title,text:e.task.title,after:t(e),link:"/works/"+e.id})})))),i.a.createElement(r.h,null)):i.a.createElement("ul",null)},K=function(e){if(e.notifications&&e.notifications.length>0){var t=function(e){if(!e.seen)return"bg-blonde"};return i.a.createElement(r.f,null,i.a.createElement(r.i,null,q.new_notifications),i.a.createElement(r.g,{className:"h-120"},i.a.createElement(r.o,{mediaList:!0},e.notifications.map((function(e){return i.a.createElement(r.q,{className:"fs-11 "+t(e),key:V.a.lib.WordArray.random(32),link:"/"+e.target_type+"/"+e.target_id,title:(a=e.profile,i.a.createElement(r.n,{href:"/profiles/"},a.fullname)),text:e.notification_text.title},i.a.createElement("img",{slot:"media",src:e.profile.avatar,width:"32",height:"32"}));var a})))),i.a.createElement(r.h,null))}return i.a.createElement("ul",null)},G=function(e){if(console.log(e),e.reports&&e.reports.length>0){return i.a.createElement(r.f,null,i.a.createElement(r.i,null,q.new_reports),i.a.createElement(r.g,{className:"h-120"},i.a.createElement(r.o,{mediaList:!0},e.reports.map((function(e){return i.a.createElement(r.q,{className:"fs-11 ",key:V.a.lib.WordArray.random(32),link:"/reports/"+e.id,text:(t=e.profile,i.a.createElement(r.n,{href:"/profiles/"},t.fullname)),title:e.title},i.a.createElement("img",{slot:"media",src:e.profile.avatar,width:"32",height:"32"}));var t})))),i.a.createElement(r.h,null))}return i.a.createElement("ul",null)},z=a(102);z.b.global.defaultFontFamily="iransans";var H=function(e){return e.tasksVisits?i.a.createElement(r.f,null,i.a.createElement(r.i,null),i.a.createElement(r.g,{className:"h-300"},i.a.createElement(z.a,{data:{datasets:function(){var t=[];return e.tasksVisits.map((function(e){var a=[];Object.keys(e.series.data).map((function(e,t){a.push({x:new window.ODate(e).toLocaleDateString("fa-IR"),y:t})})),t.push({label:e.series.title.substring(0,15),backgroundColor:"rgb("+Math.floor(255*Math.random())+","+Math.floor(255*Math.random())+","+Math.floor(255*Math.random())+")",borderColor:"blue",data:a})})),t}()},options:{maintainAspectRatio:!1,responsive:!0,scales:{xAxes:[{type:"time",time:{displayFormats:{day:"MM/D"}},scaleLabel:{display:!0,labelString:q.date}}]}}})),i.a.createElement(r.h,null)):null},J=function(e){if(e.statusChanges&&e.statusChanges.length>0){return i.a.createElement(r.f,null,i.a.createElement(r.i,null,q.statusChanges),i.a.createElement(r.g,{className:"h-120"},i.a.createElement(r.o,{mediaList:!0},e.statusChanges.map((function(e){return function(e){if(e.prev_status&&e.prev_status.title!==e.current_status.title)return i.a.createElement(r.q,{className:"fs-11 home-status",key:V.a.lib.WordArray.random(32),link:"/"+e.statusable_type_pl+"/"+e.statusable_id,title:(n=e.profile,i.a.createElement(r.n,{href:"/profiles/"},n.fullname)),text:e.title,after:(t=e.current_status,a=e.prev_status,i.a.createElement("div",null,i.a.createElement("div",{className:"chip fs-11 ml-2"},i.a.createElement("div",{className:"chip-media",style:{backgroundColor:a.color}},i.a.createElement("i",{className:"icon f7-icons if-not-md"},"plus_circle"),i.a.createElement("i",{className:"icon material-icons md-only"})),i.a.createElement("div",{className:"chip-label"},a.title)),q.to,i.a.createElement("div",{className:"chip fs-11 "},i.a.createElement("div",{className:"chip-media",style:{backgroundColor:t.color}},i.a.createElement("i",{className:"icon f7-icons if-not-md"},"plus_circle"),i.a.createElement("i",{className:"icon material-icons md-only"})),i.a.createElement("div",{className:"chip-label"},t.title))))},i.a.createElement("img",{slot:"media",src:e.profile.avatar,width:"32",height:"32"}));var t,a,n}(e)})))),i.a.createElement(r.h,null))}return i.a.createElement("ul",null)},Q=function(e){return i.a.createElement(r.s,{onPageAfterIn:e.pageAfterIn.bind(void 0)},i.a.createElement(r.r,{title:q.home},i.a.createElement(r.n,{panelOpen:"right"},i.a.createElement(r.m,{f7:"bars"}))),i.a.createElement(r.u,null,i.a.createElement(r.k,{width:"100",tabletWidth:"50"},i.a.createElement(r.f,null,i.a.createElement(U,{tasks:e.tasks,header:q.your_tasks,sortChange:e.sortChange}))),i.a.createElement(r.k,{width:"100",tabletWidth:"50"},i.a.createElement(r.f,null,i.a.createElement(r.i,null,q.events_calendar),i.a.createElement(r.g,{className:"home"},i.a.createElement("div",{className:"block block-strong no-padding"},i.a.createElement("div",{id:"demo-calendar-inline-container"})))))),i.a.createElement(r.u,null,i.a.createElement(r.k,{width:"100",tabletWidth:"50"},i.a.createElement(r.f,null,i.a.createElement(B,{works:e.works,header:q.your_newest_works,sortChange:e.sortChange}))),i.a.createElement(r.k,{width:"100",tabletWidth:"50"},i.a.createElement(K,{notifications:e.notifications,header:q.your_newest_works,sortChange:e.sortChange}))),i.a.createElement(r.u,null,i.a.createElement(r.k,{width:"100",tabletWidth:"50"},i.a.createElement(G,{reports:e.reports,header:q.your_newest_works,sortChange:e.sortChange})),i.a.createElement(r.k,{id:"status-card",width:"100",tabletWidth:"50"},i.a.createElement(J,{statusChanges:e.statusChanges,header:q.your_newest_works,sortChange:e.sortChange}))),i.a.createElement(r.u,null,i.a.createElement(r.k,{width:"100",tabletWidth:"100"},i.a.createElement(H,{tasksVisits:e.tasksVisits,header:q.your_newest_works,sortChange:e.sortChange}))))},Y=function(e){function t(){var e;return Object(d.a)(this,t),(e=Object(f.a)(this,Object(p.a)(t).call(this))).getMutipleList=e.getMutipleList.bind(Object(g.a)(e)),e.sortChange=e.sortChange.bind(Object(g.a)(e)),e.loadData=e.loadData.bind(Object(g.a)(e)),e.loadCalender=e.loadCalender.bind(Object(g.a)(e)),e.pageAfterIn=e.pageAfterIn.bind(Object(g.a)(e)),e.state={token:window.localStorage.getItem("token"),tasks:null,works:null,notifications:null,reports:null,events:null,statusChanges:null,taskPage:1,taskPp:10},e}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentWillMount",value:function(){_.on("got_multiple_list",this.getMutipleList)}},{key:"componentWillUnmount",value:function(){_.removeListener("got_multiple_list",this.getMutipleList)}},{key:"loadCalender",value:function(){var e=this,t=e.$f7,a=[];e.state.events&&e.state.events.map((function(e){a.push({date:new window.ODate(e.date),color:e.color})})),console.log(a);var n=["\u0641\u0631\u0648\u0631\u062f\u064a\u0646","\u0627\u0631\u062f\u064a\u0628\u0647\u0634\u062a","\u062e\u0631\u062f\u0627\u062f","\u062a\u06cc\u0631","\u0645\u0631\u062f\u0627\u062f","\u0634\u0647\u0631\u06cc\u0648\u0631","\u0645\u0647\u0631","\u0622\u0628\u0627\u0646","\u0622\u0630\u0631","\u062f\u06cc","\u0628\u0647\u0645\u0646","\u0627\u0633\u0641\u0646\u062f"],i=t.calendar.create({containerEl:"#demo-calendar-inline-container",value:[new Date],weekHeader:!1,events:a,renderToolbar:function(){return'<div class="toolbar calendar-custom-toolbar no-shadow"><div class="toolbar-inner"><div class="left"><a href="#" class="link icon-only"><i class="icon icon-back '+("md"===t.theme?"color-black":"")+'"></i></a></div><div class="center"></div><div class="right"><a href="#" class="link icon-only"><i class="icon icon-forward '+("md"===t.theme?"color-black":"")+'"></i></a></div></div></div>'},on:{init:function(t){e.$$(".calendar-custom-toolbar .center").text(n[t.currentMonth]+", "+t.currentYear),e.$$(".calendar-custom-toolbar .left .link").on("click",(function(){i.prevMonth()})),e.$$(".calendar-custom-toolbar .right .link").on("click",(function(){i.nextMonth()}))},monthYearChangeStart:function(t){e.$$(".calendar-custom-toolbar .center").text(n[t.currentMonth]+", "+t.currentYear)},dayClick:function(e,t,a,n,i){console.log(a,n,i)}}})}},{key:"pageAfterIn",value:function(){}},{key:"componentDidMount",value:function(){this.loadData()}},{key:"loadData",value:function(){o.a.instance.toast.show({text:q.receiving,closeTimeout:2e3,position:"top"});var e={task_page:this.state.taskPage,task_pp:this.state.taskPp};I("home",this.state.page,e,this.state.token)}},{key:"getMutipleList",value:function(){var e=this,t=_.getMutipleList(),a=_.getKlass();console.log(t),t&&"Home"===a&&this.setState({tasks:t.tasks,works:t.works,notifications:t.notifications,reports:t.reports,tasksVisits:t.tasks_visits,events:t.events,statusChanges:t.status_change},(function(){return e.loadCalender()}))}},{key:"sortChange",value:function(e){w("tasks",this.state.page,{order:e.title},this.state.token)}},{key:"render",value:function(){var e=this.state,t=e.tasks,a=e.works,n=e.notifications,s=e.reports,l=e.tasksVisits,o=e.statusChanges;return i.a.createElement(Q,{notifications:n,tasksVisits:l,reports:s,tasks:t,works:a,sortChange:this.sortChange,pageAfterIn:this.pageAfterIn,statusChanges:o})}}]),t}(n.Component),X=function(e){function t(){var e;return Object(d.a)(this,t),(e=Object(f.a)(this,Object(p.a)(t).call(this))).logout=e.logout.bind(Object(g.a)(e)),e.getInstance=e.getInstance.bind(Object(g.a)(e)),e.check_ability=e.check_ability.bind(Object(g.a)(e)),e.state={token:window.localStorage.getItem("token"),ability:null},e}return Object(v.a)(t,e),Object(h.a)(t,[{key:"logout",value:function(){this.setState({token:null}),window.localStorage.removeItem("token"),window.location.replace("/")}},{key:"componentWillMount",value:function(){_.on("got_instance",this.getInstance)}},{key:"componentWillUnmount",value:function(){_.removeListener("got_instance",this.getInstance)}},{key:"componentDidMount",value:function(){this.state.token&&this.state.token.length>10&&N("users","role",this.state.token)}},{key:"getInstance",value:function(){var e=_.getIntance(),t=_.getKlass();e&&"UserRole"===t&&(console.log(e),this.setState({ability:e.the_ability}))}},{key:"check_ability",value:function(e,t,a){var n=[];return this.state.ability&&this.state.ability.map((function(s){s.title===e&&s.value&&n.push(i.a.createElement(r.q,{link:"/"+t+"/",ignoreCache:!0,key:"panel"+t,view:"#main-view",panelClose:!0},i.a.createElement("i",{className:"va ml-5 fa fa-"+a}),i.a.createElement("span",null,q[t])))})),n}},{key:"logged_in",value:function(e){return e?i.a.createElement(i.a.Fragment,null,i.a.createElement(r.d,null," ",i.a.createElement("i",{className:"va ml-5 fa fa-tachometer"}),q.dashboard),i.a.createElement(r.o,{className:"fs-13"},i.a.createElement(r.q,{link:"/",view:"#main-view",panelClose:!0},i.a.createElement("i",{className:"va ml-5 fa fa-home"}),i.a.createElement("span",null,q.home)),i.a.createElement(r.q,{link:"/tasks/",view:"#main-view",panelClose:!0},i.a.createElement("i",{className:"va ml-5 fa fa-tasks"}),i.a.createElement("span",null,q.tasks)),i.a.createElement(r.q,{link:"/time_sheets/",view:"#main-view",panelClose:!0},i.a.createElement("i",{className:"va ml-5 fa fa-file-excel-o"}),i.a.createElement("span",null,q.time_sheets)),i.a.createElement(r.q,{link:"/surveillances/",view:"#main-view",panelClose:!0},i.a.createElement("i",{className:"va ml-5 fa fa-eye"}),i.a.createElement("span",null,q.surveillance)),i.a.createElement(r.q,{link:"/notifications/",ignoreCache:!1,reloadCurrent:!1,view:"#main-view",panelClose:!0},i.a.createElement("i",{className:"va ml-5 fa fa-circle-o-notch"}),i.a.createElement("span",null,q.notifications))),i.a.createElement(r.d,null,i.a.createElement("i",{className:"va ml-5 fa fa-cogs"}),q.user_settings),i.a.createElement(r.o,null,i.a.createElement(r.q,{link:"/settings/",ignoreCache:!0,view:"#main-view",panelClose:!0},i.a.createElement("i",{className:"va ml-5 fa fa-user-secret"}),i.a.createElement("span",null,q.privacy)),i.a.createElement(r.q,{link:"/profiles/",view:"#main-view",panelClose:!0},i.a.createElement("i",{className:"va ml-5 fa fa-user-circle-o"}),i.a.createElement("span",null,q.profile)),i.a.createElement(r.q,{view:"#main-view",panelClose:!0,onClick:this.logout},i.a.createElement("i",{className:"va ml-5 fa fa-power-off"}),i.a.createElement("span",null,q.logout))),i.a.createElement(r.d,null," ",i.a.createElement("i",{className:"va ml-5 fa fa-cog"}),q.settings),i.a.createElement(r.o,{className:"fs-13"},this.check_ability("change_role","roles","shield"),this.check_ability("change_statuses","statuses","circle-o"),this.check_ability("add_tags","tags","tags"),this.check_ability("change_groups","groups","bullseye"))):i.a.createElement(i.a.Fragment,null,i.a.createElement(r.d,null,q.user_settings),i.a.createElement(r.o,null,i.a.createElement(r.q,{link:"/login/",title:q.login,view:"#main-view",panelClose:!0})))}},{key:"render",value:function(){var e=this.state.token;return i.a.createElement(r.s,null,i.a.createElement(r.r,{title:q.tavan}),this.logged_in(e))}}]),t}(n.Component),Z=function(e){var t=[i.a.createElement("option",{value:""})];if(e.users)for(var a=0;a<e.users.length;a++)t.push(i.a.createElement("option",{value:e.users[a].id},e.users[a].email));return t},ee=function(e){return i.a.createElement(i.a.Fragment,null,i.a.createElement(r.d,null,q.assignment_form),i.a.createElement(r.o,{inset:!0},i.a.createElement(r.q,{title:q.email,smartSelect:!0},i.a.createElement("select",{name:"content",onChange:function(t){e.handleChange({user_id:t.target.value})}},i.a.createElement(Z,{users:e.users})))),i.a.createElement(r.c,{strong:!0,inset:!0},i.a.createElement(r.u,{tag:"p"},i.a.createElement(r.n,{className:"btn-notice"}),i.a.createElement(r.e,{className:"col btn",fill:!0,onClick:e.submit},q.submit))))},te=function(e){var t=[];if(e.users){for(var a=function(a){[],t.push(i.a.createElement("tr",{key:V.a.lib.WordArray.random(32)},i.a.createElement("td",{key:V.a.lib.WordArray.random(32)},e.users[a].id),i.a.createElement("td",{key:V.a.lib.WordArray.random(32)},e.users[a].email),i.a.createElement("td",{className:"checkbox-cell",key:V.a.lib.WordArray.random(32)},i.a.createElement(r.e,{color:"gray",onClick:function(){return e.removeRole(e.users[a].id)}},i.a.createElement(r.m,{ios:"f7:trash",aurora:"f7:trash",md:"material:trash"})))))},n=0;n<e.users.length;n++){a(n)}return i.a.createElement("div",{className:"data-table card"},i.a.createElement("table",null,i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("td",null,"ID"),i.a.createElement("td",null,"Email"))),i.a.createElement("tbody",null,t)))}return null},ae=function(e){return i.a.createElement(i.a.Fragment,null,i.a.createElement(r.d,null,q.access_control_form),i.a.createElement(r.o,{inset:!0},i.a.createElement(r.p,{label:q.item,type:"text",placeholder:"...",onInput:function(t){e.handleChange({abilityTitle:t.target.value})}}),i.a.createElement(r.p,{label:q.value,type:"select",defaultValue:!0,placeholder:"Please choose...",onChange:function(t){e.handleChange({abilityValue:t.target.value})}},i.a.createElement("option",{value:!0},q.true),i.a.createElement("option",{value:!1},q.false))),i.a.createElement(r.c,{strong:!0,inset:!0},i.a.createElement(r.u,{tag:"p"},i.a.createElement(r.n,{className:"btn-notice"}),i.a.createElement(r.e,{className:"col btn",fill:!0,onClick:e.addAbility},q.submit))))},ne=function(e){var t=[];if(e.ability){for(var a=function(a){[],t.push(i.a.createElement("tr",{key:V.a.lib.WordArray.random(32)},i.a.createElement("td",{key:V.a.lib.WordArray.random(32)},e.ability[a].title),i.a.createElement("td",{key:V.a.lib.WordArray.random(32)},q[e.ability[a].value]),i.a.createElement("td",{className:"checkbox-cell",key:V.a.lib.WordArray.random(32)},i.a.createElement(r.e,{color:"gray",onClick:function(){return e.removeAbility(e.ability[a].title)}},i.a.createElement(r.m,{ios:"f7:trash",aurora:"f7:trash",md:"material:trash"})))))},n=0;n<e.ability.length;n++){a(n)}return i.a.createElement(i.a.Fragment,null,i.a.createElement(r.d,null,q.access_control_list),i.a.createElement("div",{className:"data-table card"},i.a.createElement("table",null,i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("td",null,q.title),i.a.createElement("td",null,q.value))),i.a.createElement("tbody",null,t))))}return null},ie=function(e){return e.role?i.a.createElement(i.a.Fragment,null,i.a.createElement(r.d,null,q.title),i.a.createElement(r.o,{"simple-list":!0},i.a.createElement(r.q,null,e.role.title)),i.a.createElement(ne,{ability:e.ability,removeAbility:e.removeAbility}),i.a.createElement(ae,{addAbility:e.addAbility,handleChange:e.handleChange}),i.a.createElement(te,{users:e.assignedUsers,removeRole:e.removeRole}),i.a.createElement(ee,{users:e.users,submit:e.submit,handleChange:e.handleChange})):null},se=function(e){function t(){var e;return Object(d.a)(this,t),(e=Object(f.a)(this,Object(p.a)(t).call(this))).getInstance=e.getInstance.bind(Object(g.a)(e)),e.getList=e.getList.bind(Object(g.a)(e)),e.submit=e.submit.bind(Object(g.a)(e)),e.handleChangeValue=e.handleChangeValue.bind(Object(g.a)(e)),e.removeRole=e.removeRole.bind(Object(g.a)(e)),e.addAbility=e.addAbility.bind(Object(g.a)(e)),e.removeAbility=e.removeAbility.bind(Object(g.a)(e)),e.state={token:window.localStorage.getItem("token"),role:null,id:null,users:null,assignedUsers:null,user_id:null,abilityTitle:"",abilityValue:!0,ability:null},e}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentWillMount",value:function(){_.on("got_instance",this.getInstance),_.on("set_instance",this.getInstance),_.on("got_list",this.getList),_.on("deleted_instance",this.getInstance)}},{key:"componentWillUnmount",value:function(){_.removeListener("got_instance",this.getInstance),_.removeListener("set_instance",this.getInstance),_.removeListener("got_list",this.getList),_.removeListener("deleted_instance",this.getInstance)}},{key:"componentDidMount",value:function(){N("roles",this.$f7route.params.roleId,this.state.token),w("users",this.state.page,{},this.state.token)}},{key:"getInstance",value:function(){var e=_.getIntance(),t=_.getKlass();e&&"Role"===t&&this.setState({role:e,id:e.id,assignedUsers:e.users,ability:e.ability}),this.$$(".btn").show()}},{key:"getList",value:function(){var e=_.getList(),t=_.getKlass();e&&"User"===t&&this.setState({users:e})}},{key:"submit",value:function(){this.$$(".btn").hide(),this.$$(".btn-notice").text(q.submitting),T("users/assignments",{role_id:this.state.id,user_id:this.state.user_id},this.state.token)}},{key:"addAbility",value:function(){T("roles/abilities",{id:this.state.id,ability_title:this.state.abilityTitle,ability_value:this.state.abilityValue},this.state.token)}},{key:"handleChangeValue",value:function(e){this.setState(e)}},{key:"fab",value:function(){if(this.state.role)return i.a.createElement(r.l,{href:"/roles/"+this.state.role.id+"/edit",target:"#main-view",position:"left-bottom",slot:"fixed",color:"lime"},i.a.createElement(r.m,{ios:"f7:edit",aurora:"f7:edit",md:"material:edit"}),i.a.createElement(r.m,{ios:"f7:close",aurora:"f7:close",md:"material:close"}))}},{key:"removeRole",value:function(e){L("users/assignments",{user_id:e,role_id:this.state.id},this.state.token)}},{key:"removeAbility",value:function(e){L("roles/abilities",{id:this.state.id,title:e},this.state.token)}},{key:"render",value:function(){var e=this.state,t=e.role,a=e.users,n=e.assignedUsers,s=e.ability;return i.a.createElement(r.s,null,i.a.createElement(r.r,{title:q.roles,backLink:q.back}),i.a.createElement(r.d,null),this.fab(),i.a.createElement(ie,{role:t,users:a,ability:s,removeAbility:this.removeAbility,assignedUsers:n,addAbility:this.addAbility,removeRole:this.removeRole,submit:this.submit,handleChange:this.handleChangeValue}))}}]),t}(n.Component),le=function(e){return e.roles?i.a.createElement(r.o,{mediaList:!0},e.roles.map((function(e){return i.a.createElement(r.q,{key:V.a.lib.WordArray.random(32),link:"/roles/"+e.id,ignoreCache:!0,title:e.title,after:"",subtitle:"",text:""})}))):i.a.createElement("ul",null)},oe=function(e){return i.a.createElement(r.s,null,i.a.createElement(r.r,{title:q.roles,backLink:q.back}),i.a.createElement(r.d,null,q.list),i.a.createElement(r.l,{href:"/roles/new",target:"#main-view",position:"left-bottom",slot:"fixed",color:"deeporange"},i.a.createElement(r.m,{ios:"f7:add",aurora:"f7:add",md:"material:add"}),i.a.createElement(r.m,{ios:"f7:close",aurora:"f7:close",md:"material:close"})),i.a.createElement(le,{roles:e.roles}))},re=function(e){function t(){var e;return Object(d.a)(this,t),(e=Object(f.a)(this,Object(p.a)(t).call(this))).getList=e.getList.bind(Object(g.a)(e)),e.state={token:window.localStorage.getItem("token"),roles:null},e}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentWillMount",value:function(){_.on("got_list",this.getList)}},{key:"componentWillUnmount",value:function(){_.removeListener("got_list",this.getList)}},{key:"componentDidMount",value:function(){this.loadData()}},{key:"loadData",value:function(){o.a.instance.toast.show({text:q.receiving,closeTimeout:2e3,position:"top"}),w("roles",this.state.page,{},this.state.token)}},{key:"getList",value:function(){var e=_.getList(),t=_.getKlass();e&&"Role"===t&&this.setState({roles:e})}},{key:"render",value:function(){var e=this.state.roles;return i.a.createElement(oe,{roles:e})}}]),t}(i.a.Component),ce=function(e){if(e.defaultRole)var t=!0;else t=!1;return i.a.createElement(i.a.Fragment,null,i.a.createElement(r.d,null,q.role),i.a.createElement(r.o,null,i.a.createElement(r.p,{label:q.title,key:"role-title",type:"text",placeholder:"...",defaultValue:e.role.title,onInput:function(t){e.handleChange({title:t.target.value})}}),i.a.createElement(r.q,{radio:!0,value:!1,checked:!t,name:"defaultRole",title:q.NonDefault,onChange:function(t){console.log(t),e.handleChange({defaultRole:JSON.parse(t.target.value)})}}),i.a.createElement(r.q,{radio:!0,value:!0,checked:t,name:"defaultRole",title:q.Default,onChange:function(t){console.log(t),e.handleChange({defaultRole:JSON.parse(t.target.value)})}})),i.a.createElement(r.c,{strong:!0},i.a.createElement(r.u,{tag:"p"},i.a.createElement(r.n,{className:"btn-notice"}),i.a.createElement(r.e,{className:"col btn",fill:!0,disabled:!e.editing,onClick:e.submit},q.submit))))},ue=function(e){function t(){var e;return Object(d.a)(this,t),(e=Object(f.a)(this,Object(p.a)(t).call(this))).submit=e.submit.bind(Object(g.a)(e)),e.setInstance=e.setInstance.bind(Object(g.a)(e)),e.handleChangeValue=e.handleChangeValue.bind(Object(g.a)(e)),e.state={token:window.localStorage.getItem("token"),role:{},defaultRole:!0},e}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentWillMount",value:function(){_.on("set_instance",this.setInstance)}},{key:"componentWillUnmount",value:function(){_.removeListener("set_instance",this.setInstance)}},{key:"submit",value:function(){T("roles",{title:this.state.title,default_role:this.state.defaultRole},this.state.token)}},{key:"handleChangeValue",value:function(e){this.setState(e)}},{key:"setInstance",value:function(){this.$f7router.navigate("/roles/")}},{key:"render",value:function(){var e=this.state,t=e.role,a=e.defaultRole;return i.a.createElement(r.s,null,i.a.createElement(r.r,{title:q.role_form,backLink:q.back}),i.a.createElement(r.d,null,q.role_form),i.a.createElement(ce,{role:t,defaultRole:a,submit:this.submit,editing:!0,handleChange:this.handleChangeValue}))}}]),t}(n.Component),me=function(e){function t(){var e;return Object(d.a)(this,t),(e=Object(f.a)(this,Object(p.a)(t).call(this))).submit=e.submit.bind(Object(g.a)(e)),e.setInstance=e.setInstance.bind(Object(g.a)(e)),e.getInstance=e.getInstance.bind(Object(g.a)(e)),e.handleChangeValue=e.handleChangeValue.bind(Object(g.a)(e)),e.state={token:window.localStorage.getItem("token"),role:{},defaultRole:null},e}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentWillMount",value:function(){_.on("got_instance",this.getInstance),_.on("set_instance",this.setInstance)}},{key:"componentWillUnmount",value:function(){_.removeListener("got_instance",this.getInstance),_.removeListener("set_instance",this.setInstance)}},{key:"submit",value:function(){x("roles",{id:this.state.id,title:this.state.title,default_role:this.state.defaultRole},this.state.token)}},{key:"componentDidMount",value:function(){this.loadData()}},{key:"loadData",value:function(){o.a.instance.toast.show({text:q.receiving,closeTimeout:2e3,position:"top"}),this.$f7route.params.roleId&&N("roles",this.$f7route.params.roleId,this.state.token)}},{key:"getInstance",value:function(){var e=_.getIntance(),t=_.getKlass();e&&"Role"===t&&this.setState({title:e.title,id:e.id,role:e,defaultRole:e.default_role})}},{key:"handleChangeValue",value:function(e){this.setState(e)}},{key:"setInstance",value:function(){this.$f7router.navigate("/roles/")}},{key:"render",value:function(){var e=this.state,t=e.role,a=e.defaultRole;return i.a.createElement(r.s,null,i.a.createElement(r.r,{title:q.role_form,backLink:q.back}),i.a.createElement(r.d,null,q.role_form),i.a.createElement(ce,{role:t,defaultRole:a,submit:this.submit,editing:!0,handleChange:this.handleChangeValue}))}}]),t}(n.Component),de=function(e){return e.tag?i.a.createElement(i.a.Fragment,null,i.a.createElement(r.d,null,q.title),i.a.createElement(r.o,{"simple-list":!0},i.a.createElement(r.q,null,e.tag.title)),i.a.createElement(r.d,null,q.confirmed),i.a.createElement(r.o,{"simple-list":!0},i.a.createElement(r.q,null,q[e.tag.confirmed]))):null},he=function(e){function t(){var e;return Object(d.a)(this,t),(e=Object(f.a)(this,Object(p.a)(t).call(this))).getInstance=e.getInstance.bind(Object(g.a)(e)),e.submit=e.submit.bind(Object(g.a)(e)),e.handleChangeValue=e.handleChangeValue.bind(Object(g.a)(e)),e.state={token:window.localStorage.getItem("token"),tag:null,id:null,users:null,user_id:null,editable:!1},e}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentWillMount",value:function(){_.on("got_instance",this.getInstance),_.on("set_instance",this.getInstance)}},{key:"componentWillUnmount",value:function(){_.removeListener("got_instance",this.getInstance),_.removeListener("set_instance",this.getInstance)}},{key:"componentDidMount",value:function(){N("tags",this.$f7route.params.tagId,this.state.token)}},{key:"getInstance",value:function(){var e=_.getIntance(),t=_.getKlass();e&&"Tag"===t&&this.setState({tag:e,id:e.id,assignedUsers:e.users,ability:e.ability,editable:e.editable}),this.$$(".btn").show()}},{key:"submit",value:function(){this.$$(".btn").hide(),this.$$(".btn-notice").text(q.submitting),T("users/assignments",{tag_id:this.state.id,user_id:this.state.user_id},this.state.token)}},{key:"handleChangeValue",value:function(e){this.setState(e)}},{key:"fab",value:function(){if(this.state.tag&&this.state.editable)return i.a.createElement(r.l,{href:"/tags/"+this.state.tag.id+"/edit",target:"#main-view",position:"left-bottom",slot:"fixed",color:"lime"},i.a.createElement(r.m,{ios:"f7:edit",aurora:"f7:edit",md:"material:edit"}),i.a.createElement(r.m,{ios:"f7:close",aurora:"f7:close",md:"material:close"}))}},{key:"render",value:function(){var e=this.state,t=e.tag,a=e.editable;return i.a.createElement(r.s,null,i.a.createElement(r.r,{title:q.tags,backLink:q.back}),i.a.createElement(r.d,null),this.fab(),i.a.createElement(de,{tag:t,editable:a,submit:this.submit,handleChange:this.handleChangeValue}))}}]),t}(n.Component),fe=function(e){return e.tags?i.a.createElement(r.o,{mediaList:!0},e.tags.map((function(e){return i.a.createElement(r.q,{key:V.a.lib.WordArray.random(32),link:"/tags/"+e.id,ignoreCache:!0,title:e.title,after:"",subtitle:"",text:""})}))):i.a.createElement("ul",null)},pe=function(e){return i.a.createElement(r.s,null,i.a.createElement(r.r,{title:q.tags,backLink:q.back}),i.a.createElement(r.d,null,q.list),i.a.createElement(r.l,{href:"/tags/new",target:"#main-view",position:"left-bottom",slot:"fixed",color:"deeporange"},i.a.createElement(r.m,{ios:"f7:add",aurora:"f7:add",md:"material:add"}),i.a.createElement(r.m,{ios:"f7:close",aurora:"f7:close",md:"material:close"})),i.a.createElement(fe,{tags:e.tags}))},ge=function(e){function t(){var e;return Object(d.a)(this,t),(e=Object(f.a)(this,Object(p.a)(t).call(this))).getList=e.getList.bind(Object(g.a)(e)),e.state={token:window.localStorage.getItem("token"),tags:null},e}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentWillMount",value:function(){_.on("got_list",this.getList)}},{key:"componentWillUnmount",value:function(){_.removeListener("got_list",this.getList)}},{key:"componentDidMount",value:function(){this.loadData()}},{key:"loadData",value:function(){o.a.instance.toast.show({text:q.receiving,closeTimeout:2e3,position:"top"}),w("tags",this.state.page,{},this.state.token)}},{key:"getList",value:function(){var e=_.getList(),t=_.getKlass();e&&"Tag"===t&&this.setState({tags:e})}},{key:"render",value:function(){var e=this.state.tags;return i.a.createElement(pe,{tags:e})}}]),t}(i.a.Component),ve=function(e){if(e.isConfirmed)var t=!0;else t=!1;return i.a.createElement(i.a.Fragment,null,i.a.createElement(r.d,null,q.tag),i.a.createElement(r.o,null,i.a.createElement(r.p,{label:q.title,type:"text",placeholder:"...",defaultValue:e.tag.title,onInput:function(t){e.handleChange({title:t.target.value})}})),function(){if(e.confirmable)return i.a.createElement(r.o,null,i.a.createElement(r.q,{radio:!0,value:!1,checked:!t,name:"selectedMode",title:q.not_confirmed,onChange:function(t){e.handleChange({isConfirmed:JSON.parse(t.target.value)})}}),i.a.createElement(r.q,{radio:!0,value:!0,checked:t,name:"selectedMode",title:q.confirmed,onChange:function(t){e.handleChange({isConfirmed:JSON.parse(t.target.value)})}}))}(),i.a.createElement(r.c,{strong:!0},i.a.createElement(r.u,{tag:"p"},i.a.createElement(r.n,{className:"btn-notice"}),i.a.createElement(r.e,{className:"col btn",fill:!0,disabled:!e.editing,onClick:e.submit},q.submit))))},be=function(e){function t(){var e;return Object(d.a)(this,t),(e=Object(f.a)(this,Object(p.a)(t).call(this))).submit=e.submit.bind(Object(g.a)(e)),e.setInstance=e.setInstance.bind(Object(g.a)(e)),e.handleChangeValue=e.handleChangeValue.bind(Object(g.a)(e)),e.state={token:window.localStorage.getItem("token"),tag:{},isConfirmed:!1,confirmable:!1},e}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentWillMount",value:function(){_.on("set_instance",this.setInstance)}},{key:"componentWillUnmount",value:function(){_.removeListener("set_instance",this.setInstance)}},{key:"submit",value:function(){T("tags",{title:this.state.title,confirmed:this.state.isConfirmed},this.state.token)}},{key:"handleChangeValue",value:function(e){this.setState(e)}},{key:"setInstance",value:function(){this.$f7router.navigate("/tags/")}},{key:"render",value:function(){var e=this.state,t=e.tag,a=e.isConfirmed,n=e.confirmable;return i.a.createElement(r.s,null,i.a.createElement(r.r,{title:q.tag_form,backLink:q.back}),i.a.createElement(r.d,null,q.tag_form),i.a.createElement(ve,{tag:t,submit:this.submit,editing:!0,confirmable:n,handleChange:this.handleChangeValue,isConfirmed:a}))}}]),t}(n.Component),ke=function(e){function t(){var e;return Object(d.a)(this,t),(e=Object(f.a)(this,Object(p.a)(t).call(this))).submit=e.submit.bind(Object(g.a)(e)),e.setInstance=e.setInstance.bind(Object(g.a)(e)),e.getInstance=e.getInstance.bind(Object(g.a)(e)),e.handleChangeValue=e.handleChangeValue.bind(Object(g.a)(e)),e.state={token:window.localStorage.getItem("token"),tag:{},isConfirmed:!1,confirmable:!1},e}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentWillMount",value:function(){_.on("got_instance",this.getInstance),_.on("set_instance",this.setInstance)}},{key:"componentWillUnmount",value:function(){_.removeListener("got_instance",this.getInstance),_.removeListener("set_instance",this.setInstance)}},{key:"submit",value:function(){x("tags",{id:this.state.id,title:this.state.title,confirmed:this.state.isConfirmed},this.state.token)}},{key:"componentDidMount",value:function(){this.loadData()}},{key:"loadData",value:function(){o.a.instance.toast.show({text:q.receiving,closeTimeout:2e3,position:"top"}),this.$f7route.params.tagId&&N("tags",this.$f7route.params.tagId,this.state.token)}},{key:"getInstance",value:function(){var e=_.getIntance(),t=_.getKlass();e&&"Tag"===t&&this.setState({title:e.title,id:e.id,tag:e,isConfirmed:e.confirmed,confirmable:e.confirmable})}},{key:"handleChangeValue",value:function(e){this.setState(e)}},{key:"setInstance",value:function(){this.$f7router.navigate("/tags/")}},{key:"render",value:function(){var e=this.state,t=e.tag,a=e.isConfirmed,n=e.confirmable;return i.a.createElement(r.s,null,i.a.createElement(r.r,{title:q.tag_form,backLink:q.back}),i.a.createElement(r.d,null,q.tag_form),i.a.createElement(ve,{tag:t,isConfirmed:a,submit:this.submit,confirmable:n,editing:!0,handleChange:this.handleChangeValue}))}}]),t}(n.Component),Ee=function(e){return e.status?i.a.createElement(i.a.Fragment,null,i.a.createElement(r.d,null,q.title),i.a.createElement(r.o,{"simple-list":!0},i.a.createElement(r.q,null,e.status.title)),i.a.createElement(r.d,null,q.confirmed),i.a.createElement(r.o,{"simple-list":!0},i.a.createElement(r.q,null,q[e.status.confirmed])),i.a.createElement(r.o,{"simple-list":!0},i.a.createElement(r.q,{style:{backgroundColor:e.status.the_color}},e.status.the_color))):null},_e=function(e){function t(){var e;return Object(d.a)(this,t),(e=Object(f.a)(this,Object(p.a)(t).call(this))).getInstance=e.getInstance.bind(Object(g.a)(e)),e.submit=e.submit.bind(Object(g.a)(e)),e.handleChangeValue=e.handleChangeValue.bind(Object(g.a)(e)),e.state={token:window.localStorage.getItem("token"),status:null,id:null,editable:!1},e}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentWillMount",value:function(){_.on("got_instance",this.getInstance),_.on("set_instance",this.getInstance)}},{key:"componentWillUnmount",value:function(){_.removeListener("got_instance",this.getInstance),_.removeListener("set_instance",this.getInstance)}},{key:"componentDidMount",value:function(){N("statuses",this.$f7route.params.statusId,this.state.token)}},{key:"getInstance",value:function(){var e=_.getIntance(),t=_.getKlass();e&&"Status"===t&&this.setState({status:e,id:e.id,editable:e.editable}),this.$$(".btn").show()}},{key:"submit",value:function(){this.$$(".btn").hide(),this.$$(".btn-notice").text(q.submitting),T("users/assignments",{status_id:this.state.id,user_id:this.state.user_id},this.state.token)}},{key:"handleChangeValue",value:function(e){this.setState(e)}},{key:"fab",value:function(){if(this.state.status&&this.state.editable)return i.a.createElement(r.l,{href:"/statuses/"+this.state.status.id+"/edit",target:"#main-view",position:"left-bottom",slot:"fixed",color:"lime"},i.a.createElement(r.m,{ios:"f7:edit",aurora:"f7:edit",md:"material:edit"}),i.a.createElement(r.m,{ios:"f7:close",aurora:"f7:close",md:"material:close"}))}},{key:"render",value:function(){var e=this.state,t=e.status,a=e.editable;return i.a.createElement(r.s,null,i.a.createElement(r.r,{title:q.statuses,backLink:q.back}),i.a.createElement(r.d,null),this.fab(),i.a.createElement(Ee,{status:t,editable:a,submit:this.submit,handleChange:this.handleChangeValue}))}}]),t}(n.Component),ye=function(e){return e.statuses?i.a.createElement(r.o,{mediaList:!0},e.statuses.map((function(e){return i.a.createElement(r.q,{key:V.a.lib.WordArray.random(32),link:"/statuses/"+e.id,ignoreCache:!0,title:e.title,after:"",subtitle:"",text:""})}))):i.a.createElement("ul",null)},Ce=function(e){return i.a.createElement(r.s,null,i.a.createElement(r.r,{title:q.statuses,backLink:q.back}),i.a.createElement(r.d,null,q.list),i.a.createElement(r.l,{href:"/statuses/new",target:"#main-view",position:"left-bottom",slot:"fixed",color:"deeporange"},i.a.createElement(r.m,{ios:"f7:add",aurora:"f7:add",md:"material:add"}),i.a.createElement(r.m,{ios:"f7:close",aurora:"f7:close",md:"material:close"})),i.a.createElement(ye,{statuses:e.statuses}))},Oe=function(e){function t(){var e;return Object(d.a)(this,t),(e=Object(f.a)(this,Object(p.a)(t).call(this))).getList=e.getList.bind(Object(g.a)(e)),e.state={token:window.localStorage.getItem("token"),statuses:null},e}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentWillMount",value:function(){_.on("got_list",this.getList)}},{key:"componentWillUnmount",value:function(){_.removeListener("got_list",this.getList)}},{key:"componentDidMount",value:function(){this.loadData()}},{key:"loadData",value:function(){o.a.instance.toast.show({text:q.receiving,closeTimeout:2e3,position:"top"}),w("statuses",this.state.page,{},this.state.token)}},{key:"getList",value:function(){var e=_.getList(),t=_.getKlass();e&&"Status"===t&&this.setState({statuses:e})}},{key:"render",value:function(){var e=this.state.statuses;return i.a.createElement(Ce,{statuses:e})}}]),t}(i.a.Component),je=function(e){if(e.status){if(e.isConfirmed)var t=!0;else t=!1;return i.a.createElement(i.a.Fragment,null,i.a.createElement(r.d,null,q.status),i.a.createElement(r.o,null,i.a.createElement(r.p,{label:q.title,type:"text",placeholder:"...",defaultValue:e.title,onInput:function(t){e.handleChange({title:t.target.value})}})),function(){if(e.confirmable)return i.a.createElement(r.o,null,i.a.createElement(r.q,{radio:!0,value:!1,checked:!t,name:"selectedMode",title:q.not_confirmed,onChange:function(t){e.handleChange({isConfirmed:JSON.parse(t.target.value)})}}),i.a.createElement(r.q,{radio:!0,value:!0,checked:t,name:"selectedMode",title:q.confirmed,onChange:function(t){e.handleChange({isConfirmed:JSON.parse(t.target.value)})}}))}(),i.a.createElement("div",{className:"list "},i.a.createElement("ul",null,i.a.createElement("li",null,i.a.createElement("div",{className:"item-content item-input"},i.a.createElement("div",{className:"item-media"},i.a.createElement("i",{class:"fa fa-2x fa-circle-o demo-list-icon","aria-hidden":"true",id:"demo-color-picker-spectrum-value"})),i.a.createElement("div",{className:"item-inner"},i.a.createElement("div",{className:"item-input-wrap"},i.a.createElement("input",{type:"text",placeholder:"Color",value:e.color,readonly:"readonly",id:"demo-color-picker-spectrum"}))))))),i.a.createElement(r.c,{strong:!0},i.a.createElement(r.u,{tag:"p"},i.a.createElement(r.n,{className:"btn-notice"}),i.a.createElement(r.e,{className:"col btn",fill:!0,disabled:!e.editing,onClick:e.submit},q.submit))))}return null},we=function(e){function t(){var e;return Object(d.a)(this,t),(e=Object(f.a)(this,Object(p.a)(t).call(this))).submit=e.submit.bind(Object(g.a)(e)),e.setInstance=e.setInstance.bind(Object(g.a)(e)),e.handleChangeValue=e.handleChangeValue.bind(Object(g.a)(e)),e.state={token:window.localStorage.getItem("token"),status:{},title:"",color:"",isConfirmed:!1},e}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentWillMount",value:function(){_.on("set_instance",this.setInstance)}},{key:"componentWillUnmount",value:function(){_.removeListener("set_instance",this.setInstance)}},{key:"pageAfterIn",value:function(){this.loadPalette()}},{key:"loadPalette",value:function(){var e=this;e.$f7.colorPicker.create({inputEl:"#demo-color-picker-spectrum",targetEl:"#demo-color-picker-spectrum-value",targetElSetBackgroundColor:!0,modules:["sb-spectrum","hue-slider"],openIn:"popover",value:{hex:"#ff0000"},on:{closed:function(t){e.setState({color:t.value.hex})}}})}},{key:"submit",value:function(){T("statuses",{title:this.state.title,color:this.state.color,confirmed:this.state.isConfirmed},this.state.token)}},{key:"handleChangeValue",value:function(e){this.setState(e)}},{key:"setInstance",value:function(){this.$f7router.navigate("/statuses/")}},{key:"render",value:function(){var e=this.state,t=e.status,a=e.isConfirmed;return i.a.createElement(r.s,{onPageAfterIn:this.pageAfterIn.bind(this)},i.a.createElement(r.r,{title:q.status_form,backLink:q.back}),i.a.createElement(r.d,null,q.status_form),i.a.createElement(je,{status:t,submit:this.submit,isConfirmed:a,editing:!0,handleChange:this.handleChangeValue}))}}]),t}(n.Component),Ie=function(e){function t(){var e;return Object(d.a)(this,t),(e=Object(f.a)(this,Object(p.a)(t).call(this))).submit=e.submit.bind(Object(g.a)(e)),e.setInstance=e.setInstance.bind(Object(g.a)(e)),e.getInstance=e.getInstance.bind(Object(g.a)(e)),e.handleChangeValue=e.handleChangeValue.bind(Object(g.a)(e)),e.loadPalette=e.loadPalette.bind(Object(g.a)(e)),e.state={token:window.localStorage.getItem("token"),status:{},title:null,id:"",color:"#fff",isConfirmed:!1,confirmable:!1},e}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentWillMount",value:function(){_.on("got_instance",this.getInstance),_.on("set_instance",this.setInstance)}},{key:"componentWillUnmount",value:function(){_.removeListener("got_instance",this.getInstance),_.removeListener("set_instance",this.setInstance)}},{key:"componentDidMount",value:function(){this.loadData()}},{key:"pageAfterIn",value:function(){this.loadPalette()}},{key:"loadPalette",value:function(){var e=this;e.$f7.colorPicker.create({inputEl:"#demo-color-picker-spectrum",targetEl:"#demo-color-picker-spectrum-value",targetElSetBackgroundColor:!0,modules:["sb-spectrum","hue-slider"],openIn:"popover",value:{hex:this.state.color},on:{closed:function(t){e.setState({color:t.value.hex})}}})}},{key:"submit",value:function(){x("statuses",{id:this.state.id,title:this.state.title,color:this.state.color,confirmed:this.state.isConfirmed},this.state.token)}},{key:"loadData",value:function(){o.a.instance.toast.show({text:q.receiving,closeTimeout:2e3,position:"top"}),this.$f7route.params.statusId&&N("statuses",this.$f7route.params.statusId,this.state.token)}},{key:"getInstance",value:function(){var e=this,t=_.getIntance(),a=_.getKlass();t&&"Status"===a&&this.setState({title:t.title,id:t.id,color:t.the_color,status:t,isConfirmed:t.confiremd,confirmable:t.confirmable},(function(){return e.loadPalette()})),console.log(t)}},{key:"handleChangeValue",value:function(e){this.setState(e)}},{key:"setInstance",value:function(){this.$f7router.navigate("/statuses/")}},{key:"render",value:function(){var e=this.state,t=e.status,a=e.title,n=e.color,s=e.isConfirmed,l=e.confirmable;return i.a.createElement(r.s,{onPageAfterIn:this.pageAfterIn.bind(this)},i.a.createElement(r.r,{title:q.status_form,backLink:q.back}),i.a.createElement(r.d,null,q.status_form),i.a.createElement(je,{status:t,title:a,color:n,isConfirmed:s,submit:this.submit,editing:!0,handleChange:this.handleChangeValue,confirmable:l}))}}]),t}(n.Component),Se=function(e){if(e.involvements){var t=function(e,t){var a=!1;return t.role==e&&(a=!0),i.a.createElement("option",{value:e,selected:a},q[e])},a=function(a){if(e.removeProfile)return i.a.createElement("div",{className:"inline"},function(t){if("Creator"!==t.role&&e.editable)return i.a.createElement(r.n,{className:"mt-4",onClick:function(){return e.removeProfile(t.profile.id)}},q.remove)}(a),i.a.createElement("a",{className:" fs-10 smart-select smart-select-init","data-open-in":"popover"},function(a){if(e.editable)return i.a.createElement("select",{name:"role",onChange:function(t){e.changeRole(a.profile.id,t.target.value)}},t("Admin",a),t("Confirmer",a),t("Colleague",a),t("Observer",a))}(a),i.a.createElement("div",{className:"item-content"},i.a.createElement("div",{className:"item-inner bg-w-after"},i.a.createElement("div",{className:"item-title"},q.role),i.a.createElement("div",{className:"item-after mt-2"},q[a.role])))))};return i.a.createElement(r.o,{className:"fs-11"},e.involvements.map((function(e){return i.a.createElement(r.q,{key:e.profile.id,title:e.profile.fullname,after:a(e)},i.a.createElement("img",{slot:"media",src:e.profile.avatar,width:"27",height:"27"}))})))}return i.a.createElement("ul",null)},Ne=function(e){if(e.profiles){var t=function(t){return e.addProfile?i.a.createElement(r.n,{onClick:function(){return e.addProfile(t.id)}},q.add):e.removeProfile?i.a.createElement(r.n,{onClick:function(){return e.removeProfile(t.id)}},q.remove):void 0};return i.a.createElement(r.o,null,e.profiles.map((function(e){return i.a.createElement(r.q,{title:e.fullname,subtitle:"...",after:t(e)},i.a.createElement("img",{slot:"media",src:e.avatar,width:"27",height:"27"}))})))}return i.a.createElement("ul",null)},Le=function(e){return e.task?i.a.createElement(r.f,null,i.a.createElement(r.i,null,q.coworkers),i.a.createElement(r.g,{className:"mh-90"},i.a.createElement(r.o,null,i.a.createElement(Se,{involvements:e.task.the_involvements,removeProfile:e.removeProfile,changeRole:e.changeRole,editable:e.editable}))),i.a.createElement(r.h,null,function(){if(e.editable)return i.a.createElement(r.o,{accordionList:!0,className:"w-100"},i.a.createElement(r.q,{accordionItem:!0,className:"fs-10",title:"+ "+q.add},i.a.createElement(r.a,null,i.a.createElement(r.o,{simpleList:!0},e.task.groups.map((function(t){return i.a.createElement(r.q,null,i.a.createElement("span",null,t.title),i.a.createElement(r.A,{onChange:function(a){return e.addGroup(a,t.id)}}))}))),i.a.createElement(r.o,null,i.a.createElement(r.p,{outline:!0,label:q.search,floatingLabel:!0,type:"text",placeholder:"",clearButton:!0,onInput:function(t){e.searchProfile({query:t.target.value})}})),i.a.createElement(Ne,{profiles:e.profiles,addProfile:e.addProfile}))))}())):i.a.createElement("ul",null)},Te=function(e){if(e.statuses){var t=function(t){if(e.addStatus)return i.a.createElement(r.n,{onClick:function(){return e.addStatus(t.id)}},q.select)};return i.a.createElement(r.o,null,e.statuses.map((function(e){return i.a.createElement(r.q,{title:i.a.createElement("div",{className:"chip"},i.a.createElement("div",{className:"chip-media",style:{backgroundColor:e.the_color}},i.a.createElement("i",{className:"icon f7-icons if-not-md"},"plus_circle"),i.a.createElement("i",{className:"icon material-icons md-only"})),i.a.createElement("div",{className:"chip-label"},e.title)),after:t(e)})})))}return i.a.createElement("ul",null)},xe=function(e){return e.task?i.a.createElement(r.o,{accordionList:!0,className:"w-100"},i.a.createElement(r.q,{accordionItem:!0,className:"fs-10",title:(t=e.task.status,t?i.a.createElement("div",null,i.a.createElement("div",{className:"chip"},i.a.createElement("div",{className:"chip-media",style:{backgroundColor:t.color}},i.a.createElement("i",{className:"icon f7-icons if-not-md"},"plus_circle"),i.a.createElement("i",{className:"icon material-icons md-only"})),i.a.createElement("div",{className:"chip-label"},t.title))):i.a.createElement("div",null,q.add_stauts))},function(){if(e.editable)return i.a.createElement(r.a,null,i.a.createElement(r.o,null,i.a.createElement(r.p,{outline:!0,label:q.search,floatingLabel:!0,type:"text",placeholder:"",clearButton:!0,onInput:function(t){e.searchStatus({query:t.target.value})}})),i.a.createElement(Te,{statuses:e.statuses,addStatus:e.addStatus}))}())):i.a.createElement("ul",null);var t},De=function(e){function t(e){var t=[];return e.deadline_alert&&t.push(i.a.createElement("span",{className:"color-red ml-5"},i.a.createElement("i",{class:"fa fa-bell-o","aria-hidden":"true"}))),e.comment_alert&&t.push(i.a.createElement("span",{className:"color-green ml-5"},i.a.createElement("i",{class:"fa fa-comments-o ","aria-hidden":"true"}))),e.report_alert&&t.push(i.a.createElement("span",{className:"color-blue ml-5"},i.a.createElement("i",{class:"fa fa-file-text-o ","aria-hidden":"true"}))),e.status?t.push(i.a.createElement("div",{className:"chip",key:"work-status-chip"+e.id},i.a.createElement("div",{className:"chip-media",style:{backgroundColor:e.status.color}},i.a.createElement("i",{className:"icon f7-icons if-not-md"},"plus_circle"),i.a.createElement("i",{className:"icon material-icons md-only"})),i.a.createElement("div",{className:"chip-label"},e.status.title))):t.push(i.a.createElement("span",{className:"mr-5"},q.add_stauts)),t}function a(e){return i.a.createElement("span",null,e.title)}function n(e){var t=[];return"high"===e.priority&&t.push(i.a.createElement("span",{className:"va-2 fs-8 bg-yellow ml-10"},q[e.priority])),"urgent"===e.priority&&t.push(i.a.createElement("span",{className:"va-2 fs-8 bg-orange ml-10"},q[e.priority])),t.push(i.a.createElement("span",{className:"pd-5"},e.details)),t}return e.task?i.a.createElement(r.f,null,i.a.createElement(r.i,null,q.works,function(){if(e.editable)return i.a.createElement(r.n,{href:"/works/new/"+e.task.id},i.a.createElement("i",{className:"ml-5 fa fa-plus"})," ",q.new)}()),i.a.createElement(r.g,null,i.a.createElement(r.o,{mediaList:!0},e.works.map((function(e){return i.a.createElement(r.q,{key:"work"+e.id,className:"fs-11 work-media",link:"/works/"+e.id,title:a(e),after:t(e),text:n(e)})})))),i.a.createElement(r.h,null,i.a.createElement(r.v,{className:"p-static fs-10",disableButtonText:q.cancel,placeholder:q.search,inline:!0,onChange:function(t){return e.searchWork(t.target.value)}}))):i.a.createElement("ul",null)},Ae=function(e){if(e.task){var t=function(e){var t=new Date(new window.ODate(e));return i.a.createElement(F.a,{date:t,fromNow:!0})};return i.a.createElement(r.f,null,i.a.createElement(r.i,null,q.reports,function(){if(e.editable)return i.a.createElement(r.n,{href:"/reports/new/tasks/"+e.task.id},i.a.createElement("i",{className:"ml-5 fa fa-plus"})," ",q.new)}()),i.a.createElement(r.g,null,i.a.createElement(r.o,{mediaList:!0},e.reports.map((function(e){return i.a.createElement(r.q,{key:"report"+e.id,className:"fs-11 work-media",link:"/reports/"+e.id,title:e.title,after:t(e.creation_date),text:e.content})})))),i.a.createElement(r.h,null,i.a.createElement(r.v,{className:"p-static fs-10",disableButtonText:q.cancel,placeholder:q.search,inline:!0,onChange:function(t){return e.searchReport(t.target.value)}})))}return i.a.createElement("ul",null)},$e=(a(312),function(e){return i.a.createElement(r.f,null,i.a.createElement(r.i,null,q.comment_form," ",function(){if(e.replyTo){var t="";return e.comments.map((function(a){a.id===e.replyTo&&(t=a.content)})),i.a.createElement(r.j,{text:q.in_reply_to+": "+t.substring(0,20),deleteable:!0,onClick:e.removeReply})}}()),i.a.createElement(r.o,null,i.a.createElement(r.p,{label:q.comment,inputId:"cm-form-"+e.rnd,type:"textarea",placeholder:"...",maxlength:"300",resizable:!0,clearButton:!0,onInput:function(t){e.handleChange({commentContent:t.target.value})}})),i.a.createElement(r.h,null,i.a.createElement(r.n,null),i.a.createElement(r.n,{className:"btn-notice"}),i.a.createElement(r.e,{className:"col btn",fill:!0,onClick:e.submit},q.submit)))}),Me=function(e){var t=[];function a(t){var a=[];return t.editable&&a.push(i.a.createElement(r.n,{onClick:function(){return e.deleteCommentConfirm(t.id)}},i.a.createElement("i",{className:"va ml-5 fa fa-trash"}))),a.push(i.a.createElement(r.n,{onClick:function(){return e.replyToComment(t.id)}},i.a.createElement("i",{className:"va ml-5 fa fa-reply"}))),a}function n(e){var t=[i.a.createElement("span",null,e.profile.fullname,": ")];return e.reply_to&&t.push(i.a.createElement("span",{className:"fs-10 f-color-gray"},q.in_reply_to," ",e.reply_to)),t}if(e.comments){for(var s=0;s<e.comments.length;s++){var l=new Date(new window.ODate(e.comments[s].created_at)),o=i.a.createElement(i.a.Fragment,null,a(e.comments[s]),i.a.createElement(F.a,{locale:"fa",fromNow:!0,ago:!0},l),q.ago);t.push(i.a.createElement(r.q,{key:"comment"+e.comments[s].id,className:"fs-10",id:"cm-"+e.comments[s].id,text:o,title:n(e.comments[s]),subtitle:e.comments[s].content},i.a.createElement("img",{slot:"media",src:e.comments[s].profile.avatar,width:"44",height:"44"})))}return i.a.createElement(i.a.Fragment,null,i.a.createElement(r.d,null,q.comments),i.a.createElement(r.o,{mediaList:!0,inset:!0},t),i.a.createElement(r.u,{noGap:!0},i.a.createElement(r.k,null),i.a.createElement(r.k,{className:"center"},i.a.createElement("a",{className:"gray-color",onClick:function(){return e.loadMore()}},q.more)),i.a.createElement(r.k,null)),i.a.createElement(r.d,null))}return i.a.createElement(r.d,null)},We=function(e){if(e.task&&e.access){return i.a.createElement(i.a.Fragment,null,function t(a){if("statuses"===a){var n=!1;return e.access.includes("statuses")&&(n=!0),i.a.createElement(xe,{task:e.task,searchStatus:e.searchStatus,editable:n,statuses:e.statuses,addStatus:e.addStatus})}if("involvements"===a){n=!1;return e.access.includes("involvements")&&(n=!0),i.a.createElement(Le,{task:e.task,searchProfile:e.searchProfile,removeProfile:e.removeProfile,addProfile:e.addProfile,profiles:e.profiles,changeRole:e.changeRole,editable:n,addGroup:e.addGroup})}if("works"===a){n=!1;return e.access.includes("works")&&(n=!0),i.a.createElement(De,{task:e.task,works:e.works,editable:n,searchWork:e.searchWork})}if("reports"===a){n=!1;return e.access.includes("reports")&&(n=!0),i.a.createElement(Ae,{task:e.task,reports:e.reports,editable:n,searchReport:e.searchReport})}return"comments"===a&&e.access.includes("comments")?i.a.createElement($e,{model:e.task,submit:e.submitComment,handleChange:e.handleChange,replyTo:e.replyTo,comments:e.comments,removeReply:e.removeReply,rnd:e.rnd}):"edit"===a&&e.access.includes("edit")?i.a.createElement(r.n,{href:"/tasks/"+e.task.id+"/edit"},i.a.createElement("i",{className:"ml-5 fa fa-cog"})):"view"===a&&e.access.includes("view")?i.a.createElement(i.a.Fragment,null,function(){if(e.task.archived)return i.a.createElement(r.u,null,i.a.createElement(r.k,{width:"100",tabletWidth:"100"},i.a.createElement(r.f,{className:"fs-11 card-orange"},i.a.createElement(r.g,null,i.a.createElement("i",{class:"ml-2 fa fa-exclamation-triangle","aria-hidden":"true"}),q.archived," ",i.a.createElement("br",null),e.task.archive_note))))}(),i.a.createElement(r.u,null,i.a.createElement(r.k,{width:"100",tabletWidth:"50"},i.a.createElement(r.f,null,i.a.createElement(r.i,null,e.task.title,t("edit")),i.a.createElement(r.g,null,i.a.createElement(r.o,{"simple-list":!0},i.a.createElement(r.q,{className:"fs-11",title:""},function(){var t=[];return e.task.the_tags.map((function(e){return t.push(i.a.createElement(r.j,{key:"task-tag"+e.id,text:e.title}))})),t}()),i.a.createElement(r.q,{className:"fs-11",title:""},e.task.is_public?q.public:q.private),i.a.createElement(r.q,{className:"fs-11",title:""},e.task.details))),i.a.createElement(r.h,null,t("statuses")))),i.a.createElement(r.k,{width:"100",tabletWidth:"50"},t("involvements"))),i.a.createElement(r.u,null,i.a.createElement(r.k,{width:"100",tabletWidth:"100"},t("works"))),i.a.createElement(r.u,null,i.a.createElement(r.k,{width:"100",tabletWidth:"100"},t("reports"))),i.a.createElement(r.d,null,q.discussions),t("comments"),i.a.createElement(Me,{comments:e.comments,deleteCommentConfirm:e.deleteCommentConfirm,loadMore:e.loadMore,replyToComment:e.replyToComment})):void 0}("view"))}return null},Ve=function(e){function t(){var e;return Object(d.a)(this,t),(e=Object(f.a)(this,Object(p.a)(t).call(this))).getInstance=e.getInstance.bind(Object(g.a)(e)),e.getList=e.getList.bind(Object(g.a)(e)),e.submit=e.submit.bind(Object(g.a)(e)),e.handleChangeValue=e.handleChangeValue.bind(Object(g.a)(e)),e.removeTask=e.removeTask.bind(Object(g.a)(e)),e.searchProfile=e.searchProfile.bind(Object(g.a)(e)),e.addProfile=e.addProfile.bind(Object(g.a)(e)),e.removeProfile=e.removeProfile.bind(Object(g.a)(e)),e.searchStatus=e.searchStatus.bind(Object(g.a)(e)),e.addStatus=e.addStatus.bind(Object(g.a)(e)),e.deleteComment=e.deleteComment.bind(Object(g.a)(e)),e.submitComment=e.submitComment.bind(Object(g.a)(e)),e.loadMore=e.loadMore.bind(Object(g.a)(e)),e.changeRole=e.changeRole.bind(Object(g.a)(e)),e.deleteCommentConfirm=e.deleteCommentConfirm.bind(Object(g.a)(e)),e.addGroup=e.addGroup.bind(Object(g.a)(e)),e.replyToComment=e.replyToComment.bind(Object(g.a)(e)),e.removeReply=e.removeReply.bind(Object(g.a)(e)),e.searchReport=e.searchReport.bind(Object(g.a)(e)),e.searchWork=e.searchWork.bind(Object(g.a)(e)),e.state={token:window.localStorage.getItem("token"),task:null,id:null,users:null,assignedUsers:null,user_id:null,abilityTitle:"",abilityValue:!0,ability:null,comments:null,works:null,query:null,profiles:[],statuses:[],access:[],commentContent:"",replyTo:null,reportQuery:null,reports:null,rnd:V.a.lib.WordArray.random(32)},e}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentWillMount",value:function(){_.on("got_instance",this.getInstance),_.on("set_instance",this.getInstance),_.on("got_list",this.getList),_.on("deleted_instance",this.getInstance)}},{key:"componentWillUnmount",value:function(){_.removeListener("got_instance",this.getInstance),_.removeListener("set_instance",this.getInstance),_.removeListener("got_list",this.getList),_.removeListener("deleted_instance",this.getInstance)}},{key:"componentDidMount",value:function(){N("tasks",this.$f7route.params.taskId,this.state.token)}},{key:"getInstance",value:function(){var e=_.getIntance(),t=_.getKlass();e&&"Task"===t&&this.setState({task:e,id:e.id,assignedUsers:e.users,works:e.works,reports:e.reports,comments:e.the_comments,access:e.user_access,replyTo:null,reportQuery:null}),this.$$("#cm-form-"+this.state.rnd).val("")}},{key:"loadMore",value:function(){var e=this;this.setState({page:this.state.page+1},(function(){N("tasks",e.$f7route.params.taskId,e.state.token,e.state.page)}))}},{key:"getList",value:function(){var e=_.getList(),t=_.getKlass();e&&"User"===t&&this.setState({users:e}),e&&"Profile"===t&&this.setState({profiles:e}),e&&"Status"===t&&this.setState({statuses:e}),e&&"Report"===t&&this.setState({reports:e}),e&&"Work"===t&&this.setState({works:e})}},{key:"submit",value:function(){this.$$(".btn").hide(),this.$$(".btn-notice").text(q.submitting),T("users/assignments",{task_id:this.state.id,user_id:this.state.user_id},this.state.token)}},{key:"searchProfile",value:function(e){var t=this;this.setState({profiles:[]}),this.setState(e,(function(){w("profiles/search",t.state.page,{q:t.state.query})}))}},{key:"searchStatus",value:function(e){var t=this;this.setState({statuses:[]}),this.setState(e,(function(){w("statuses/search",t.state.page,{q:t.state.query})}))}},{key:"addProfile",value:function(e){T("tasks/involvements",{id:this.state.id,profile_id:e},this.state.token)}},{key:"addStatus",value:function(e){T("tasks/status",{id:this.state.id,status_id:e},this.state.token)}},{key:"removeProfile",value:function(e){L("tasks/involvements",{id:this.state.id,profile_id:e},this.state.token)}},{key:"changeRole",value:function(e,t){T("tasks/change_role",{id:this.state.id,profile_id:e,role:t},this.state.token)}},{key:"submitComment",value:function(){T("comments",{commentable_type:"Task",commentable_id:this.state.id,content:this.state.commentContent,reply_id:this.state.replyTo},this.state.token)}},{key:"deleteCommentConfirm",value:function(e){var t=this;t.$f7.dialog.confirm(q.are_you_sure,q.alert,(function(){return t.deleteComment(e)}))}},{key:"deleteComment",value:function(e){L("comments",{id:e},this.state.token,this.state.page)}},{key:"searchReport",value:function(e){w("reports/search",this.state.page,{task_id:this.state.id,q:e},this.state.token)}},{key:"searchWork",value:function(e){w("works/search",this.state.page,{task_id:this.state.id,q:e},this.state.token)}},{key:"handleChangeValue",value:function(e){this.setState(e)}},{key:"fab",value:function(){if(this.state.task)return i.a.createElement(r.l,{href:"/tasks/"+this.state.task.id+"/edit",target:"#main-view",position:"left-bottom",slot:"fixed",color:"lime"},i.a.createElement(r.m,{ios:"f7:edit",aurora:"f7:edit",md:"material:edit"}),i.a.createElement(r.m,{ios:"f7:close",aurora:"f7:close",md:"material:close"}))}},{key:"removeTask",value:function(e){L("users/assignments",{user_id:e,task_id:this.state.id},this.state.token)}},{key:"addGroup",value:function(e,t){var a={id:this.state.id,group_id:t};e.target.checked?T("tasks/group_involvements",a,this.state.token):L("tasks/group_involvements",a,this.state.token)}},{key:"replyToComment",value:function(e){this.setState({replyTo:e}),this.$$("#cm-form-"+this.state.rnd).focus()}},{key:"removeReply",value:function(){this.setState({replyTo:null})}},{key:"render",value:function(){var e=this.state,t=e.task,a=e.users,n=e.assignedUsers,s=e.ability,l=e.profiles,o=e.statuses,c=e.works,u=e.commentContent,m=e.comments,d=e.access,h=e.replyTo,f=e.rnd,p=e.reports;return i.a.createElement(r.s,null,i.a.createElement(r.r,{title:q.tasks,backLink:q.back,backLinkForce:!0},i.a.createElement(r.n,{panelOpen:"right"},i.a.createElement(r.m,{f7:"bars"}))),i.a.createElement(We,{task:t,users:a,ability:s,profiles:l,statuses:o,removeProfile:this.removeProfile,addProfile:this.addProfile,searchProfile:this.searchProfile,removeAbility:this.removeAbility,assignedUsers:n,addAbility:this.addAbility,removeTask:this.removeTask,submit:this.submit,handleChange:this.handleChangeValue,searchStatus:this.searchStatus,addStatus:this.addStatus,works:c,submitComment:this.submitComment,deleteCommentConfirm:this.deleteCommentConfirm,commentContent:u,comments:m,loadMore:this.loadMore,changeRole:this.changeRole,access:d,addGroup:this.addGroup,replyToComment:this.replyToComment,replyTo:h,removeReply:this.removeReply,rnd:f,searchReport:this.searchReport,reports:p,searchWork:this.searchWork}))}}]),t}(n.Component),Re=function(e){return i.a.createElement(r.s,null,i.a.createElement(r.r,{title:q.tasks},i.a.createElement(r.n,{panelOpen:"right"},i.a.createElement(r.m,{f7:"bars"}))),i.a.createElement(r.d,null,q.list),function(t){if(e.ability){var a=[];e.ability.map((function(e){e.title===t&&e.value&&a.push(i.a.createElement(r.l,{href:"/tasks/new",target:"#main-view",position:"left-bottom",slot:"fixed",color:"deeporange"},i.a.createElement(r.m,{ios:"f7:add",aurora:"f7:add",md:"material:add"}),i.a.createElement(r.m,{ios:"f7:close",aurora:"f7:close",md:"material:close"})))}))}return a}("create_task"),i.a.createElement(r.u,null,i.a.createElement(r.k,{width:"100",tabletWidth:"50"},i.a.createElement(r.f,null,i.a.createElement(U,{tasks:e.tasks,header:q.your_tasks,sortChange:e.sortChange}))),i.a.createElement(r.k,{width:"100",tabletWidth:"50"},i.a.createElement(r.f,null,i.a.createElement(B,{works:e.works,header:q.your_newest_works,sortChange:e.sortChange})))))},qe=function(e){function t(){var e;return Object(d.a)(this,t),(e=Object(f.a)(this,Object(p.a)(t).call(this))).getList=e.getList.bind(Object(g.a)(e)),e.sortChange=e.sortChange.bind(Object(g.a)(e)),e.state={token:window.localStorage.getItem("token"),tasks:null,works:null,ability:null},e}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentWillMount",value:function(){_.on("got_list",this.getList)}},{key:"componentWillUnmount",value:function(){_.removeListener("got_list",this.getList)}},{key:"componentDidMount",value:function(){this.loadData()}},{key:"sortChange",value:function(e){w("tasks",this.state.page,{order:e.title},this.state.token)}},{key:"loadData",value:function(){o.a.instance.toast.show({text:q.receiving,closeTimeout:2e3,position:"top"}),w("tasks",this.state.page,{},this.state.token),w("works",this.state.page,{},this.state.token)}},{key:"getList",value:function(){var e=_.getList(),t=_.getKlass();e&&"Task"===t&&this.setState({tasks:e,ability:e[0].ability}),e&&"Work"===t&&this.setState({works:e})}},{key:"render",value:function(){var e=this.state,t=e.tasks,a=e.works,n=e.ability;return i.a.createElement(Re,{tasks:t,ability:n,works:a,sortChange:this.sortChange})}}]),t}(i.a.Component),Pe=function(e){if(e.isPublic)var t=!0;else t=!1;return i.a.createElement(r.f,null,i.a.createElement(r.d,null,q.task),i.a.createElement(r.o,null,i.a.createElement(r.p,{label:q.title,type:"text",placeholder:q.select_appropriate_title,defaultValue:e.task.title,required:!0,onInput:function(t){e.handleChange({title:t.target.value})}}),i.a.createElement(r.p,{label:q.details,type:"textarea",placeholder:q.write_appropriate_description,value:e.details,onInput:function(t){e.handleChange({details:t.target.value})}}),i.a.createElement(r.q,{radio:!0,value:!1,checked:!t,name:"selectedMode",title:q.private,onChange:function(t){console.log(t),e.handleChange({isPublic:JSON.parse(t.target.value)})}}),i.a.createElement(r.q,{radio:!0,value:!0,checked:t,name:"selectedMode",title:q.public,onChange:function(t){console.log(t),e.handleChange({isPublic:JSON.parse(t.target.value)})}}),i.a.createElement(r.q,{title:function(){if(e.tags){var t=[i.a.createElement("div",null,i.a.createElement("a",{className:"fs-11 ",href:"#",id:"autocomplete-standalone-ajax"},i.a.createElement("div",{className:"item-title fs-11"},i.a.createElement("i",{className:"va-minus-2 ml-5 fa fa-plus"}),q.tags,":")))];return e.tags.map((function(a){return t.push(i.a.createElement(r.j,{text:a.title,deleteable:!0,onClick:function(){return e.removeTag(a.id)}}))})),t}}()})),function(){if(e.editing)return i.a.createElement(r.o,null,i.a.createElement(r.q,{checkbox:!0,value:e.archived,checked:e.archived,title:q.archived,onChange:function(t){e.handleChange({archived:!JSON.parse(t.target.value)})}}),i.a.createElement(r.p,{label:q.archive_note,type:"textarea",placeholder:q.write_archive_note,value:e.archiveNote,onInput:function(t){e.handleChange({archiveNote:t.target.value})}}))}(),i.a.createElement(r.c,{strong:!0},i.a.createElement(r.u,{tag:"p"},function(){if(e.editing)return i.a.createElement(r.k,null,i.a.createElement(r.e,{className:"col btn ml-5",outline:!0,color:"red",disabled:!e.editing,onClick:function(){return e.deleteTaskConfirm()}},q.delete))}(),i.a.createElement(r.k,null,i.a.createElement(r.n,{className:"btn-notice"}),i.a.createElement(r.e,{className:"col btn",fill:!0,onClick:e.submit},q.submit)))))},Fe=function(e){function t(){var e;return Object(d.a)(this,t),(e=Object(f.a)(this,Object(p.a)(t).call(this))).submit=e.submit.bind(Object(g.a)(e)),e.setInstance=e.setInstance.bind(Object(g.a)(e)),e.handleChangeValue=e.handleChangeValue.bind(Object(g.a)(e)),e.loadTags=e.loadTags.bind(Object(g.a)(e)),e.pageAfterIn=e.pageAfterIn.bind(Object(g.a)(e)),e.removeTag=e.removeTag.bind(Object(g.a)(e)),e.state={token:window.localStorage.getItem("token"),task:{},title:null,details:null,deadline:new Date,start:new Date,startTime:"0:00",deadlineTime:"0:00",privateTask:!0,tags:[],isPublic:!1},e}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentWillMount",value:function(){_.on("set_instance",this.setInstance)}},{key:"componentWillUnmount",value:function(){_.removeListener("set_instance",this.setInstance)}},{key:"loadTags",value:function(){var e=this,t=e.$f7;t.autocomplete.create({openIn:"popup",openerEl:"#autocomplete-standalone-ajax",multiple:!0,valueProperty:"id",textProperty:"title",searchbarDisableText:q.cancel,popupCloseLinkText:q.close,notFoundText:q.not_found,limit:50,searchbarPlaceholder:q.search,preloader:!0,source:function(e,a){var n=this,i=[];0!==e.length?(n.preloaderShow(),t.request({url:O.server+"/tags/search",method:"GET",dataType:"json",data:{q:e},success:function(t){for(var s=0;s<t.data.length;s++)t.data[s].title.indexOf(e)>=0&&i.push(t.data[s]);n.preloaderHide(),a(i)}})):a(i)},on:{change:function(t){t&&t[t.length-1]&&e.setState({tags:e.state.tags.concat({title:t[t.length-1].title,id:t[t.length-1].id})})}}})}},{key:"pageAfterIn",value:function(){this.loadTags()}},{key:"submit",value:function(){this.$$(".btn").hide(),this.$$(".btn-notice").text(q.submitting);var e={title:this.state.title,public:this.state.isPublic,details:this.state.details,tags:this.state.tags};if(this.state.title&&this.state.title.length>0)T("tasks",e,this.state.token);else{this.$f7.dialog.alert(q.incomplete_data,q.alert)}}},{key:"removeTag",value:function(e){this.setState({tags:this.state.tags.filter((function(t){return t.id!==e}))})}},{key:"handleChangeValue",value:function(e){this.setState(e)}},{key:"setInstance",value:function(){this.$$(".btn").show(),this.$f7router.navigate("/tasks/")}},{key:"render",value:function(){var e=this.state,t=e.task,a=e.tags,n=e.isPublic;return i.a.createElement(r.s,{onPageAfterIn:this.pageAfterIn.bind(this),backLink:q.back,backLinkForce:!0},i.a.createElement(r.r,{title:q.task_form,backLink:q.back}),i.a.createElement(r.d,null,q.task_form),i.a.createElement(Pe,{task:t,removeTag:this.removeTag,tags:a,isPublic:n,submit:this.submit,editing:!1,handleChange:this.handleChangeValue}))}}]),t}(n.Component),Ue=function(e){function t(){var e,a;return Object(d.a)(this,t),(a=Object(f.a)(this,Object(p.a)(t).call(this))).submit=a.submit.bind(Object(g.a)(a)),a.setInstance=a.setInstance.bind(Object(g.a)(a)),a.getInstance=a.getInstance.bind(Object(g.a)(a)),a.handleChangeValue=a.handleChangeValue.bind(Object(g.a)(a)),a.pageAfterIn=a.pageAfterIn.bind(Object(g.a)(a)),a.loadTags=a.loadTags.bind(Object(g.a)(a)),a.removeTag=a.removeTag.bind(Object(g.a)(a)),a.deleteTaskConfirm=a.deleteTaskConfirm.bind(Object(g.a)(a)),a.deleteTask=a.deleteTask.bind(Object(g.a)(a)),a.deleteInstance=a.deleteInstance.bind(Object(g.a)(a)),a.state=(e={token:window.localStorage.getItem("token"),task:{},id:null,title:null,details:null,privateTask:!0},Object(R.a)(e,"details",null),Object(R.a)(e,"tags",[]),Object(R.a)(e,"isPublic",!1),Object(R.a)(e,"selectedMode",!1),Object(R.a)(e,"archived",!1),Object(R.a)(e,"archiveNote",null),e),a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentWillMount",value:function(){_.on("got_instance",this.getInstance),_.on("set_instance",this.setInstance),_.on("deleted_instance",this.deleteInstance)}},{key:"componentWillUnmount",value:function(){_.removeListener("got_instance",this.getInstance),_.removeListener("set_instance",this.setInstance),_.removeListener("deleted_instance",this.deleteInstance)}},{key:"pageAfterIn",value:function(){this.loadTags()}},{key:"loadTags",value:function(){var e=this,t=e.$f7;t.autocomplete.create({openIn:"popup",openerEl:"#autocomplete-standalone-ajax",multiple:!0,valueProperty:"id",textProperty:"title",limit:50,searchbarPlaceholder:q.search,searchbarDisableText:q.cancel,popupCloseLinkText:q.close,notFoundText:q.not_found,preloader:!0,source:function(e,a){var n=this,i=[];0!==e.length?(n.preloaderShow(),t.request({url:O.server+"/tags/search",method:"GET",dataType:"json",data:{q:e},success:function(t){for(var s=0;s<t.data.length;s++)t.data[s].title.indexOf(e)>=0&&i.push(t.data[s]);n.preloaderHide(),a(i)}})):a(i)},on:{change:function(t){t&&t[t.length-1]&&e.setState({tags:e.state.tags.concat({title:t[t.length-1].title,id:t[t.length-1].id})})}}})}},{key:"submit",value:function(){this.$$(".btn").hide(),this.$$(".btn-notice").text(q.submitting);var e={id:this.state.id,title:this.state.title,public:this.state.isPublic,details:this.state.details,tags:this.state.tags,archive_note:this.state.archiveNote,archived:this.state.archived};if(this.state.title&&this.state.title.length>0)x("tasks",e,this.state.token);else{this.$f7.dialog.alert(q.incomplete_data,q.alert)}}},{key:"componentDidMount",value:function(){this.loadData()}},{key:"loadData",value:function(){o.a.instance.toast.show({text:q.receiving,closeTimeout:2e3,position:"top"}),this.$f7route.params.taskId&&N("tasks",this.$f7route.params.taskId,this.state.token)}},{key:"getInstance",value:function(){var e=this,t=_.getIntance(),a=_.getKlass();t&&"Task"===a&&this.setState({title:t.title,details:t.details,id:t.id,task:t,defaultTask:t.default_task,tags:t.the_tags,isPublic:t.is_public,archived:t.archived,archiveNote:t.archive_note},(function(){return e.loadTags()}))}},{key:"removeTag",value:function(e){this.setState({tags:this.state.tags.filter((function(t){return t.id!==e}))})}},{key:"handleChangeValue",value:function(e){console.log(e),this.setState(e)}},{key:"deleteTaskConfirm",value:function(){this.$f7.dialog.confirm(q.are_you_sure,q.alert,this.deleteTask)}},{key:"deleteTask",value:function(){L("tasks",{id:this.state.id},this.state.token)}},{key:"deleteInstance",value:function(){this.$f7router.navigate("/tasks/")}},{key:"setInstance",value:function(){var e=_.getIntance(),t=_.getKlass();e&&"Task"===t&&(this.$$(".btn").show(),this.$f7router.navigate("/tasks/"+e.id))}},{key:"render",value:function(){var e=this.state,t=e.task,a=e.defaultTask,n=e.title,s=e.details,l=e.isPublic,o=e.tags,c=e.selectedMode,u=e.archived,m=e.archiveNote;return i.a.createElement(r.s,{onPageAfterIn:this.pageAfterIn.bind(this),backLink:q.back,backLinkForce:!0},i.a.createElement(r.r,{title:q.task_form,backLink:q.back}),i.a.createElement(r.d,null,q.task_form),i.a.createElement(Pe,{task:t,title:n,isPublic:l,tags:o,removeTag:this.removeTag,selectedMode:c,details:s,defaultTask:a,submit:this.submit,editing:!0,handleChange:this.handleChangeValue,deleteTaskConfirm:this.deleteTaskConfirm,archived:u,archiveNote:m}))}}]),t}(n.Component),Be=function(e){if(e.involvements){var t=function(e,t){var a=!1;return t.role==e&&(a=!0),i.a.createElement("option",{value:e,selected:a},q[e])},a=function(a){if(e.removeProfile)return i.a.createElement("div",{className:"inline"},function(t){if("Creator"!==t.role&&e.editable)return i.a.createElement(r.n,{className:"mt-4",onClick:function(){return e.removeProfile(t.profile.id)}},q.remove)}(a),i.a.createElement("a",{className:" fs-10 smart-select smart-select-init","data-open-in":"popover"},function(a){if("Creator"!==a.role&&e.editable)return i.a.createElement("select",{name:"role",onChange:function(t){e.changeRole(a.profile.id,t.target.value)}},t("Admin",a),t("Confirmer",a),t("Colleague",a),t("Observer",a))}(a),i.a.createElement("div",{className:"item-content"},i.a.createElement("div",{className:"item-inner bg-w-after"},i.a.createElement("div",{className:"item-title"},q.role),i.a.createElement("div",{className:"item-after mt-2"},q[a.role])))))};return i.a.createElement(r.o,{className:"fs-11"},e.involvements.map((function(e){return i.a.createElement(r.q,{key:"involvement"+e.profile.id,title:e.profile.fullname,after:a(e)},i.a.createElement("img",{slot:"media",src:e.profile.avatar,width:"27",height:"27"}))})))}return i.a.createElement("ul",null)},Ke=function(e){return e.work?i.a.createElement(r.f,null,i.a.createElement(r.i,null,q.coworkers),i.a.createElement(r.g,{className:"mh-90"},i.a.createElement(r.o,null,i.a.createElement(Be,{involvements:e.work.the_involvements,removeProfile:e.removeProfile,changeRole:e.changeRole,editable:e.editable}))),i.a.createElement(r.h,null,function(){if(e.editable)return i.a.createElement(r.o,{accordionList:!0,className:"w-100"},i.a.createElement(r.q,{accordionItem:!0,className:"fs-10",title:"+ "+q.add},i.a.createElement(r.a,null,i.a.createElement(r.o,null,i.a.createElement(r.p,{outline:!0,label:q.search,floatingLabel:!0,type:"text",placeholder:"",clearButton:!0,onInput:function(t){e.searchProfile({query:t.target.value})}})),i.a.createElement(Ne,{profiles:e.profiles,addProfile:e.addProfile}))))}())):i.a.createElement("ul",null)},Ge=function(e){return e.work?i.a.createElement(r.o,{accordionList:!0,className:"w-100"},i.a.createElement(r.q,{accordionItem:!0,className:"fs-10",key:"status"+e.work.id,title:(t=e.work.status,t?i.a.createElement("div",null,i.a.createElement("div",{className:"chip"},i.a.createElement("div",{className:"chip-media",style:{backgroundColor:t.color}},i.a.createElement("i",{className:"icon f7-icons if-not-md"},"plus_circle"),i.a.createElement("i",{className:"icon material-icons md-only"})),i.a.createElement("div",{className:"chip-label"},t.title))):i.a.createElement("div",null,q.add_stauts))},function(){if(e.editable)return i.a.createElement(r.a,null,i.a.createElement(r.o,null,i.a.createElement(r.p,{outline:!0,label:q.search,floatingLabel:!0,type:"text",placeholder:"",clearButton:!0,onInput:function(t){e.searchStatus({query:t.target.value})}})),i.a.createElement(Te,{statuses:e.statuses,addStatus:e.addStatus}))}())):i.a.createElement("ul",null);var t},ze=function(e){if(e.work){var t=function(e){var t=new Date(new window.ODate(e));return i.a.createElement(F.a,{date:t,fromNow:!0})};return i.a.createElement(r.f,null,i.a.createElement(r.i,null,q.reports,function(){if(e.editable)return i.a.createElement(r.n,{href:"/reports/new/works/"+e.work.id},i.a.createElement("i",{className:"ml-5 fa fa-plus"})," ",q.new)}()),i.a.createElement(r.g,null,i.a.createElement(r.o,{mediaList:!0},e.reports.map((function(e){return i.a.createElement(r.q,{key:"report"+e.id,className:"fs-11 work-media",link:"/reports/"+e.id,title:e.title,after:t(e.creation_date),text:e.content})})))),i.a.createElement(r.h,null,i.a.createElement(r.v,{className:"p-static fs-10",disableButtonText:q.cancel,placeholder:q.search,inline:!0,onChange:function(t){return e.searchReport(t.target.value)}})))}return i.a.createElement("ul",null)},He=function(e){function t(e){return e.check?"of-scroll line-through ":"of-scroll"}return e.todos?i.a.createElement(r.o,{className:"fs-11 "},e.todos.map((function(a){return i.a.createElement("li",{className:t(a),key:"todo"+a.id},i.a.createElement("label",{className:"item-content item-checkbox"},i.a.createElement("input",{type:"checkbox",value:"",checked:a.check,onChange:function(t){return e.todoChecked(a.id,t)}}),i.a.createElement("i",{className:"icon icon-checkbox"}),i.a.createElement("div",{className:"item-inner of-scroll"},i.a.createElement("div",{className:"item-title of-visible mw-auto"},a.title),i.a.createElement("div",{className:"item-after"},i.a.createElement("span",null,function(t){var a=[];return t.involvements.map((function(e){return a.push(i.a.createElement(r.j,{key:"chip-"+t.id+"-"+e.profile.id,className:"ml-5",text:e.profile.fullname}))})),e.editable&&(a.push(i.a.createElement(r.n,{key:"todoEdit"+t.id,href:"/todos/"+t.id+"/edit"},i.a.createElement("i",{className:"ml-5 fa fa-edit"}))),a.push(i.a.createElement(r.n,{key:"todoDelete"+t.id,onClick:function(){return e.deleteTodoConfirm(t.id)}},i.a.createElement("i",{className:"ml-5 fa fa-trash"})))),a}(a))))))}))):i.a.createElement("ul",null)},Je=function(e){var t=function(t){var a=!1;return e.involvements.map((function(e){e.id===t.profile.id&&(a=!0)})),a};return i.a.createElement(r.o,null,i.a.createElement(r.p,{key:"todos-form-title",label:q.title,type:"text",placeholder:q.select_appropriate_title,defaultValue:e.title,required:!0,onInput:function(t){e.handleChange({title:t.target.value})}}),i.a.createElement(r.o,{className:"fs-11 "},e.workInvolvements.map((function(a){return i.a.createElement(r.q,{key:a.id,checkbox:!0,checked:t(a),onChange:function(t){return e.involvementCheck(a.profile.id,t)},title:a.profile.fullname,after:""})}))),i.a.createElement(r.c,{strong:!0},i.a.createElement(r.u,{tag:"p"},i.a.createElement(r.k,null,i.a.createElement(r.n,{className:"btn-notice"}),i.a.createElement(r.e,{className:"col btn",fill:!0,disabled:!e.editing,onClick:e.submit},q.submit)))))},Qe=function(e){if(e.work){return i.a.createElement(r.f,{className:"bg-gray"},i.a.createElement(r.i,null,q.todo_list,function(){if(e.editable)return i.a.createElement(r.n,{href:"/todos/new/"+e.work.id},i.a.createElement("i",{className:"ml-5 fa fa-plus"})," ",q.new)}()),i.a.createElement(r.g,null,i.a.createElement(r.o,null,i.a.createElement(He,{todos:e.todos,todoChecked:e.todoChecked,deleteTodoConfirm:e.deleteTodoConfirm,editable:e.editable}))),i.a.createElement(r.h,null))}return i.a.createElement("ul",null)},Ye=function(e){return e.work&&e.access?i.a.createElement(i.a.Fragment,null,function t(a){if("statuses"===a){var n=!1;return e.access.includes("statuses")&&(n=!0),i.a.createElement(Ge,{work:e.work,searchStatus:e.searchStatus,editable:n,statuses:e.statuses,addStatus:e.addStatus})}if("involvements"===a){n=!1;return e.access.includes("involvements")&&(n=!0),i.a.createElement(Ke,{work:e.work,searchProfile:e.searchProfile,removeProfile:e.removeProfile,addProfile:e.addProfile,profiles:e.profiles,changeRole:e.changeRole,editable:n})}if("todos"===a){n=!1;return e.access.includes("todos")&&(n=!0),i.a.createElement(Qe,{work:e.work,todos:e.todos,editable:n,todoChecked:e.todoChecked,deleteTodoConfirm:e.deleteTodoConfirm})}if("reports"===a){n=!1;return e.access.includes("reports")&&(n=!0),i.a.createElement(ze,{work:e.work,editable:n,reports:e.reports,searchReport:e.searchReport})}return"comments"===a&&e.access.includes("comments")?i.a.createElement($e,{model:e.work,submit:e.submitComment,handleChange:e.handleChange,replyTo:e.replyTo,comments:e.comments,removeReply:e.removeReply,rnd:e.rnd}):"edit"===a&&e.access.includes("edit")?i.a.createElement(r.n,{href:"/works/"+e.work.id+"/edit"},i.a.createElement("i",{className:"ml-5 fa fa-cog"})):"view"===a&&e.access.includes("view")?i.a.createElement(i.a.Fragment,null,function(){if(e.work.archived)return i.a.createElement(r.u,null,i.a.createElement(r.k,{width:"100",tabletWidth:"100"},i.a.createElement(r.f,{className:"fs-11 card-orange"},i.a.createElement(r.g,null,i.a.createElement("i",{class:"ml-2 fa fa-exclamation-triangle","aria-hidden":"true"}),q.archived," ",i.a.createElement("br",null),e.work.task.archive_note))))}(),i.a.createElement(r.u,null,i.a.createElement(r.k,{width:"100",tabletWidth:"50"},i.a.createElement(r.f,null,i.a.createElement(r.i,null,e.work.title,t("edit")),i.a.createElement(r.g,null,i.a.createElement(r.o,{"simple-list":!0},i.a.createElement(r.q,{className:"fs-11",title:q.task+": "+e.work.task.title,href:"/tasks/"+e.work.task.id}),i.a.createElement(r.q,{className:"fs-11",title:q.start_date+": "+e.work.start_date_j}),i.a.createElement(r.q,{className:"fs-11",title:q.deadline+": "+e.work.deadline_date_j}),i.a.createElement(r.q,{className:"fs-11",title:""})),i.a.createElement("span",{className:"fs-11"},e.work.details)),i.a.createElement(r.h,null,t("statuses")))),i.a.createElement(r.k,{width:"100",tabletWidth:"50"},t("involvements"))),i.a.createElement(r.u,null,i.a.createElement(r.k,{width:"100",tabletWidth:"100"},t("todos"))),i.a.createElement(r.u,null,i.a.createElement(r.k,{width:"100",tabletWidth:"100"},t("reports"))),t("comments"),i.a.createElement(Me,{comments:e.comments,deleteCommentConfirm:e.deleteCommentConfirm,replyToComment:e.replyToComment})):void 0}("view")):null},Xe=function(e){function t(){var e;return Object(d.a)(this,t),(e=Object(f.a)(this,Object(p.a)(t).call(this))).getInstance=e.getInstance.bind(Object(g.a)(e)),e.getList=e.getList.bind(Object(g.a)(e)),e.submit=e.submit.bind(Object(g.a)(e)),e.handleChangeValue=e.handleChangeValue.bind(Object(g.a)(e)),e.removeWork=e.removeWork.bind(Object(g.a)(e)),e.addAbility=e.addAbility.bind(Object(g.a)(e)),e.removeAbility=e.removeAbility.bind(Object(g.a)(e)),e.searchProfile=e.searchProfile.bind(Object(g.a)(e)),e.addProfile=e.addProfile.bind(Object(g.a)(e)),e.removeProfile=e.removeProfile.bind(Object(g.a)(e)),e.searchStatus=e.searchStatus.bind(Object(g.a)(e)),e.addStatus=e.addStatus.bind(Object(g.a)(e)),e.deleteComment=e.deleteComment.bind(Object(g.a)(e)),e.deleteCommentConfirm=e.deleteCommentConfirm.bind(Object(g.a)(e)),e.submitComment=e.submitComment.bind(Object(g.a)(e)),e.loadMore=e.loadMore.bind(Object(g.a)(e)),e.changeRole=e.changeRole.bind(Object(g.a)(e)),e.todoChecked=e.todoChecked.bind(Object(g.a)(e)),e.deleteTodoConfirm=e.deleteTodoConfirm.bind(Object(g.a)(e)),e.deleteTodo=e.deleteTodo.bind(Object(g.a)(e)),e.replyToComment=e.replyToComment.bind(Object(g.a)(e)),e.removeReply=e.removeReply.bind(Object(g.a)(e)),e.searchReport=e.searchReport.bind(Object(g.a)(e)),e.state={token:window.localStorage.getItem("token"),work:null,id:null,users:null,assignedUsers:null,user_id:null,abilityTitle:"",abilityValue:!0,ability:null,query:null,profiles:[],statuses:[],commentContent:"",access:null,comments:null,todos:[],replyTo:null,reports:null,rnd:V.a.lib.WordArray.random(32)},e}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentWillMount",value:function(){_.on("got_instance",this.getInstance),_.on("set_instance",this.getInstance),_.on("got_list",this.getList),_.on("deleted_instance",this.getInstance)}},{key:"componentWillUnmount",value:function(){_.removeListener("got_instance",this.getInstance),_.removeListener("set_instance",this.getInstance),_.removeListener("got_list",this.getList),_.removeListener("deleted_instance",this.getInstance)}},{key:"componentDidMount",value:function(){N("works",this.$f7route.params.workId,this.state.token)}},{key:"getInstance",value:function(){var e=_.getIntance(),t=_.getKlass();e&&"Work"===t&&this.setState({work:e,id:e.id,assignedUsers:e.users,reports:e.reports,comments:e.the_comments,access:e.user_access,todos:e.the_todos,replyTo:null}),this.$$(".btn").show(),this.$$("#cm-form-"+this.state.rnd).val("")}},{key:"getList",value:function(){var e=_.getList(),t=_.getKlass();e&&"User"===t&&this.setState({users:e}),e&&"Profile"===t&&this.setState({profiles:e}),e&&"Status"===t&&this.setState({statuses:e}),e&&"Report"===t&&this.setState({reports:e})}},{key:"submit",value:function(){this.$$(".btn").hide(),this.$$(".btn-notice").text(q.submitting),T("users/assignments",{work_id:this.state.id,user_id:this.state.user_id},this.state.token)}},{key:"searchProfile",value:function(e){var t=this;this.setState({profiles:[]}),this.setState(e,(function(){w("profiles/search",t.state.page,{q:t.state.query})}))}},{key:"searchStatus",value:function(e){var t=this;this.setState({statuses:[]}),this.setState(e,(function(){w("statuses/search",t.state.page,{q:t.state.query})}))}},{key:"addProfile",value:function(e){T("works/involvements",{id:this.state.id,profile_id:e},this.state.token)}},{key:"addStatus",value:function(e){T("works/status",{id:this.state.id,status_id:e},this.state.token)}},{key:"removeProfile",value:function(e){L("works/involvements",{id:this.state.id,profile_id:e},this.state.token)}},{key:"addAbility",value:function(){T("works/abilities",{id:this.state.id,ability_title:this.state.abilityTitle,ability_value:this.state.abilityValue},this.state.token)}},{key:"changeRole",value:function(e,t){T("works/change_role",{id:this.state.id,profile_id:e,role:t},this.state.token)}},{key:"loadMore",value:function(){var e=this;this.setState({page:this.state.page+1},(function(){N("works",e.$f7route.params.workId,e.state.token,e.state.page)}))}},{key:"submitComment",value:function(){T("comments",{commentable_type:"Work",commentable_id:this.state.id,content:this.state.commentContent,reply_id:this.state.replyTo},this.state.token)}},{key:"deleteCommentConfirm",value:function(e){var t=this;t.$f7.dialog.confirm(q.are_you_sure,q.alert,(function(){return t.deleteComment(e)}))}},{key:"deleteComment",value:function(e){L("comments",{id:e},this.state.token,this.state.page)}},{key:"handleChangeValue",value:function(e){this.setState(e)}},{key:"todoChecked",value:function(e,t){T("todos/check_todo",{id:e,is_done:t.target.checked},this.state.token)}},{key:"fab",value:function(){if(this.state.work)return i.a.createElement(r.l,{href:"/works/"+this.state.work.id+"/edit",target:"#main-view",position:"left-bottom",slot:"fixed",color:"lime"},i.a.createElement(r.m,{ios:"f7:edit",aurora:"f7:edit",md:"material:edit"}),i.a.createElement(r.m,{ios:"f7:close",aurora:"f7:close",md:"material:close"}))}},{key:"deleteTodoConfirm",value:function(e){var t=this;t.$f7.dialog.confirm(q.are_you_sure,q.alert,(function(){return t.deleteTodo(e)}))}},{key:"deleteTodo",value:function(e){L("todos",{id:e},this.state.token)}},{key:"removeWork",value:function(e){L("users/assignments",{user_id:e,work_id:this.state.id},this.state.token)}},{key:"removeAbility",value:function(e){L("works/abilities",{id:this.state.id,title:e},this.state.token)}},{key:"replyToComment",value:function(e){this.setState({replyTo:e}),this.$$("#cm-form-"+this.state.rnd).focus()}},{key:"removeReply",value:function(){this.setState({replyTo:null})}},{key:"searchReport",value:function(e){w("reports/search",this.state.page,{work_id:this.state.id,q:e},this.state.token)}},{key:"render",value:function(){var e=this.state,t=e.work,a=e.users,n=e.assignedUsers,s=e.ability,l=e.profiles,o=e.statuses,c=e.comments,u=e.commentContent,m=e.access,d=e.todos,h=e.replyTo,f=e.rnd,p=e.reports;return i.a.createElement(r.s,null,i.a.createElement(r.r,{title:q.works,backLinkForce:!0,backLink:q.back},i.a.createElement(r.n,{panelOpen:"right"},i.a.createElement(r.m,{f7:"bars"}))),i.a.createElement(Ye,{work:t,users:a,ability:s,profiles:l,statuses:o,removeProfile:this.removeProfile,addProfile:this.addProfile,searchProfile:this.searchProfile,removeAbility:this.removeAbility,assignedUsers:n,addAbility:this.addAbility,removeWork:this.removeWork,submit:this.submit,handleChange:this.handleChangeValue,searchStatus:this.searchStatus,addStatus:this.addStatus,submitComment:this.submitComment,deleteCommentConfirm:this.deleteCommentConfirm,commentContent:u,comments:c,loadMore:this.loadMore,changeRole:this.changeRole,access:m,todos:d,todoChecked:this.todoChecked,deleteTodoConfirm:this.deleteTodoConfirm,replyToComment:this.replyToComment,replyTo:h,removeReply:this.removeReply,rnd:f,searchReport:this.searchReport,reports:p}))}}]),t}(n.Component),Ze=function(e){function t(e){var t=new Date(new window.ODate(e));return i.a.createElement(F.a,{date:t,fromNow:!0})}return e.works?(console.log(e.works),i.a.createElement(r.o,null,e.works.map((function(e){return i.a.createElement(r.q,{key:"worklist"+e.id,header:e.title,title:t(e.deadline_date),link:"/works/"+e.id})})))):i.a.createElement("ul",null)},et=function(e){return i.a.createElement(r.s,null,i.a.createElement(r.r,{title:q.works,backLink:q.back}),i.a.createElement(r.d,null,q.list),i.a.createElement(Ze,{works:e.works}))},tt=function(e){function t(){var e;return Object(d.a)(this,t),(e=Object(f.a)(this,Object(p.a)(t).call(this))).getList=e.getList.bind(Object(g.a)(e)),e.state={token:window.localStorage.getItem("token"),works:null},e}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentWillMount",value:function(){_.on("got_list",this.getList)}},{key:"componentWillUnmount",value:function(){_.removeListener("got_list",this.getList)}},{key:"componentDidMount",value:function(){this.loadData()}},{key:"loadData",value:function(){o.a.instance.toast.show({text:q.receiving,closeTimeout:2e3,position:"top"}),w("works",this.state.page,{},this.state.token)}},{key:"getList",value:function(){var e=_.getList(),t=_.getKlass();e&&"Work"===t&&this.setState({works:e})}},{key:"render",value:function(){var e=this.state.works;return i.a.createElement(et,{works:e})}}]),t}(i.a.Component),at=function(e){if(e.privateWork);else;return i.a.createElement(r.f,null,i.a.createElement(r.d,null,q.work),i.a.createElement(r.o,null,i.a.createElement(r.p,{label:q.title,type:"text",placeholder:q.select_appropriate_title,defaultValue:e.work.title,required:!0,onInput:function(t){e.handleChange({title:t.target.value})}}),i.a.createElement(r.p,{label:q.priority,type:"select",defaultValue:e.priority,onChange:function(t){e.handleChange({priority:t.target.value})}},i.a.createElement("option",{value:"normal"},q.normal),i.a.createElement("option",{value:"high"},q.high),i.a.createElement("option",{value:"urgent"},q.urgent)),i.a.createElement("li",null,i.a.createElement("div",{class:"item-content item-input"},i.a.createElement("div",{class:"item-inner"},i.a.createElement("div",{class:"item-title item-label"},q.start_date),i.a.createElement("div",{class:"item-input-wrap"},i.a.createElement("input",{type:"text",placeholder:q.select_a_date,readonly:"readonly",id:"start-calendar"}))))),i.a.createElement("li",null,i.a.createElement("div",{class:"item-content item-input"},i.a.createElement("div",{class:"item-inner"},i.a.createElement("div",{class:"item-title item-label"},q.start_time),i.a.createElement("div",{class:"item-input-wrap"},i.a.createElement("input",{type:"text",placeholder:q.select_a_time,value:e.startTime,readonly:"readonly",id:"start-time-picker"}))))),i.a.createElement("li",null,i.a.createElement("div",{class:"item-content item-input"})),i.a.createElement("li",null,i.a.createElement("div",{class:"item-content item-input"},i.a.createElement("div",{class:"item-inner"},i.a.createElement("div",{class:"item-title item-label"},q.deadline),i.a.createElement("div",{class:"item-input-wrap"},i.a.createElement("input",{type:"text",placeholder:q.select_a_date,readonly:"readonly",id:"deadline-calendar"}))))),i.a.createElement("li",null,i.a.createElement("div",{class:"item-content item-input"},i.a.createElement("div",{class:"item-inner"},i.a.createElement("div",{class:"item-title item-label"},q.deadline_time),i.a.createElement("div",{class:"item-input-wrap"},i.a.createElement("input",{type:"text",placeholder:q.select_a_time,value:e.deadlineTime,readonly:"readonly",id:"deadline-time-picker"})))))),i.a.createElement(r.c,{strong:!0},i.a.createElement(r.u,{tag:"p"},function(){if(e.editing)return i.a.createElement(r.k,null,i.a.createElement(r.e,{className:"col btn ml-5",outline:!0,color:"red",disabled:!e.editing,onClick:function(){return e.deleteWorkConfirm()}},q.delete))}(),i.a.createElement(r.n,{className:"btn-notice"}),i.a.createElement(r.e,{className:"col btn",fill:!0,onClick:e.submit},q.submit))))},nt=function(e){function t(){var e;return Object(d.a)(this,t),(e=Object(f.a)(this,Object(p.a)(t).call(this))).submit=e.submit.bind(Object(g.a)(e)),e.setInstance=e.setInstance.bind(Object(g.a)(e)),e.handleChangeValue=e.handleChangeValue.bind(Object(g.a)(e)),e.loadCalender=e.loadCalender.bind(Object(g.a)(e)),e.pageAfterIn=e.pageAfterIn.bind(Object(g.a)(e)),e.state={token:window.localStorage.getItem("token"),work:{},title:null,details:null,deadline:new Date,start:new Date,startTime:"0:00",deadlineTime:"0:00",privateWork:!0,priority:"normal"},e}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentWillMount",value:function(){_.on("set_instance",this.setInstance)}},{key:"componentWillUnmount",value:function(){_.removeListener("set_instance",this.setInstance)}},{key:"componentDidMount",value:function(){}},{key:"pageAfterIn",value:function(){this.loadCalender(),this.loadTime()}},{key:"loadTime",value:function(){new Date;var e=this,t=e.$f7;t.picker.create({inputEl:"#start-time-picker",rotateEffect:!0,on:{closed:function(t){e.setState({startTime:t.value[1]+":"+t.value[0]})}},cols:[{values:"00 15 30 45".split(" ")},{textAlign:"left",values:"0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23".split(" ")}]}),t.picker.create({inputEl:"#deadline-time-picker",rotateEffect:!0,on:{closed:function(t){e.setState({deadlineTime:t.value[1]+":"+t.value[0]})}},cols:[{values:"00 15 30 45".split(" ")},{textAlign:"left",values:"0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23".split(" ")}]})}},{key:"loadCalender",value:function(){var e=this,t=e.$f7;t.calendar.create({inputEl:"#start-calendar",value:[new Date],closeOnSelect:!0,firstDay:6,weekendDays:[4,5],monthNames:["\u0641\u0631\u0648\u0631\u062f\u064a\u0646","\u0627\u0631\u062f\u064a\u0628\u0647\u0634\u062a","\u062e\u0631\u062f\u0627\u062f","\u062a\u06cc\u0631","\u0645\u0631\u062f\u0627\u062f","\u0634\u0647\u0631\u06cc\u0648\u0631","\u0645\u0647\u0631","\u0622\u0628\u0627\u0646","\u0622\u0630\u0631","\u062f\u06cc","\u0628\u0647\u0645\u0646","\u0627\u0633\u0641\u0646\u062f"],dayNames:["\u06cc\u06a9\u0634\u0646\u0628\u0647","\u062f\u0648\u0634\u0646\u0628\u0647","\u0633\u0647 \u0634\u0646\u0628\u0647","\u0686\u0647\u0627\u0631\u0634\u0646\u0628\u0647","\u067e\u0646\u062c\u200c\u0634\u0646\u0628\u0647","\u062c\u0645\u0639\u0647","\u0634\u0646\u0628\u0647"],dayNamesShort:["\u06cc\u06a9","\u062f\u0648","\u0633\u0647 ","\u0686\u0647\u0627\u0631","\u067e\u0646\u062c\u200c","\u062c\u0645\u0639\u0647","\u0634\u0646\u0628\u0647"],on:{closed:function(t){console.log(t.value[0].a),e.setState({start:t.value[0].a})}}}),t.calendar.create({inputEl:"#deadline-calendar",closeOnSelect:!0,value:[new Date],firstDay:6,weekendDays:[4,5],monthNames:["\u0641\u0631\u0648\u0631\u062f\u064a\u0646","\u0627\u0631\u062f\u064a\u0628\u0647\u0634\u062a","\u062e\u0631\u062f\u0627\u062f","\u062a\u06cc\u0631","\u0645\u0631\u062f\u0627\u062f","\u0634\u0647\u0631\u06cc\u0648\u0631","\u0645\u0647\u0631","\u0622\u0628\u0627\u0646","\u0622\u0630\u0631","\u062f\u06cc","\u0628\u0647\u0645\u0646","\u0627\u0633\u0641\u0646\u062f"],dayNames:["\u06cc\u06a9\u0634\u0646\u0628\u0647","\u062f\u0648\u0634\u0646\u0628\u0647","\u0633\u0647 \u0634\u0646\u0628\u0647","\u0686\u0647\u0627\u0631\u0634\u0646\u0628\u0647","\u067e\u0646\u062c\u200c\u0634\u0646\u0628\u0647","\u062c\u0645\u0639\u0647","\u0634\u0646\u0628\u0647"],dayNamesShort:["\u06cc\u06a9","\u062f\u0648","\u0633\u0647 ","\u0686\u0647\u0627\u0631","\u067e\u0646\u062c\u200c","\u062c\u0645\u0639\u0647","\u0634\u0646\u0628\u0647"],on:{closed:function(t){e.setState({deadline:t.value[0].a})}}})}},{key:"submit",value:function(){this.$$(".btn").hide(),this.$$(".btn-notice").text(q.submitting);var e={title:this.state.title,details:this.state.details,start:this.state.start,start_time:this.state.startTime,deadline:this.state.deadline,deadline_time:this.state.deadlineTime,task_id:this.$f7route.params.taskId,priority:this.state.priority};if(this.state.title&&this.state.title.length>0)T("works",e,this.state.token);else{this.$f7.dialog.alert(q.incomplete_data,q.alert)}}},{key:"handleChangeValue",value:function(e){this.setState(e)}},{key:"setInstance",value:function(){var e=_.getIntance(),t=_.getKlass();e&&"Work"===t?(this.$$(".btn").show(),this.$f7router.navigate("/works/"+e.id)):(this.$$(".btn").show(),this.$f7router.navigate("/tasks/"))}},{key:"render",value:function(){var e=this.state.work;return i.a.createElement(r.s,{onPageAfterIn:this.pageAfterIn.bind(this)},i.a.createElement(r.r,{title:q.work_form,backLink:q.back}),i.a.createElement(r.d,null,q.work_form),i.a.createElement(at,{work:e,submit:this.submit,editing:!1,handleChange:this.handleChangeValue}))}}]),t}(n.Component),it=function(e){function t(){var e;return Object(d.a)(this,t),(e=Object(f.a)(this,Object(p.a)(t).call(this))).submit=e.submit.bind(Object(g.a)(e)),e.setInstance=e.setInstance.bind(Object(g.a)(e)),e.getInstance=e.getInstance.bind(Object(g.a)(e)),e.handleChangeValue=e.handleChangeValue.bind(Object(g.a)(e)),e.loadTime=e.loadTime.bind(Object(g.a)(e)),e.loadCalender=e.loadCalender.bind(Object(g.a)(e)),e.pageAfterIn=e.pageAfterIn.bind(Object(g.a)(e)),e.deleteWorkConfirm=e.deleteWorkConfirm.bind(Object(g.a)(e)),e.deleteWork=e.deleteWork.bind(Object(g.a)(e)),e.deleteInstance=e.deleteInstance.bind(Object(g.a)(e)),e.state={token:window.localStorage.getItem("token"),work:{},id:null,title:null,details:null,deadline:new Date,start:new Date,startTime:"0 00",deadlineTime:"0 00",privateWork:!0,priority:"normal"},e}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentWillMount",value:function(){_.on("got_instance",this.getInstance),_.on("set_instance",this.setInstance),_.on("deleted_instance",this.deleteInstance)}},{key:"componentWillUnmount",value:function(){_.removeListener("got_instance",this.getInstance),_.removeListener("set_instance",this.setInstance),_.removeListener("deleted_instance",this.deleteInstance)}},{key:"pageAfterIn",value:function(){this.loadTime()}},{key:"loadTime",value:function(){new Date;var e=this,t=e.$f7;t.picker.create({inputEl:"#start-time-picker",rotateEffect:!0,on:{closed:function(t){e.setState({startTime:t.value[1]+":"+t.value[0]})}},cols:[{values:"00 15 30 45".split(" ")},{textAlign:"left",values:"0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23".split(" ")}]}),t.picker.create({inputEl:"#deadline-time-picker",rotateEffect:!0,on:{closed:function(t){e.setState({deadlineTime:t.value[1]+":"+t.value[0]})}},cols:[{values:"00 15 30 45".split(" ")},{textAlign:"left",values:"0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23".split(" ")}]})}},{key:"loadCalender",value:function(){var e=this,t=e.$f7;t.calendar.create({inputEl:"#start-calendar",value:[this.state.start],closeOnSelect:!0,firstDay:6,weekendDays:[4,5],monthNames:["\u0641\u0631\u0648\u0631\u062f\u064a\u0646","\u0627\u0631\u062f\u064a\u0628\u0647\u0634\u062a","\u062e\u0631\u062f\u0627\u062f","\u062a\u06cc\u0631","\u0645\u0631\u062f\u0627\u062f","\u0634\u0647\u0631\u06cc\u0648\u0631","\u0645\u0647\u0631","\u0622\u0628\u0627\u0646","\u0622\u0630\u0631","\u062f\u06cc","\u0628\u0647\u0645\u0646","\u0627\u0633\u0641\u0646\u062f"],dayNames:["\u06cc\u06a9\u0634\u0646\u0628\u0647","\u062f\u0648\u0634\u0646\u0628\u0647","\u0633\u0647 \u0634\u0646\u0628\u0647","\u0686\u0647\u0627\u0631\u0634\u0646\u0628\u0647","\u067e\u0646\u062c\u200c\u0634\u0646\u0628\u0647","\u062c\u0645\u0639\u0647","\u0634\u0646\u0628\u0647"],dayNamesShort:["\u06cc\u06a9","\u062f\u0648","\u0633\u0647 ","\u0686\u0647\u0627\u0631","\u067e\u0646\u062c\u200c","\u062c\u0645\u0639\u0647","\u0634\u0646\u0628\u0647"],on:{closed:function(t){e.setState({start:t.value[0].a})}}}),t.calendar.create({inputEl:"#deadline-calendar",closeOnSelect:!0,value:[this.state.deadline],firstDay:6,weekendDays:[4,5],monthNames:["\u0641\u0631\u0648\u0631\u062f\u064a\u0646","\u0627\u0631\u062f\u064a\u0628\u0647\u0634\u062a","\u062e\u0631\u062f\u0627\u062f","\u062a\u06cc\u0631","\u0645\u0631\u062f\u0627\u062f","\u0634\u0647\u0631\u06cc\u0648\u0631","\u0645\u0647\u0631","\u0622\u0628\u0627\u0646","\u0622\u0630\u0631","\u062f\u06cc","\u0628\u0647\u0645\u0646","\u0627\u0633\u0641\u0646\u062f"],dayNames:["\u06cc\u06a9\u0634\u0646\u0628\u0647","\u062f\u0648\u0634\u0646\u0628\u0647","\u0633\u0647 \u0634\u0646\u0628\u0647","\u0686\u0647\u0627\u0631\u0634\u0646\u0628\u0647","\u067e\u0646\u062c\u200c\u0634\u0646\u0628\u0647","\u062c\u0645\u0639\u0647","\u0634\u0646\u0628\u0647"],dayNamesShort:["\u06cc\u06a9","\u062f\u0648","\u0633\u0647 ","\u0686\u0647\u0627\u0631","\u067e\u0646\u062c\u200c","\u062c\u0645\u0639\u0647","\u0634\u0646\u0628\u0647"],on:{closed:function(t){e.setState({deadline:t.value[0].a})}}})}},{key:"submit",value:function(){this.$$(".btn").hide(),this.$$(".btn-notice").text(q.submitting);var e={id:this.state.id,title:this.state.title,details:this.state.details,start:this.state.start,start_time:this.state.startTime,deadline:this.state.deadline,deadline_time:this.state.deadlineTime,priority:this.state.priority};if(this.state.title&&this.state.title.length>0)x("works",e,this.state.token);else{this.$f7.dialog.alert(q.incomplete_data,q.alert)}}},{key:"componentDidMount",value:function(){this.loadData()}},{key:"loadData",value:function(){o.a.instance.toast.show({text:q.receiving,closeTimeout:2e3,position:"top"}),this.$f7route.params.workId&&N("works",this.$f7route.params.workId,this.state.token)}},{key:"getInstance",value:function(){var e=this,t=_.getIntance(),a=_.getKlass();t&&"Work"===a&&this.setState({title:t.title,content:t.details,id:t.id,work:t,start:new window.ODate(t.start_date),deadline:new window.ODate(t.deadline_date),startTime:t.start_time,deadlineTime:t.deadline_time,defaultWork:t.default_work,priority:t.priority},(function(){return e.loadCalender()}))}},{key:"deleteWorkConfirm",value:function(){this.$f7.dialog.confirm(q.are_you_sure,q.alert,this.deleteWork)}},{key:"deleteWork",value:function(){L("works",{id:this.state.id},this.state.token)}},{key:"deleteInstance",value:function(){this.$f7router.navigate("/tasks/")}},{key:"handleChangeValue",value:function(e){this.setState(e)}},{key:"setInstance",value:function(){this.$$(".btn").show(),this.$f7router.navigate("/works/"+this.state.id)}},{key:"render",value:function(){var e=this.state,t=e.work,a=e.defaultWork,n=e.title,s=e.content,l=e.startTime,o=e.deadlineTime,c=e.priority;return i.a.createElement(r.s,{onPageAfterIn:this.pageAfterIn.bind(this)},i.a.createElement(r.r,{title:q.work_form,backLink:q.back}),i.a.createElement(r.d,null,q.work_form),i.a.createElement(at,{work:t,title:n,startTime:l,deadlineTime:o,content:s,defaultWork:a,submit:this.submit,editing:!0,handleChange:this.handleChangeValue,deleteWorkConfirm:this.deleteWorkConfirm,priority:c}))}}]),t}(n.Component),st=function(e){function t(){var e;return Object(d.a)(this,t),(e=Object(f.a)(this,Object(p.a)(t).call(this))).submit=e.submit.bind(Object(g.a)(e)),e.setInstance=e.setInstance.bind(Object(g.a)(e)),e.handleChangeValue=e.handleChangeValue.bind(Object(g.a)(e)),e.getInstance=e.getInstance.bind(Object(g.a)(e)),e.involvementCheck=e.involvementCheck.bind(Object(g.a)(e)),e.state={token:window.localStorage.getItem("token"),todo:{},title:null,involvements:[],workInvolvements:[]},e}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentWillMount",value:function(){_.on("set_instance",this.setInstance),_.on("got_instance",this.getInstance)}},{key:"componentWillUnmount",value:function(){_.removeListener("set_instance",this.setInstance),_.removeListener("got_instance",this.getInstance)}},{key:"componentDidMount",value:function(){N("works",this.$f7route.params.workId,this.state.token)}},{key:"submit",value:function(){this.$$(".btn").hide(),this.$$(".btn-notice").text(q.submitting);var e={title:this.state.title,work_id:this.$f7route.params.workId,involvements:this.state.involvements};if(this.state.title&&this.state.title.length>0)T("todos",e,this.state.token);else{this.$f7.dialog.alert(q.incomplete_data,q.alert)}}},{key:"handleChangeValue",value:function(e){this.setState(e)}},{key:"setInstance",value:function(){var e=_.getIntance(),t=_.getKlass();e&&"Todo"===t&&(this.$$(".btn").show(),this.$f7router.navigate("/works/"+e.work_id))}},{key:"getInstance",value:function(){var e=_.getIntance(),t=_.getKlass();e&&"Work"===t&&this.setState({workInvolvements:e.the_involvements})}},{key:"involvementCheck",value:function(e,t){t.target.checked?this.setState({involvements:this.state.involvements.concat({id:e})}):this.setState({involvements:this.state.involvements.filter((function(t){return t.id!==e}))})}},{key:"render",value:function(){var e=this.state,t=e.todo,a=e.involvements,n=e.workInvolvements;return i.a.createElement(r.s,{backLink:q.back,backLinkForce:!0},i.a.createElement(r.r,{title:q.work_form,backLink:q.back}),i.a.createElement(r.d,null,q.work_form),i.a.createElement(Je,{todo:t,workInvolvements:n,involvements:a,removeInvolvement:this.removeInvolvement,submit:this.submit,editing:!0,involvementCheck:this.involvementCheck,handleChange:this.handleChangeValue}))}}]),t}(n.Component),lt=function(e){function t(){var e;return Object(d.a)(this,t),(e=Object(f.a)(this,Object(p.a)(t).call(this))).submit=e.submit.bind(Object(g.a)(e)),e.setInstance=e.setInstance.bind(Object(g.a)(e)),e.handleChangeValue=e.handleChangeValue.bind(Object(g.a)(e)),e.removeInvolvement=e.removeInvolvement.bind(Object(g.a)(e)),e.getInstance=e.getInstance.bind(Object(g.a)(e)),e.involvementCheck=e.involvementCheck.bind(Object(g.a)(e)),e.setInvolvements=e.setInvolvements.bind(Object(g.a)(e)),e.state={token:window.localStorage.getItem("token"),todo:{},title:null,id:null,involvements:[],workInvolvements:[]},e}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentWillMount",value:function(){_.on("got_instance",this.getInstance),_.on("set_instance",this.setInstance)}},{key:"componentWillUnmount",value:function(){_.removeListener("got_instance",this.getInstance),_.removeListener("set_instance",this.setInstance)}},{key:"componentDidMount",value:function(){this.loadData()}},{key:"loadData",value:function(){o.a.instance.toast.show({text:q.receiving,closeTimeout:2e3,position:"top"}),this.$f7route.params.todoId&&N("todos",this.$f7route.params.todoId,this.state.token)}},{key:"submit",value:function(){this.$$(".btn").hide(),this.$$(".btn-notice").text(q.submitting);var e={id:this.state.id,title:this.state.title,involvements:this.state.involvements};if(this.state.title&&this.state.title.length>0)x("todos",e,this.state.token);else{this.$f7.dialog.alert(q.incomplete_data,q.alert)}}},{key:"removeInvolvement",value:function(e){this.setState({involvements:this.state.involvements.filter((function(t){return t.id!==e}))})}},{key:"getInstance",value:function(){var e=this,t=_.getIntance(),a=_.getKlass();t&&"Todo"===a&&this.setState({title:t.title,id:t.id,workInvolvements:t.work_involvements},(function(){return e.setInvolvements()}))}},{key:"setInvolvements",value:function(){this.setState({involvements:[]});var e=[];this.state.workInvolvements.map((function(t){t.check&&e.push({id:t.profile.id})})),this.setState({involvements:e})}},{key:"involvementCheck",value:function(e,t){t.target.checked?this.setState({involvements:this.state.involvements.concat({id:e})}):this.setState({involvements:this.state.involvements.filter((function(t){return t.id!==e}))})}},{key:"handleChangeValue",value:function(e){this.setState(e)}},{key:"setInstance",value:function(){var e=_.getIntance(),t=_.getKlass();e&&"Todo"===t&&(this.$$(".btn").show(),this.$f7router.navigate("/works/"+e.work_id))}},{key:"render",value:function(){var e=this.state,t=e.todo,a=e.involvements,n=e.title,s=e.workInvolvements;return i.a.createElement(r.s,{backLink:q.back,backLinkForce:!0},i.a.createElement(r.r,{title:q.work_form,backLink:q.back}),i.a.createElement(r.d,null,q.work_form),i.a.createElement(Je,{todo:t,workInvolvements:s,title:n,involvements:a,involvementCheck:this.involvementCheck,removeInvolvement:this.removeInvolvement,submit:this.submit,editing:!0,handleChange:this.handleChangeValue}))}}]),t}(n.Component),ot=function(e){function t(t){var a=[i.a.createElement("div",null,i.a.createElement("div",{className:"item-title fs-11"},q.associations,":"))];return e.time_sheet.the_associations&&e.time_sheet.the_associations.map((function(e){e.kind==t&&a.push(i.a.createElement("a",{href:"/"+e.a_type+"/"+e.id+"/"},i.a.createElement(r.j,{text:e.title})))})),a}return e.time_sheet?i.a.createElement(i.a.Fragment,null,i.a.createElement(r.d,null,q.sheet_date),i.a.createElement(r.o,{"simple-list":!0},i.a.createElement(r.q,null,e.time_sheet.jdate)),i.a.createElement(r.o,{className:"fs-11"},e.time_sheet.the_involvements.map((function(e){return i.a.createElement(r.q,{key:"involvement"+e.profile.id,title:e.profile.fullname,after:""},i.a.createElement("img",{slot:"media",src:e.profile.avatar,width:"27",height:"27"}))}))),i.a.createElement(r.d,null,q.morning_report),i.a.createElement(r.o,{"simple-list":!0},i.a.createElement(r.q,null,e.time_sheet.morning_report),i.a.createElement(r.q,null,t("Morning"))),i.a.createElement(r.d,null,q.afternoon_report),i.a.createElement(r.o,{"simple-list":!0},i.a.createElement(r.q,null,e.time_sheet.afternoon_report),i.a.createElement(r.q,null,t("Afternoon"))),i.a.createElement(r.d,null,q.extra_report),i.a.createElement(r.o,{"simple-list":!0},i.a.createElement(r.q,null,e.time_sheet.extra_report),i.a.createElement(r.q,null,t("Extra"))),i.a.createElement($e,{model:e.time_sheet,submit:e.submitComment,handleChange:e.handleChange}),i.a.createElement(Me,{comments:e.comments,deleteCommentConfirm:e.deleteCommentConfirm,loadMore:e.loadMore})):null},rt=function(e){function t(){var e;return Object(d.a)(this,t),(e=Object(f.a)(this,Object(p.a)(t).call(this))).getInstance=e.getInstance.bind(Object(g.a)(e)),e.getList=e.getList.bind(Object(g.a)(e)),e.submit=e.submit.bind(Object(g.a)(e)),e.handleChangeValue=e.handleChangeValue.bind(Object(g.a)(e)),e.deleteComment=e.deleteComment.bind(Object(g.a)(e)),e.submitComment=e.submitComment.bind(Object(g.a)(e)),e.deleteCommentConfirm=e.deleteCommentConfirm.bind(Object(g.a)(e)),e.state={token:window.localStorage.getItem("token"),time_sheet:null,id:null,user_id:null,comments:null},e}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentWillMount",value:function(){_.on("got_instance",this.getInstance),_.on("set_instance",this.getInstance),_.on("got_list",this.getList),_.on("deleted_instance",this.getInstance)}},{key:"componentWillUnmount",value:function(){_.removeListener("got_instance",this.getInstance),_.removeListener("set_instance",this.getInstance),_.removeListener("got_list",this.getList),_.removeListener("deleted_instance",this.getInstance)}},{key:"componentDidMount",value:function(){N("time_sheets",this.$f7route.params.timeSheetId,this.state.token)}},{key:"getInstance",value:function(){var e=_.getIntance(),t=_.getKlass();e&&"TimeSheet"===t&&this.setState({time_sheet:e,id:e.id,comments:e.the_comments}),this.$$(".btn").show()}},{key:"getList",value:function(){var e=_.getList(),t=_.getKlass();e&&"User"===t&&this.setState({users:e})}},{key:"submit",value:function(){this.$$(".btn").hide(),this.$$(".btn-notice").text(q.submitting),T("users/assignments",{time_sheet_id:this.state.id,user_id:this.state.user_id},this.state.token)}},{key:"submitComment",value:function(){T("comments",{commentable_type:"TimeSheet",commentable_id:this.state.id,content:this.state.commentContent},this.state.token)}},{key:"deleteCommentConfirm",value:function(e){var t=this;t.$f7.dialog.confirm(q.are_you_sure,q.alert,(function(){return t.deleteComment(e)}))}},{key:"deleteComment",value:function(e){L("comments",{id:e},this.state.token,this.state.page)}},{key:"handleChangeValue",value:function(e){this.setState(e)}},{key:"fab",value:function(){if(this.state.time_sheet)return i.a.createElement(r.l,{href:"/time_sheets/"+this.state.time_sheet.id+"/edit",target:"#main-view",position:"left-bottom",slot:"fixed",color:"lime"},i.a.createElement(r.m,{ios:"f7:edit",aurora:"f7:edit",md:"material:edit"}),i.a.createElement(r.m,{ios:"f7:close",aurora:"f7:close",md:"material:close"}))}},{key:"render",value:function(){var e=this.state,t=e.time_sheet,a=e.comments;return i.a.createElement(r.s,null,i.a.createElement(r.r,{title:q.time_sheets,backLink:q.back}),i.a.createElement(r.d,null),this.fab(),i.a.createElement(ot,{time_sheet:t,submit:this.submit,handleChange:this.handleChangeValue,comments:a,submitComment:this.submitComment,deleteCommentConfirm:this.deleteCommentConfirm}))}}]),t}(n.Component),ct=function(e){return e.time_sheets?i.a.createElement(r.f,null,i.a.createElement(r.i,null,e.header),i.a.createElement(r.g,null,i.a.createElement(r.o,{mediaList:!0,className:"fs-11"},e.time_sheets.map((function(e){return i.a.createElement(r.q,{className:"fs-11",key:V.a.lib.WordArray.random(32),link:"/time_sheets/"+e.id,ignoreCache:!0,title:e.jdate,after:"",subtitle:e.profile.fullname,text:""},i.a.createElement("img",{slot:"media",src:e.profile.avatar,width:"28",height:"28"}))})))),i.a.createElement(r.h,null,i.a.createElement(r.n,null),i.a.createElement(r.e,{onClick:function(){return e.loadMore(e.page)}},q.more))):i.a.createElement("ul",null)},ut=function(e){return i.a.createElement(r.s,null,i.a.createElement(r.r,{title:q.time_sheets,backLink:q.back}),i.a.createElement(r.d,null,q.list),i.a.createElement(r.l,{href:"/time_sheets/new",target:"#main-view",position:"left-bottom",slot:"fixed",color:"deeporange"},i.a.createElement(r.m,{ios:"f7:add",aurora:"f7:add",md:"material:add"}),i.a.createElement(r.m,{ios:"f7:close",aurora:"f7:close",md:"material:close"})),i.a.createElement(r.u,null,i.a.createElement(r.k,{width:"100",tabletWidth:"50"},i.a.createElement(ct,{time_sheets:e.related_time_sheets,header:q.sent_to_me,page:"page_related",loadMore:e.loadMore})),i.a.createElement(r.k,{width:"100",tabletWidth:"50"},i.a.createElement(ct,{time_sheets:e.mine_time_sheets,header:q.sent_by_me,page:"page_mine",loadMore:e.loadMore}))))},mt=function(e){function t(){var e;return Object(d.a)(this,t),(e=Object(f.a)(this,Object(p.a)(t).call(this))).getMutipleList=e.getMutipleList.bind(Object(g.a)(e)),e.loadMore=e.loadMore.bind(Object(g.a)(e)),e.getList=e.getList.bind(Object(g.a)(e)),e.state={token:window.localStorage.getItem("token"),mine_time_sheets:[],related_time_sheets:[],page_mine:1,page_related:1},e}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentWillMount",value:function(){_.on("got_multiple_list",this.getMutipleList),_.on("got_list",this.getList)}},{key:"componentWillUnmount",value:function(){_.removeListener("got_multiple_list",this.getMutipleList),_.removeListener("got_list",this.getList)}},{key:"componentDidMount",value:function(){this.loadData()}},{key:"loadData",value:function(){o.a.instance.toast.show({text:q.receiving,closeTimeout:2e3,position:"top"}),I("time_sheets",this.state.page,{},this.state.token)}},{key:"loadMore",value:function(e){var t=this;"page_mine"===e&&this.setState({page_mine:this.state.page_mine+1},(function(){w("time_sheets/mine",t.state.page_mine,{},t.state.token)})),"page_related"===e&&this.setState({page_related:this.state.page_related+1},(function(){w("time_sheets/related",t.state.page_related,{},t.state.token)}))}},{key:"getList",value:function(){var e=_.getList(),t=_.getKlass();console.log(e),e&&"TimeSheetMine"===t&&this.setState({mine_time_sheets:this.state.mine_time_sheets.concat(e)}),e&&"TimeSheetRelated"===t&&this.setState({related_time_sheets:this.state.related_time_sheets.concat(e)})}},{key:"getMutipleList",value:function(){var e=_.getMutipleList(),t=_.getKlass();console.log(e),e&&"TimeSheet"===t&&this.setState({mine_time_sheets:e.mine,related_time_sheets:e.related})}},{key:"render",value:function(){var e=this.state,t=e.mine_time_sheets,a=e.related_time_sheets;return i.a.createElement(ut,{mine_time_sheets:t,related_time_sheets:a,loadMore:this.loadMore})}}]),t}(i.a.Component),dt=function(e){function t(t){var a=[i.a.createElement("div",null,i.a.createElement("a",{className:"fs-11 ",href:"#",id:t+"-association"},i.a.createElement("div",{className:"item-title fs-11"},i.a.createElement("i",{className:"va-minus-2 ml-5 fa fa-plus"}),q.associations,":")))];return e.associations&&e.associations.map((function(n){n.kind==t&&a.push(i.a.createElement(r.j,{text:n.title,deleteable:!0,onClick:function(){return e.removeAssociation(n.id,t)}}))})),a}return e.time_sheet?i.a.createElement(r.f,null,i.a.createElement(r.i,null,q.time_sheet),i.a.createElement(r.g,null,i.a.createElement(r.o,null,i.a.createElement(r.p,{label:q.morning_report,type:"textarea",placeholder:q.write_appropriate_details,value:e.time_sheet.morning_report,onInput:function(t){e.handleChange({morningReport:t.target.value})}}),i.a.createElement(r.q,{title:t("Morning")}),i.a.createElement(r.p,{label:q.afternoon_report,type:"textarea",placeholder:q.write_appropriate_details,value:e.time_sheet.afternoon_report,onInput:function(t){e.handleChange({afternoonReport:t.target.value})}}),i.a.createElement(r.q,{title:t("Afternoon")}),i.a.createElement(r.p,{label:q.extra_report,type:"textarea",placeholder:q.write_appropriate_details,value:e.extra_report,onInput:function(t){e.handleChange({extraReport:t.target.value})}}),i.a.createElement(r.q,{title:t("Extra")}),i.a.createElement("li",null,i.a.createElement("div",{className:"item-content item-input"},i.a.createElement("div",{className:"item-inner"},i.a.createElement("div",{className:"item-title item-label"},q.sheet_date),i.a.createElement("div",{className:"item-input-wrap"},i.a.createElement("input",{className:"date-input",type:"text",placeholder:q.select_a_date,readonly:"readonly",id:"sheet-date-calendar"}))))),i.a.createElement(r.q,{title:function(){var t=[i.a.createElement("div",null,i.a.createElement("a",{className:"fs-11 ",href:"#",id:"time-sheet-involvements"},i.a.createElement("div",{className:"item-title fs-11"},i.a.createElement("i",{className:"va-minus-2 ml-5 fa fa-user-plus"}),q.recipients,":")))];return e.involvements&&e.involvements.map((function(a){t.push(i.a.createElement(r.j,{text:a.fullname,deleteable:!0,onClick:function(){return e.removeInvolvement(a.id)}}))})),t}()}))),i.a.createElement(r.h,null,i.a.createElement(r.n,null),i.a.createElement(r.e,{fill:!0,disabled:!e.editing,onClick:e.submit},q.submit))):null},ht=function(e){function t(){var e;return Object(d.a)(this,t),(e=Object(f.a)(this,Object(p.a)(t).call(this))).submit=e.submit.bind(Object(g.a)(e)),e.setInstance=e.setInstance.bind(Object(g.a)(e)),e.handleChangeValue=e.handleChangeValue.bind(Object(g.a)(e)),e.loadCalender=e.loadCalender.bind(Object(g.a)(e)),e.loadAssociation=e.loadAssociation.bind(Object(g.a)(e)),e.removeAssociation=e.removeAssociation.bind(Object(g.a)(e)),e.removeInvolvement=e.removeInvolvement.bind(Object(g.a)(e)),e.state={token:window.localStorage.getItem("token"),morningReport:null,afternoonReport:null,extraReport:null,associations:[],involvements:[],time_sheet:{},timeSheetDate:new Date,isPublic:!1},e}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentWillMount",value:function(){_.on("set_instance",this.setInstance)}},{key:"componentWillUnmount",value:function(){_.removeListener("set_instance",this.setInstance)}},{key:"submit",value:function(){T("time_sheets",{associations:this.state.associations,morning_report:this.state.morningReport,afternoon_report:this.state.afternoonReport,extra_report:this.state.extraReport,sheet_date:this.state.timeSheetDate,involvements:this.state.involvements},this.state.token)}},{key:"loadAssociation",value:function(){var e=this,t=e.$f7;t.autocomplete.create({openIn:"popup",openerEl:"#Morning-association",multiple:!0,valueProperty:"id",textProperty:"title",searchbarDisableText:q.cancel,popupCloseLinkText:q.close,notFoundText:q.not_found,limit:50,searchbarPlaceholder:q.search,preloader:!0,source:function(e,a){var n=this,i=[];0!==e.length?(n.preloaderShow(),t.request({url:O.server+"/time_sheets/search_ass",method:"GET",dataType:"json",data:{q:e},success:function(e){for(var t=0;t<e.data.length;t++)i.push(e.data[t]);n.preloaderHide(),a(i)}})):a(i)},on:{change:function(t){t&&t[t.length-1]&&(console.log(t[t.length-1]),e.setState({associations:e.state.associations.concat({title:t[t.length-1].title,id:t[t.length-1].id,a_type:t[t.length-1].a_type,kind:"Morning"})}))}}}),t.autocomplete.create({openIn:"popup",openerEl:"#Afternoon-association",multiple:!0,valueProperty:"id",textProperty:"title",searchbarDisableText:q.cancel,popupCloseLinkText:q.close,notFoundText:q.not_found,limit:50,searchbarPlaceholder:q.search,source:function(e,a){var n=[];0!==e.length?t.request({url:O.server+"/time_sheets/search_ass",method:"GET",dataType:"json",data:{q:e},success:function(e){for(var t=0;t<e.data.length;t++)n.push(e.data[t]);a(n)}}):a(n)},on:{change:function(t){t&&t[t.length-1]&&e.setState({associations:e.state.associations.concat({title:t[t.length-1].title,id:t[t.length-1].id,a_type:t[t.length-1].a_type,kind:"Afternoon"})})}}}),t.autocomplete.create({openIn:"popup",openerEl:"#Extra-association",multiple:!0,valueProperty:"id",textProperty:"title",searchbarDisableText:q.cancel,popupCloseLinkText:q.close,notFoundText:q.not_found,limit:50,searchbarPlaceholder:q.search,source:function(e,a){var n=[];0!==e.length?t.request({url:O.server+"/time_sheets/search_ass",method:"GET",dataType:"json",data:{q:e},success:function(e){for(var t=0;t<e.data.length;t++)n.push(e.data[t]);a(n)}}):a(n)},on:{change:function(t){t&&t[t.length-1]&&e.setState({associations:e.state.associations.concat({title:t[t.length-1].title,id:t[t.length-1].id,a_type:t[t.length-1].a_type,kind:"Extra"})})}}}),t.autocomplete.create({openIn:"popup",openerEl:"#time-sheet-involvements",multiple:!0,valueProperty:"id",textProperty:"fullname",searchbarDisableText:q.cancel,popupCloseLinkText:q.close,notFoundText:q.not_found,limit:50,searchbarPlaceholder:q.search,source:function(e,a){var n=[];0!==e.length?t.request({url:O.server+"/profiles/search",method:"GET",dataType:"json",data:{q:e},success:function(e){for(var t=0;t<e.data.length;t++)n.push(e.data[t]);a(n)}}):a(n)},on:{change:function(t){t&&t[t.length-1]&&e.setState({involvements:e.state.involvements.concat({fullname:t[t.length-1].fullname,id:t[t.length-1].id})})}}})}},{key:"handleChangeValue",value:function(e){this.setState(e)}},{key:"setInstance",value:function(){this.$f7router.navigate("/time_sheets/")}},{key:"pageAfterIn",value:function(){this.loadCalender(),this.loadAssociation()}},{key:"loadCalender",value:function(){var e=this,t=e.$f7,a=new window.ODate,n=(new window.ODate).setDate(a.getDate()-7);t.calendar.create({inputEl:"#sheet-date-calendar",value:[new Date],closeOnSelect:!0,firstDay:6,weekendDays:[4,5],monthNames:["\u0641\u0631\u0648\u0631\u062f\u064a\u0646","\u0627\u0631\u062f\u064a\u0628\u0647\u0634\u062a","\u062e\u0631\u062f\u0627\u062f","\u062a\u06cc\u0631","\u0645\u0631\u062f\u0627\u062f","\u0634\u0647\u0631\u06cc\u0648\u0631","\u0645\u0647\u0631","\u0622\u0628\u0627\u0646","\u0622\u0630\u0631","\u062f\u06cc","\u0628\u0647\u0645\u0646","\u0627\u0633\u0641\u0646\u062f"],dayNames:["\u06cc\u06a9\u0634\u0646\u0628\u0647","\u062f\u0648\u0634\u0646\u0628\u0647","\u0633\u0647 \u0634\u0646\u0628\u0647","\u0686\u0647\u0627\u0631\u0634\u0646\u0628\u0647","\u067e\u0646\u062c\u200c\u0634\u0646\u0628\u0647","\u062c\u0645\u0639\u0647","\u0634\u0646\u0628\u0647"],dayNamesShort:["\u06cc\u06a9","\u062f\u0648","\u0633\u0647 ","\u0686\u0647\u0627\u0631","\u067e\u0646\u062c\u200c","\u062c\u0645\u0639\u0647","\u0634\u0646\u0628\u0647"],disabled:function(e){return!(e>n&&e<a)},on:{closed:function(t){e.setState({timeSheetDate:t.value[0].a})}}})}},{key:"removeAssociation",value:function(e,t){this.setState({associations:this.state.associations.filter((function(a){return a.id!==e||a.kind!==t}))})}},{key:"removeInvolvement",value:function(e){this.setState({involvements:this.state.involvements.filter((function(t){return t.id!==e}))})}},{key:"render",value:function(){var e=this.state,t=e.time_sheet,a=e.associations,n=e.involvements;return i.a.createElement(r.s,{onPageAfterIn:this.pageAfterIn.bind(this)},i.a.createElement(r.r,{title:q.time_sheet_form,backLink:q.back}),i.a.createElement(r.d,null,q.time_sheet_form),i.a.createElement(dt,{time_sheet:t,submit:this.submit,editing:!0,handleChange:this.handleChangeValue,associations:a,removeAssociation:this.removeAssociation,involvements:n,removeInvolvement:this.removeInvolvement}))}}]),t}(n.Component),ft=function(e){function t(){var e;return Object(d.a)(this,t),(e=Object(f.a)(this,Object(p.a)(t).call(this))).submit=e.submit.bind(Object(g.a)(e)),e.setInstance=e.setInstance.bind(Object(g.a)(e)),e.handleChangeValue=e.handleChangeValue.bind(Object(g.a)(e)),e.loadCalender=e.loadCalender.bind(Object(g.a)(e)),e.loadAssociation=e.loadAssociation.bind(Object(g.a)(e)),e.removeAssociation=e.removeAssociation.bind(Object(g.a)(e)),e.removeInvolvement=e.removeInvolvement.bind(Object(g.a)(e)),e.getInstance=e.getInstance.bind(Object(g.a)(e)),e.state={token:window.localStorage.getItem("token"),morningReport:null,afternoonReport:null,extraReport:null,id:null,associations:[],involvements:[],time_sheet:null,timeSheetDate:new Date},e}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentWillMount",value:function(){_.on("set_instance",this.setInstance),_.on("got_instance",this.getInstance)}},{key:"componentWillUnmount",value:function(){_.removeListener("set_instance",this.setInstance),_.removeListener("got_instance",this.getInstance)}},{key:"componentDidMount",value:function(){this.loadData()}},{key:"loadData",value:function(){this.$f7route.params.timeSheetId&&N("time_sheets",this.$f7route.params.timeSheetId,this.state.token)}},{key:"submit",value:function(){x("time_sheets",{id:this.state.id,associations:this.state.associations,morning_report:this.state.morningReport,afternoon_report:this.state.afternoonReport,extra_report:this.state.extraReport,sheet_date:this.state.timeSheetDate,involvements:this.state.involvements},this.state.token)}},{key:"getInstance",value:function(){var e=this,t=_.getIntance(),a=_.getKlass();t&&"TimeSheet"===a&&this.setState({id:t.id,time_sheet:t,timeSheetDate:t.date,involvements:t.the_involvements,associations:t.the_associations},(function(){return e.loadAssociation()})),console.log(t)}},{key:"loadAssociation",value:function(){var e=this,t=e.$f7;t.autocomplete.create({openIn:"popup",openerEl:"#Morning-association",multiple:!0,valueProperty:"id",textProperty:"title",searchbarDisableText:q.cancel,popupCloseLinkText:q.close,notFoundText:q.not_found,limit:50,searchbarPlaceholder:q.search,preloader:!0,source:function(e,a){var n=this,i=[];0!==e.length?(n.preloaderShow(),t.request({url:O.server+"/time_sheets/search_ass",method:"GET",dataType:"json",data:{q:e},success:function(e){for(var t=0;t<e.data.length;t++)i.push(e.data[t]);n.preloaderHide(),a(i)}})):a(i)},on:{change:function(t){t&&t[t.length-1]&&(console.log(e.state.associations),e.setState({associations:e.state.associations.concat({title:t[t.length-1].title,id:t[t.length-1].id,a_type:t[t.length-1].a_type,kind:"Morning"})}))}}}),t.autocomplete.create({openIn:"popup",openerEl:"#Afternoon-association",multiple:!0,valueProperty:"id",textProperty:"title",searchbarDisableText:q.cancel,popupCloseLinkText:q.close,notFoundText:q.not_found,limit:50,searchbarPlaceholder:q.search,source:function(e,a){var n=[];0!==e.length?t.request({url:O.server+"/time_sheets/search_ass",method:"GET",dataType:"json",data:{q:e},success:function(e){for(var t=0;t<e.data.length;t++)n.push(e.data[t]);a(n)}}):a(n)},on:{change:function(t){t&&t[t.length-1]&&e.setState({associations:e.state.associations.concat({title:t[t.length-1].title,id:t[t.length-1].id,a_type:t[t.length-1].a_type,kind:"Afternoon"})})}}}),t.autocomplete.create({openIn:"popup",openerEl:"#Extra-association",multiple:!0,valueProperty:"id",textProperty:"title",searchbarDisableText:q.cancel,popupCloseLinkText:q.close,notFoundText:q.not_found,limit:50,searchbarPlaceholder:q.search,source:function(e,a){var n=[];0!==e.length?t.request({url:O.server+"/time_sheets/search_ass",method:"GET",dataType:"json",data:{q:e},success:function(e){for(var t=0;t<e.data.length;t++)n.push(e.data[t]);a(n)}}):a(n)},on:{change:function(t){t&&t[t.length-1]&&e.setState({associations:e.state.associations.concat({title:t[t.length-1].title,id:t[t.length-1].id,a_type:t[t.length-1].a_type,kind:"Extra"})})}}}),t.autocomplete.create({openIn:"popup",openerEl:"#time-sheet-involvements",multiple:!0,valueProperty:"id",textProperty:"fullname",searchbarDisableText:q.cancel,popupCloseLinkText:q.close,notFoundText:q.not_found,limit:50,searchbarPlaceholder:q.search,source:function(e,a){var n=[];0!==e.length?t.request({url:O.server+"/profiles/search",method:"GET",dataType:"json",data:{q:e},success:function(e){for(var t=0;t<e.data.length;t++)n.push(e.data[t]);a(n)}}):a(n)},on:{change:function(t){t&&t[t.length-1]&&e.setState({involvements:e.state.involvements.concat({fullname:t[t.length-1].fullname,id:t[t.length-1].id})})}}})}},{key:"handleChangeValue",value:function(e){this.setState(e)}},{key:"setInstance",value:function(){this.$f7router.navigate("/time_sheets/")}},{key:"pageAfterIn",value:function(){this.loadCalender(),this.loadAssociation()}},{key:"loadCalender",value:function(){var e=this;e.$f7.calendar.create({inputEl:"#sheet-date-calendar",value:[new Date],closeOnSelect:!0,firstDay:6,weekendDays:[4,5],monthNames:["\u0641\u0631\u0648\u0631\u062f\u064a\u0646","\u0627\u0631\u062f\u064a\u0628\u0647\u0634\u062a","\u062e\u0631\u062f\u0627\u062f","\u062a\u06cc\u0631","\u0645\u0631\u062f\u0627\u062f","\u0634\u0647\u0631\u06cc\u0648\u0631","\u0645\u0647\u0631","\u0622\u0628\u0627\u0646","\u0622\u0630\u0631","\u062f\u06cc","\u0628\u0647\u0645\u0646","\u0627\u0633\u0641\u0646\u062f"],dayNames:["\u06cc\u06a9\u0634\u0646\u0628\u0647","\u062f\u0648\u0634\u0646\u0628\u0647","\u0633\u0647 \u0634\u0646\u0628\u0647","\u0686\u0647\u0627\u0631\u0634\u0646\u0628\u0647","\u067e\u0646\u062c\u200c\u0634\u0646\u0628\u0647","\u062c\u0645\u0639\u0647","\u0634\u0646\u0628\u0647"],dayNamesShort:["\u06cc\u06a9","\u062f\u0648","\u0633\u0647 ","\u0686\u0647\u0627\u0631","\u067e\u0646\u062c\u200c","\u062c\u0645\u0639\u0647","\u0634\u0646\u0628\u0647"],on:{closed:function(t){e.setState({timeSheetDate:t.value[0].a})}}})}},{key:"removeAssociation",value:function(e,t){this.setState({associations:this.state.associations.filter((function(a){return a.id!==e||a.kind!==t}))})}},{key:"removeInvolvement",value:function(e){this.setState({involvements:this.state.involvements.filter((function(t){return t.id!==e}))})}},{key:"render",value:function(){var e=this.state,t=e.time_sheet,a=e.associations,n=e.involvements;return i.a.createElement(r.s,{onPageAfterIn:this.pageAfterIn.bind(this)},i.a.createElement(r.r,{title:q.time_sheet_form,backLink:q.back}),i.a.createElement(r.d,null,q.time_sheet_form),i.a.createElement(dt,{time_sheet:t,submit:this.submit,editing:!0,handleChange:this.handleChangeValue,associations:a,removeAssociation:this.removeAssociation,involvements:n,removeInvolvement:this.removeInvolvement}))}}]),t}(n.Component),pt=(a(314),a(319),function(e){return e.profile?(console.log(e),i.a.createElement(i.a.Fragment,null,i.a.createElement(r.o,{className:"fs-12"},i.a.createElement(r.q,{key:"profile-show"+e.profile.id,title:e.profile.fullname,after:""},i.a.createElement("img",{slot:"media",src:e.profile.avatar,width:"27",height:"27"}))),i.a.createElement(r.f,null,i.a.createElement(U,{tasks:e.profile.the_tasks,header:q.tasks,sortChange:e.sortChange})),i.a.createElement(r.f,null,i.a.createElement(B,{works:e.profile.the_works,header:q.works,sortChange:e.sortChange})))):null}),gt=function(e){function t(){var e;return Object(d.a)(this,t),(e=Object(f.a)(this,Object(p.a)(t).call(this))).getInstance=e.getInstance.bind(Object(g.a)(e)),e.state={token:window.localStorage.getItem("token"),profile:null,id:null,actuals:null,metas:null,channels:null},e}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentWillMount",value:function(){_.on("got_instance",this.getInstance)}},{key:"componentWillUnmount",value:function(){_.removeListener("got_instance",this.getInstance)}},{key:"componentDidMount",value:function(){N("profiles",this.$f7route.params.profileId,this.state.token)}},{key:"getInstance",value:function(){var e=_.getIntance(),t=_.getKlass();e&&"Profile"===t&&this.setState({profile:e,id:e.id})}},{key:"fab",value:function(){if(this.state.profile)return i.a.createElement(r.l,{href:"/profiles/"+this.state.profile.id+"/edit",target:"#main-view",position:"left-bottom",slot:"fixed",color:"lime"},i.a.createElement(r.m,{ios:"f7:edit",aurora:"f7:edit",md:"material:edit"}),i.a.createElement(r.m,{ios:"f7:close",aurora:"f7:close",md:"material:close"}))}},{key:"render",value:function(){var e=this.state.profile;return i.a.createElement(r.s,null,i.a.createElement(r.r,{title:q.profiles,backLink:q.back}),this.fab(),i.a.createElement(pt,{profile:e}))}}]),t}(n.Component),vt=function(e){return e.profiles?i.a.createElement(r.o,{mediaList:!0},e.profiles.map((function(e){return i.a.createElement(r.q,{key:V.a.lib.WordArray.random(32),link:"/profiles/"+e.id,title:e.fullname,after:"",subtitle:"",text:""},i.a.createElement("img",{slot:"media",src:e.avatar,width:"40",height:"40"}))}))):i.a.createElement("ul",null)},bt=function(e){return i.a.createElement(r.s,null,i.a.createElement(r.r,{title:q.profiles,backLink:q.back},i.a.createElement(r.n,{panelOpen:"right"},i.a.createElement(r.m,{f7:"bars"})),i.a.createElement(r.x,{inner:!1},i.a.createElement(r.v,{disableButtonText:q.cancel,placeholder:q.search,onChange:function(t){e.search({query:t.target.value})}}))),i.a.createElement(r.d,null),i.a.createElement(r.l,{href:"/profiles/new",target:"#main-view",position:"left-bottom",slot:"fixed",color:"deeporange"},i.a.createElement(r.m,{ios:"f7:add",aurora:"f7:add",md:"material:add"}),i.a.createElement(r.m,{ios:"f7:close",aurora:"f7:close",md:"material:close"})),i.a.createElement(vt,{profiles:e.profiles}))},kt=function(e){function t(){var e;return Object(d.a)(this,t),(e=Object(f.a)(this,Object(p.a)(t).call(this))).getList=e.getList.bind(Object(g.a)(e)),e.search=e.search.bind(Object(g.a)(e)),e.state={token:window.localStorage.getItem("token"),profiles:null,query:null},e}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentWillMount",value:function(){_.on("got_list",this.getList)}},{key:"componentWillUnmount",value:function(){_.removeListener("got_list",this.getList)}},{key:"componentDidMount",value:function(){this.loadData()}},{key:"loadData",value:function(){w("profiles",this.state.page,{},this.state.token)}},{key:"search",value:function(e){var t=this;this.setState(e,(function(){w("profiles/search",t.state.page,{q:t.state.query},t.state.token)}))}},{key:"getList",value:function(){var e=_.getList(),t=_.getKlass();e&&"Profile"===t&&this.setState({profiles:e})}},{key:"render",value:function(){var e=this.state.profiles;return i.a.createElement(bt,{profiles:e,search:this.search})}}]),t}(i.a.Component),Et=a(164),_t=a.n(Et),yt=function(e){return e.profile?i.a.createElement(i.a.Fragment,null,i.a.createElement(r.f,null,i.a.createElement(r.i,null,q.profile_info),i.a.createElement(r.g,null,i.a.createElement(r.o,null,i.a.createElement(r.p,{label:q.firstname,type:"text",placeholder:"...",defaultValue:e.name,onInput:function(t){e.handleChange({name:t.target.value})}}),i.a.createElement(r.p,{label:q.surename,type:"text",placeholder:"...",defaultValue:e.surename,onInput:function(t){e.handleChange({surename:t.target.value})}}))),i.a.createElement(r.h,null,i.a.createElement(r.n,null),i.a.createElement(r.n,{className:"btn-notice"}),i.a.createElement(r.e,{className:"col btn",fill:!0,onClick:e.submit},q.submit))),i.a.createElement(r.f,null,i.a.createElement(r.i,null,i.a.createElement("img",{src:e.avatar,width:"40",height:"40"})),i.a.createElement(_t.a,{withIcon:!0,buttonText:q.choose_image,onChange:e.onDrop,buttonClassName:"upload-btn",imgExtension:[".jpg",".jpeg",".png"],maxFileSize:5242880}))):null},Ct=function(e){function t(){var e;return Object(d.a)(this,t),(e=Object(f.a)(this,Object(p.a)(t).call(this))).submit=e.submit.bind(Object(g.a)(e)),e.setInstance=e.setInstance.bind(Object(g.a)(e)),e.handleChangeValue=e.handleChangeValue.bind(Object(g.a)(e)),e.handleChangeValueFields=e.handleChangeValueFields.bind(Object(g.a)(e)),e.removeActual=e.removeActual.bind(Object(g.a)(e)),e.getInstance=e.getInstance.bind(Object(g.a)(e)),e.submitFields=e.submitFields.bind(Object(g.a)(e)),e.onDrop=e.onDrop.bind(Object(g.a)(e)),e.getList=e.getList.bind(Object(g.a)(e)),e.getList=e.getList.bind(Object(g.a)(e)),e.state={profile:{},metas:null,token:window.localStorage.getItem("token"),fields:[],name:"dd",surename:"",pictures:[],avatar:null},e}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentWillMount",value:function(){_.on("got_instance",this.getInstance),_.on("set_instance",this.getInstance),_.on("deleted_instance",this.getInstance),_.on("got_list",this.getList)}},{key:"componentWillUnmount",value:function(){_.removeListener("got_instance",this.getInstance),_.removeListener("set_instance",this.getInstance),_.removeListener("deleted_instance",this.getInstance),_.removeListener("got_list",this.getList)}},{key:"componentDidMount",value:function(){this.loadData()}},{key:"loadData",value:function(){w("metas",this.state.page)}},{key:"onDrop",value:function(e){console.log(e[0]),S("profiles",this.state.id,e[0],this.state.token)}},{key:"submit",value:function(){x("profiles",{id:this.state.id,name:this.state.name,surename:this.state.surename},this.state.token)}},{key:"submitFields",value:function(){T("actuals",{meta_id:this.state.metaId,content:this.state.fields},this.state.token)}},{key:"handleChangeValue",value:function(e){this.setState(e)}},{key:"handleChangeValueFields",value:function(e,t,a){var n=this.state.fields;if(n.length>0)for(var i=0;i<n.length;i++)if(n[i].fid&&n[i].fid===e){var s=Object.assign({},this.state);s.fields[i]={fid:e,value:t,metaId:a},this.setState(s)}else this.setState({fields:this.state.fields.concat({fid:e,value:t,metaId:a})});else this.setState({fields:this.state.fields.concat({fid:e,value:t,metaId:a})})}},{key:"setInstance",value:function(){this.$f7router.navigate("/profiles/")}},{key:"getInstance",value:function(){var e=_.getIntance(),t=_.getKlass();e&&"Profile"===t&&this.setState({metas:e.metas,profile:e})}},{key:"removeActual",value:function(e){L("actuals",{uuid:e})}},{key:"getList",value:function(){var e=_.getList(),t=_.getKlass();e&&"Meta"===t&&this.setState({metas:e})}},{key:"render",value:function(){var e=this.state,t=(e.profile,e.metas),a=e.name,n=e.avatar,s=e.surename;return i.a.createElement(r.s,null,i.a.createElement(r.r,{title:q.profile_form,backLink:q.back}),i.a.createElement(r.d,null,q.profile_form),i.a.createElement(yt,{name:a,avatar:n,surename:s,metas:t,onDrop:this.onDrop,removeActual:this.removeActual,submitFields:this.submitFields,submit:this.submit,editing:!0,handleChangeValueFields:this.handleChangeValueFields,handleChange:this.handleChangeValue}))}}]),t}(n.Component),Ot=function(e){function t(){var e;return Object(d.a)(this,t),(e=Object(f.a)(this,Object(p.a)(t).call(this))).submit=e.submit.bind(Object(g.a)(e)),e.setInstance=e.setInstance.bind(Object(g.a)(e)),e.handleChangeValue=e.handleChangeValue.bind(Object(g.a)(e)),e.getInstance=e.getInstance.bind(Object(g.a)(e)),e.onDrop=e.onDrop.bind(Object(g.a)(e)),e.state={name:null,surename:null,token:window.localStorage.getItem("token"),profile:null,id:null,pictures:[],avatar:null},e}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentWillMount",value:function(){_.on("got_instance",this.getInstance),_.on("set_instance",this.setInstance),_.on("file_posted",this.getInstance)}},{key:"componentWillUnmount",value:function(){_.removeListener("got_instance",this.getInstance),_.removeListener("set_instance",this.setInstance),_.removeListener("file_posted",this.getInstance)}},{key:"componentDidMount",value:function(){this.loadData()}},{key:"loadData",value:function(){this.$f7route.params.profileId&&N("profiles",this.$f7route.params.profileId,this.state.token)}},{key:"onDrop",value:function(e){console.log(e[0]),S("profiles",this.state.id,e[0],this.state.token)}},{key:"submit",value:function(){x("profiles",{id:this.state.id,name:this.state.name,surename:this.state.surename},this.state.token)}},{key:"handleChangeValue",value:function(e){this.setState(e)}},{key:"setInstance",value:function(){this.$f7router.navigate("/profiles/")}},{key:"getInstance",value:function(){var e=_.getIntance(),t=_.getKlass();e&&"Profile"===t&&this.setState({id:e.id,profile:e,name:e.name,surename:e.surename,avatar:e.avatar})}},{key:"render",value:function(){var e=this.state,t=e.profile,a=e.name,n=e.surename,s=e.avatar;return i.a.createElement(r.s,null,i.a.createElement(r.r,{title:q.profile_form,backLink:q.back}),i.a.createElement(r.d,null,q.profile_form),i.a.createElement(yt,{profile:t,name:a,avatar:s,surename:n,onDrop:this.onDrop,submit:this.submit,editing:!0,handleChange:this.handleChangeValue}))}}]),t}(n.Component),jt=(a(421),a(20)),wt=a(49),It=function(e){if(console.log(e),e.report&&e.report.draft){var t=Object(jt.convertFromRaw)(e.report.draft),a=jt.EditorState.createWithContent(t);return i.a.createElement(i.a.Fragment,null,i.a.createElement(r.c,null,i.a.createElement(r.u,null)),i.a.createElement(r.o,{"simple-list":!0},e.report.the_work?i.a.createElement(r.q,{title:e.report.the_work.title,href:"/works/"+e.report.the_work.id}):e.report.the_task?i.a.createElement(r.q,{title:e.report.the_task.title,href:"/tasks/"+e.report.the_task.id}):void 0),i.a.createElement(r.o,{"simple-list":!0},i.a.createElement(r.q,{key:"profile"+e.report.profile.id,title:e.report.profile.fullname,after:""},i.a.createElement("img",{slot:"media",src:e.report.profile.avatar,width:"27",height:"27"}))),i.a.createElement(r.d,null,q.title),i.a.createElement(r.o,{"simple-list":!0},i.a.createElement(r.q,null,e.report.title)),i.a.createElement(r.d,null,q.content),i.a.createElement(wt.Editor,{editorState:a,toolbar:{options:[]},readOnly:!0}),i.a.createElement(r.o,{"simple-list":!0},i.a.createElement(r.q,{title:function(e){var t=new Date(new window.ODate(e));return i.a.createElement(F.a,{date:t,fromNow:!0})}(e.report.creation_date)})),i.a.createElement(r.d,null,q.attachments),i.a.createElement(r.o,null,e.report.attachments.map((function(e){return i.a.createElement("li",{className:""},i.a.createElement("div",{className:"item-content"},i.a.createElement("div",{className:"item-inner"},i.a.createElement("div",{className:"item-title"},i.a.createElement("a",{className:"link external",target:"_blank",href:e.link},i.a.createElement("i",{className:"fa ml-5 fa-cloud-download","aria-hidden":"true"}),e.filename)))))}))),function(){if(e.access.includes("view_reports"))return i.a.createElement($e,{model:e.task,submit:e.submitComment,handleChange:e.handleChange,replyTo:e.replyTo,comments:e.comments,removeReply:e.removeReply,rnd:e.rnd})}(),function(){if(e.comments)return i.a.createElement(Me,{comments:e.comments,deleteCommentConfirm:e.deleteCommentConfirm,loadMore:e.loadMore,replyToComment:e.replyToComment})}())}return null},St=function(e){function t(){var e;return Object(d.a)(this,t),(e=Object(f.a)(this,Object(p.a)(t).call(this))).getInstance=e.getInstance.bind(Object(g.a)(e)),e.setInstance=e.setInstance.bind(Object(g.a)(e)),e.handleChangeValue=e.handleChangeValue.bind(Object(g.a)(e)),e.getList=e.getList.bind(Object(g.a)(e)),e.submitComment=e.submitComment.bind(Object(g.a)(e)),e.deleteComment=e.deleteComment.bind(Object(g.a)(e)),e.deleteCommentConfirm=e.deleteCommentConfirm.bind(Object(g.a)(e)),e.loadMore=e.loadMore.bind(Object(g.a)(e)),e.replyToComment=e.replyToComment.bind(Object(g.a)(e)),e.removeReply=e.removeReply.bind(Object(g.a)(e)),e.state={report:null,id:null,page:1,selectedChannel:null,sheetOpened:!1,commentContent:"",comments:null,access:null,replyTo:null,token:window.localStorage.getItem("token"),rnd:V.a.lib.WordArray.random(32)},e}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentWillMount",value:function(){_.on("got_instance",this.getInstance),_.on("set_instance",this.setInstance),_.on("got_list",this.getList),_.on("deleted_instance",this.getInstance)}},{key:"componentWillUnmount",value:function(){_.removeListener("got_instance",this.getInstance),_.removeListener("set_instance",this.setInstance),_.removeListener("got_list",this.getList),_.removeListener("deleted_instance",this.getInstance)}},{key:"componentDidMount",value:function(){N("reports",this.$f7route.params.reportId,this.state.token)}},{key:"getInstance",value:function(){var e=_.getIntance(),t=_.getKlass();e&&"Report"===t&&this.setState({report:e,id:e.id,comments:e.the_comments,access:e.user_access,replyTo:null})}},{key:"getList",value:function(){}},{key:"setInstance",value:function(){var e=_.getIntance(),t=_.getKlass();e&&"Report"===t&&this.setState({report:e,comments:e.the_comments,page:1}),this.$$("#cm-form-"+this.state.rnd).val("")}},{key:"loadMore",value:function(){var e=this;this.setState({page:this.state.page+1},(function(){N("reports",e.$f7route.params.reportId,e.state.token,e.state.page)}))}},{key:"fab",value:function(){if(this.state.report)return i.a.createElement(r.l,{href:"/reports/"+this.state.report.id+"/edit",target:"#main-view",position:"left-bottom",slot:"fixed",color:"lime"},i.a.createElement(r.m,{ios:"f7:edit",aurora:"f7:edit",md:"material:edit"}),i.a.createElement(r.m,{ios:"f7:close",aurora:"f7:close",md:"material:close"}))}},{key:"handleChangeValue",value:function(e){this.setState(e)}},{key:"submitComment",value:function(){T("comments",{commentable_type:"Report",commentable_id:this.state.id,content:this.state.commentContent,reply_id:this.state.replyTo},this.state.token)}},{key:"deleteCommentConfirm",value:function(e){var t=this;t.$f7.dialog.confirm(q.are_you_sure,q.alert,(function(){return t.deleteComment(e)}))}},{key:"deleteComment",value:function(e){L("comments",{id:e},this.state.token,this.state.page)}},{key:"replyToComment",value:function(e){this.setState({replyTo:e}),this.$$("#cm-form").focus()}},{key:"removeReply",value:function(){this.setState({replyTo:null})}},{key:"render",value:function(){var e=this.state,t=e.report,a=e.comments,n=e.access,s=e.replyTo,l=e.rnd;return i.a.createElement(r.s,null,i.a.createElement(r.r,{title:q.reports},i.a.createElement(r.n,{panelOpen:"right"},i.a.createElement(r.m,{f7:"bars"}))),i.a.createElement(r.d,null),this.fab(),i.a.createElement(It,{report:t,comments:a,submitComment:this.submitComment,deleteCommentConfirm:this.deleteCommentConfirm,submit:this.submit,handleChange:this.handleChangeValue,loadMore:this.loadMore,access:n,replyToComment:this.replyToComment,replyTo:s,removeReply:this.removeReply,rnd:l}))}}]),t}(n.Component),Nt=function(e){return e.reports&&e.reports.length>0?i.a.createElement(i.a.Fragment,null,i.a.createElement(r.u,{noGap:!0},e.reports.map((function(e){return i.a.createElement(r.k,{width:"100",tabletWidth:"33",key:V.a.lib.WordArray.random(16)},i.a.createElement(r.f,{className:"demo-facebook-card"},i.a.createElement(r.i,{className:"no-border"},i.a.createElement("div",{className:"demo-facebook-avatar"},i.a.createElement(r.n,{tooltip:e.profile.fullname,href:"/profiles/"+e.profile.id},i.a.createElement("img",{src:e.profile.avatar,height:"34"}))),i.a.createElement("div",{className:"demo-facebook-name "},i.a.createElement("div",{className:"demo-facebook-profile "},i.a.createElement(r.n,{className:"gray-color",href:"/profiles/"+e.profile.id},e.profile.fullname.substring(0,40))),i.a.createElement(r.n,{tooltip:q.view,className:"gray-color",href:"/reports/"+e.id},e.title.substring(0,15)+"..")),i.a.createElement("div",{className:"demo-facebook-date"})),i.a.createElement(r.g,{className:"lightgray-color fs-12"},e.content.substring(0,150)+"...",i.a.createElement("div",{className:"demo-facebook-more"},i.a.createElement(r.n,{className:"gray-color",href:"/reports/"+e.id},q.view,i.a.createElement("i",{className:"va fa fa-arrow-left mr-2"}))))))}))),i.a.createElement(r.u,{noGap:!0},i.a.createElement(r.k,null),i.a.createElement(r.k,{className:"center mb-20"},i.a.createElement("a",{className:"gray-color",onClick:function(){return e.loadMore()}},q.more)),i.a.createElement(r.k,null))):i.a.createElement("ul",null)},Lt=function(e){return i.a.createElement(r.s,{pageContent:!1},i.a.createElement(r.r,{title:q.reports},i.a.createElement(r.n,{panelOpen:"right"},i.a.createElement(r.m,{f7:"bars"})),i.a.createElement(r.x,{inner:!1},i.a.createElement(r.v,{disableButtonText:q.cancel,placeholder:q.search,onChange:function(t){e.search({query:t.target.value})}}))),i.a.createElement(r.B,{tabbar:!0,bottom:!0},i.a.createElement(r.n,{tabLink:"#tab-1",tabLinkActive:!0},i.a.createElement("i",{className:"va ml-5 fa fa-link"})),i.a.createElement(r.n,{tabLink:"#tab-2"},i.a.createElement("i",{className:"va ml-5 fa fa-plug"})),i.a.createElement(r.n,{tabLink:"#tab-3"},i.a.createElement("i",{className:"va ml-5 fa fa-user-o"}))),i.a.createElement(r.d,null),i.a.createElement(r.l,{href:"/reports/new",target:"#main-view",position:"left-bottom",slot:"fixed",color:"deeporange"},i.a.createElement(r.m,{ios:"f7:add",aurora:"f7:add",md:"material:add"}),i.a.createElement(r.m,{ios:"f7:close",aurora:"f7:close",md:"material:close"})),i.a.createElement(r.z,{swipeable:!0},i.a.createElement(r.y,{id:"tab-1",className:"page-content",tabActive:!0},i.a.createElement(r.c,null,i.a.createElement(Nt,{reports:e.reports,interaction:e.interaction,loadMore:e.loadMore}))),i.a.createElement(r.y,{id:"tab-2",className:"page-content"},i.a.createElement(r.c,null,i.a.createElement(Nt,{reports:e.reports,interaction:e.interaction,loadMore:e.loadMore}))),i.a.createElement(r.y,{id:"tab-3",className:"page-content"},i.a.createElement(r.c,null,i.a.createElement(Nt,{reports:e.reports,interaction:e.interaction,loadMore:e.loadMore})))))};function Tt(){if(window.localStorage.getItem("token"))return!0;this.$f7router.navigate("/login/")}var xt=function(e){function t(){var e;return Object(d.a)(this,t),(e=Object(f.a)(this,Object(p.a)(t).call(this))).getList=e.getList.bind(Object(g.a)(e)),e.loggedIn=Tt.bind(Object(g.a)(e)),e.interaction=e.interaction.bind(Object(g.a)(e)),e.setInstance=e.setInstance.bind(Object(g.a)(e)),e.search=e.search.bind(Object(g.a)(e)),e.loadMore=e.loadMore.bind(Object(g.a)(e)),e.state={token:window.localStorage.getItem("token"),reports:[],query:null,page:1},e}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentWillMount",value:function(){_.on("got_list",this.getList),_.on("set_instance",this.setInstance)}},{key:"componentWillUnmount",value:function(){_.removeListener("got_list",this.getList),_.removeListener("set_instance",this.setInstance)}},{key:"componentDidMount",value:function(){this.loggedIn(),this.loadData()}},{key:"loadData",value:function(){w("reports",this.state.page,{},this.state.token)}},{key:"search",value:function(e){var t=this;this.setState({reports:[],page:1}),this.setState(e,(function(){w("reports/search",t.state.page,{q:t.state.query})}))}},{key:"setInstance",value:function(){var e=_.getIntance();e&&this.setState({reports:this.state.reports.map((function(t){return t.id===e.id?Object.assign({},t,e):t}))})}},{key:"loadMore",value:function(){var e=this;this.state.query&&this.state.query.length>0?this.setState({page:this.state.page+1},(function(){w("reports/search",e.state.page,{q:e.state.query},e.state.token)})):this.setState({page:this.state.page+1},(function(){w("reports",e.state.page,{},e.state.token)}))}},{key:"getList",value:function(){var e=_.getList(),t=_.getKlass();e.length>0&&"Report"===t&&this.setState({reports:this.state.reports.concat(e)})}},{key:"interaction",value:function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s={interaction_type:e,interactionable_id:t,interactionable_type:a,source_type:n,source_id:i};T("interactions",s,this.state.token)}},{key:"render",value:function(){var e=this.state.reports;return i.a.createElement(Lt,{interaction:this.interaction,loadMore:this.loadMore,reports:e,search:this.search})}}]),t}(i.a.Component),Dt=(a(412),a(413),a(165)),At=a.n(Dt),$t=O.server,Mt=function(e){return i.a.createElement(r.f,null,i.a.createElement(r.i,null,q.attachment),i.a.createElement(r.g,null,i.a.createElement(At.a,{getUploadParams:function(t){t.meta;return{fields:{"upload[title]":e.title,"upload[uuid]":e.uuid},url:$t+"/uploads"}},onChangeStatus:function(e,t){var a=e.meta,n=e.file;console.log(t,a,n)},onSubmit:function(e,t){console.log(e.map((function(e){return e.meta}))),t.forEach((function(e){return e.remove()}))},autoUpload:!0,submitButtonDisabled:!0,inputContent:q.drag_or_browse})))},Wt=a(166),Vt=a.n(Wt),Rt=function(e){return e.report?i.a.createElement(i.a.Fragment,null,i.a.createElement(r.f,null,i.a.createElement(r.i,null,q.new_report),i.a.createElement(r.o,null,i.a.createElement(r.p,{label:q.title+"*",type:"text",placeholder:"...",maxlength:"65",defaultValue:e.title,onInput:function(t){e.handleChange({title:t.target.value})}}),i.a.createElement(wt.Editor,{editorState:e.editorState,placeholder:q.content,localization:{locale:"fa",translations:Vt.a},toolbar:{options:["inline","list","link"],inline:{options:["bold","italic","underline"]},image:{uploadCallback:e.uploadImageCallBack,previewImage:!0}},onEditorStateChange:e.onEditorStateChange})),i.a.createElement(r.h,null,function(){if(e.editing)return i.a.createElement(r.k,null,i.a.createElement(r.e,{className:"col btn ml-5",outline:!0,color:"red",disabled:!e.editing,onClick:function(){return e.deleteReportConfirm()}},q.delete))}(),i.a.createElement(r.n,null),i.a.createElement(r.n,{className:"btn-notice"}),i.a.createElement(r.e,{className:"col btn",fill:!0,onClick:function(t){return e.submit(t)}},q.submit))),i.a.createElement(Mt,{uploadableType:"Report",uuid:e.uuid})):null};function qt(e){return new Promise((function(t,a){var n=new XMLHttpRequest;n.open("POST",O.server+"/uploads"),n.setRequestHeader("Authorization","Client-ID 8d26ccd12712fca");var i=new FormData;i.append("upload[image]",e),n.send(i),n.addEventListener("load",(function(){var e=JSON.parse(n.responseText);t(e)})),n.addEventListener("error",(function(){var e=JSON.parse(n.responseText);a(e)}))}))}var Pt=function(e){function t(){var e;return Object(d.a)(this,t),(e=Object(f.a)(this,Object(p.a)(t).call(this))).submit=e.submit.bind(Object(g.a)(e)),e.setInstance=e.setInstance.bind(Object(g.a)(e)),e.handleChangeValue=e.handleChangeValue.bind(Object(g.a)(e)),e.onEditorStateChange=e.onEditorStateChange.bind(Object(g.a)(e)),e.getList=e.getList.bind(Object(g.a)(e)),e.uploadImageCallBack=qt.bind(Object(g.a)(e)),e.state={report:{},editorState:jt.EditorState.createEmpty(),token:window.localStorage.getItem("token"),title:null,interaction:null,uuid:V.a.enc.Base64.stringify(V.a.lib.WordArray.random(16)),page:0},e}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentWillMount",value:function(){_.on("set_instance",this.setInstance),_.on("got_list",this.getList)}},{key:"componentWillUnmount",value:function(){_.removeListener("set_instance",this.setInstance),_.removeListener("got_list",this.getList)}},{key:"submit",value:function(){this.$$(".btn").hide(),this.$$(".btn-notice").text(q.submitting);var e=Object(jt.convertToRaw)(this.state.editorState.getCurrentContent()).blocks.map((function(e){return e.text.trim()?e.text:"\n"})).join("\n"),t=null,a=null;"tasks"==this.$f7route.params.callerType&&(t=this.$f7route.params.callerId),"works"==this.$f7route.params.callerType&&(a=this.$f7route.params.callerId);var n={task_id:t,work_id:a,uuid:this.state.uuid,title:this.state.title,content:e,draft:Object(jt.convertToRaw)(this.state.editorState.getCurrentContent())};if(this.state.title)T("reports",n,this.state.token);else{this.$f7.dialog.alert(q.incomplete_data,q.alert)}}},{key:"onEditorStateChange",value:function(e){this.setState({editorState:e})}},{key:"handleChangeValue",value:function(e){this.setState(e)}},{key:"componentDidMount",value:function(){this.loadData()}},{key:"loadData",value:function(){}},{key:"componentDidUpdate",value:function(e,t){}},{key:"getList",value:function(){}},{key:"setInstance",value:function(){var e=_.getIntance(),t=_.getKlass();e&&"Report"===t&&(this.$$(".btn").show(),this.$f7router.navigate("/reports/"+e.id))}},{key:"render",value:function(){var e=this.state,t=e.report,a=e.editorState,n=e.uuid;return i.a.createElement(r.s,null,i.a.createElement(r.r,{title:q.report_form,backLink:q.back}),i.a.createElement(Rt,{report:t,uuid:n,editorState:a,onEditorStateChange:this.onEditorStateChange,submit:this.submit,handleChange:this.handleChangeValue,uploadImageCallBack:this.uploadImageCallBack}))}}]),t}(n.Component),Ft=function(e){function t(){var e;return Object(d.a)(this,t),(e=Object(f.a)(this,Object(p.a)(t).call(this))).submit=e.submit.bind(Object(g.a)(e)),e.setInstance=e.setInstance.bind(Object(g.a)(e)),e.getInstance=e.getInstance.bind(Object(g.a)(e)),e.handleChangeValue=e.handleChangeValue.bind(Object(g.a)(e)),e.onEditorStateChange=e.onEditorStateChange.bind(Object(g.a)(e)),e.getList=e.getList.bind(Object(g.a)(e)),e.removeAttachment=e.removeAttachment.bind(Object(g.a)(e)),e.deleteInstance=e.deleteInstance.bind(Object(g.a)(e)),e.deleteReportConfirm=e.deleteReportConfirm.bind(Object(g.a)(e)),e.deleteReport=e.deleteReport.bind(Object(g.a)(e)),e.state={report:null,editorState:jt.EditorState.createEmpty(),token:window.localStorage.getItem("token"),uuid:V.a.enc.Base64.stringify(V.a.lib.WordArray.random(16)),id:null,title:null,draft:null,taskId:null,workId:null,page:0},e}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentWillMount",value:function(){_.on("got_instance",this.getInstance),_.on("set_instance",this.setInstance),_.on("got_list",this.getList),_.on("deleted_instance",this.deleteInstance)}},{key:"componentWillUnmount",value:function(){_.removeListener("got_instance",this.getInstance),_.removeListener("set_instance",this.setInstance),_.removeListener("got_list",this.getList),_.removeListener("deleted_instance",this.deleteInstance)}},{key:"submit",value:function(){var e=Object(jt.convertToRaw)(this.state.editorState.getCurrentContent()).blocks.map((function(e){return e.text.trim()?e.text:"\n"})).join("\n"),t=null,a=null;this.state.task&&(t=this.state.task.id),this.state.work&&(a=this.state.work.id),x("reports",{id:this.state.id,task_id:t,work_id:a,uuid:this.state.uuid,title:this.state.title,content:e,draft:Object(jt.convertToRaw)(this.state.editorState.getCurrentContent())},this.state.token)}},{key:"componentDidMount",value:function(){this.loadData()}},{key:"loadData",value:function(){o.a.instance.toast.show({text:q.receiving,closeTimeout:2e3,position:"top"}),this.$f7route.params.reportId&&N("reports",this.$f7route.params.reportId,this.state.token)}},{key:"getList",value:function(){}},{key:"getInstance",value:function(){var e=_.getIntance(),t=_.getKlass();if(e&&"Report"===t){var a=Object(jt.convertFromRaw)(e.draft),n=jt.EditorState.createWithContent(a);this.setState({report:e,title:e.title,id:e.id,task:e.the_task,work:e.the_work,attachments:e.attachments,editorState:n})}console.log(e)}},{key:"handleChangeValue",value:function(e){this.setState(e)}},{key:"onEditorStateChange",value:function(e){this.setState({editorState:e})}},{key:"removeAttachment",value:function(e){this.setState({attachments:this.state.attachments.filter((function(t){return t.id!==e}))}),L("uploads",{id:e},this.state.token,this.state.page)}},{key:"setInstance",value:function(){var e=_.getIntance(),t=_.getKlass();e&&"Report"===t&&this.$f7router.navigate("/reports/"+e.id)}},{key:"deleteReportConfirm",value:function(){this.$f7.dialog.confirm(q.are_you_sure,q.alert,this.deleteReport)}},{key:"deleteReport",value:function(){L("reports",{id:this.state.id},this.state.token)}},{key:"deleteInstance",value:function(){this.state.task&&this.$f7router.navigate("/tasks/"+this.state.task.id),this.state.work&&this.$f7router.navigate("/works/"+this.state.work.id)}},{key:"render",value:function(){var e=this.state,t=e.report,a=e.editorState,n=e.uuid,s=e.title,l=e.attachments;return i.a.createElement(r.s,null,i.a.createElement(r.r,{title:q.report,backLink:q.back}),i.a.createElement(r.d,null,q.workflow_form),i.a.createElement(Rt,{report:t,attachments:l,title:s,uuid:n,editorState:a,editing:!0,deleteReportConfirm:this.deleteReportConfirm,onEditorStateChange:this.onEditorStateChange,submit:this.submit,handleChange:this.handleChangeValue,removeAttachment:this.removeAttachment}))}}]),t}(n.Component),Ut=function(e){return e.group?i.a.createElement(i.a.Fragment,null,i.a.createElement(r.d,null,q.title),i.a.createElement(r.o,{"simple-list":!0},i.a.createElement(r.q,null,e.group.title)),i.a.createElement(r.o,{className:"fs-11"},e.group.the_grouping.map((function(e){return i.a.createElement(r.q,{key:"involvement"+e.profile.id,title:e.profile.fullname,after:""},i.a.createElement("img",{slot:"media",src:e.profile.avatar,width:"27",height:"27"}))})))):null},Bt=function(e){function t(){var e;return Object(d.a)(this,t),(e=Object(f.a)(this,Object(p.a)(t).call(this))).getInstance=e.getInstance.bind(Object(g.a)(e)),e.submit=e.submit.bind(Object(g.a)(e)),e.handleChangeValue=e.handleChangeValue.bind(Object(g.a)(e)),e.state={token:window.localStorage.getItem("token"),group:null,id:null,user_id:null},e}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentWillMount",value:function(){_.on("got_instance",this.getInstance),_.on("set_instance",this.getInstance),_.on("deleted_instance",this.getInstance)}},{key:"componentWillUnmount",value:function(){_.removeListener("got_instance",this.getInstance),_.removeListener("set_instance",this.getInstance),_.removeListener("deleted_instance",this.getInstance)}},{key:"componentDidMount",value:function(){N("groups",this.$f7route.params.groupId,this.state.token)}},{key:"getInstance",value:function(){var e=_.getIntance(),t=_.getKlass();e&&"Group"===t&&this.setState({group:e,id:e.id}),this.$$(".btn").show()}},{key:"submit",value:function(){this.$$(".btn").hide(),this.$$(".btn-notice").text(q.submitting),T("users/assignments",{group_id:this.state.id,user_id:this.state.user_id},this.state.token)}},{key:"handleChangeValue",value:function(e){this.setState(e)}},{key:"fab",value:function(){if(this.state.group)return i.a.createElement(r.l,{href:"/groups/"+this.state.group.id+"/edit",target:"#main-view",position:"left-bottom",slot:"fixed",color:"lime"},i.a.createElement(r.m,{ios:"f7:edit",aurora:"f7:edit",md:"material:edit"}),i.a.createElement(r.m,{ios:"f7:close",aurora:"f7:close",md:"material:close"}))}},{key:"render",value:function(){var e=this.state.group;return i.a.createElement(r.s,null,i.a.createElement(r.r,{title:q.groups,backLink:q.back}),i.a.createElement(r.d,null),this.fab(),i.a.createElement(Ut,{group:e,submit:this.submit,handleChange:this.handleChangeValue}))}}]),t}(n.Component),Kt=function(e){return e.groups?i.a.createElement(r.o,{mediaList:!0},e.groups.map((function(e){return i.a.createElement(r.q,{key:V.a.lib.WordArray.random(32),link:"/groups/"+e.id,ignoreCache:!0,title:e.title,after:"",subtitle:"",text:""})}))):i.a.createElement("ul",null)},Gt=function(e){return i.a.createElement(r.s,null,i.a.createElement(r.r,{title:q.groups,backLink:q.back}),i.a.createElement(r.d,null,q.list),i.a.createElement(r.l,{href:"/groups/new",target:"#main-view",position:"left-bottom",slot:"fixed",color:"deeporange"},i.a.createElement(r.m,{ios:"f7:add",aurora:"f7:add",md:"material:add"}),i.a.createElement(r.m,{ios:"f7:close",aurora:"f7:close",md:"material:close"})),i.a.createElement(Kt,{groups:e.groups}))},zt=function(e){function t(){var e;return Object(d.a)(this,t),(e=Object(f.a)(this,Object(p.a)(t).call(this))).getList=e.getList.bind(Object(g.a)(e)),e.state={token:window.localStorage.getItem("token"),groups:null},e}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentWillMount",value:function(){_.on("got_list",this.getList)}},{key:"componentWillUnmount",value:function(){_.removeListener("got_list",this.getList)}},{key:"componentDidMount",value:function(){this.loadData()}},{key:"loadData",value:function(){o.a.instance.toast.show({text:q.receiving,closeTimeout:2e3,position:"top"}),w("groups",this.state.page,{},this.state.token)}},{key:"getList",value:function(){var e=_.getList(),t=_.getKlass();e&&"Group"===t&&this.setState({groups:e})}},{key:"render",value:function(){var e=this.state.groups;return i.a.createElement(Gt,{groups:e})}}]),t}(i.a.Component),Ht=function(e){return console.log(e),i.a.createElement(i.a.Fragment,null,i.a.createElement(r.d,null,q.group),i.a.createElement(r.o,null,i.a.createElement(r.p,{label:q.title,type:"text",placeholder:"...",defaultValue:e.title,onInput:function(t){e.handleChange({title:t.target.value})}}),i.a.createElement(r.q,{title:function(){var t=[i.a.createElement("div",null,i.a.createElement("a",{className:"fs-11 ",href:"#",id:"time-sheet-grouping"},i.a.createElement("div",{className:"item-title fs-11"},i.a.createElement("i",{className:"va-minus-2 ml-5 fa fa-user-plus"}),q.profiles,":")))];return e.grouping&&e.grouping.map((function(a){t.push(i.a.createElement(r.j,{text:a.fullname,deleteable:!0,onClick:function(){return e.removeGrouping(a.id)}}))})),t}()})),i.a.createElement(r.c,{strong:!0},i.a.createElement(r.u,{tag:"p"},i.a.createElement(r.n,{className:"btn-notice"}),i.a.createElement(r.e,{className:"col btn",fill:!0,disabled:!e.editing,onClick:e.submit},q.submit))))},Jt=function(e){function t(){var e;return Object(d.a)(this,t),(e=Object(f.a)(this,Object(p.a)(t).call(this))).submit=e.submit.bind(Object(g.a)(e)),e.setInstance=e.setInstance.bind(Object(g.a)(e)),e.handleChangeValue=e.handleChangeValue.bind(Object(g.a)(e)),e.loadGrouping=e.loadGrouping.bind(Object(g.a)(e)),e.removeGrouping=e.removeGrouping.bind(Object(g.a)(e)),e.state={token:window.localStorage.getItem("token"),group:{},grouping:[]},e}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentWillMount",value:function(){_.on("set_instance",this.setInstance)}},{key:"componentWillUnmount",value:function(){_.removeListener("set_instance",this.setInstance)}},{key:"submit",value:function(){T("groups",{title:this.state.title,grouping:this.state.grouping},this.state.token)}},{key:"handleChangeValue",value:function(e){this.setState(e)}},{key:"setInstance",value:function(){this.$f7router.navigate("/groups/")}},{key:"removeGrouping",value:function(e){this.setState({grouping:this.state.grouping.filter((function(t){return t.id!==e}))})}},{key:"pageAfterIn",value:function(){this.loadGrouping()}},{key:"loadGrouping",value:function(){var e=this,t=e.$f7;t.autocomplete.create({openIn:"popup",openerEl:"#time-sheet-grouping",multiple:!0,valueProperty:"id",textProperty:"fullname",searchbarDisableText:q.cancel,popupCloseLinkText:q.close,notFoundText:q.not_found,limit:50,searchbarPlaceholder:q.search,source:function(e,a){var n=[];0!==e.length?t.request({url:O.server+"/profiles/search",method:"GET",dataType:"json",data:{q:e},success:function(e){for(var t=0;t<e.data.length;t++)n.push(e.data[t]);a(n)}}):a(n)},on:{change:function(t){t&&t[t.length-1]&&e.setState({grouping:e.state.grouping.concat({fullname:t[t.length-1].fullname,id:t[t.length-1].id})})}}})}},{key:"render",value:function(){var e=this.state,t=e.group,a=e.grouping;return i.a.createElement(r.s,{onPageAfterIn:this.pageAfterIn.bind(this)},i.a.createElement(r.r,{title:q.group_form,backLink:q.back}),i.a.createElement(r.d,null,q.group_form),i.a.createElement(Ht,{group:t,submit:this.submit,editing:!0,grouping:a,handleChange:this.handleChangeValue,removeGrouping:this.removeGrouping}))}}]),t}(n.Component),Qt=function(e){function t(){var e;return Object(d.a)(this,t),(e=Object(f.a)(this,Object(p.a)(t).call(this))).submit=e.submit.bind(Object(g.a)(e)),e.setInstance=e.setInstance.bind(Object(g.a)(e)),e.handleChangeValue=e.handleChangeValue.bind(Object(g.a)(e)),e.loadGrouping=e.loadGrouping.bind(Object(g.a)(e)),e.removeGrouping=e.removeGrouping.bind(Object(g.a)(e)),e.getInstance=e.getInstance.bind(Object(g.a)(e)),e.state={token:window.localStorage.getItem("token"),group:{},title:null,id:null,grouping:[]},e}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentWillMount",value:function(){_.on("got_instance",this.getInstance),_.on("set_instance",this.setInstance)}},{key:"componentWillUnmount",value:function(){_.removeListener("got_instance",this.getInstance),_.removeListener("set_instance",this.setInstance)}},{key:"componentDidMount",value:function(){N("groups",this.$f7route.params.groupId,this.state.token)}},{key:"submit",value:function(){x("groups",{id:this.state.id,title:this.state.title,grouping:this.state.grouping},this.state.token)}},{key:"handleChangeValue",value:function(e){this.setState(e)}},{key:"setInstance",value:function(){this.$f7router.navigate("/groups/")}},{key:"removeGrouping",value:function(e){this.setState({grouping:this.state.grouping.filter((function(t){return t.id!==e}))})}},{key:"pageAfterIn",value:function(){this.loadGrouping()}},{key:"getInstance",value:function(){var e=_.getIntance(),t=_.getKlass();e&&"Group"===t&&this.setState({group:e,id:e.id,title:e.title,grouping:e.tag_grouping})}},{key:"loadGrouping",value:function(){var e=this,t=e.$f7;t.autocomplete.create({openIn:"popup",openerEl:"#time-sheet-grouping",multiple:!0,valueProperty:"id",textProperty:"fullname",searchbarDisableText:q.cancel,popupCloseLinkText:q.close,notFoundText:q.not_found,limit:50,searchbarPlaceholder:q.search,source:function(e,a){var n=[];0!==e.length?t.request({url:O.server+"/profiles/search",method:"GET",dataType:"json",data:{q:e},success:function(e){for(var t=0;t<e.data.length;t++)n.push(e.data[t]);a(n)}}):a(n)},on:{change:function(t){t&&t[t.length-1]&&e.setState({grouping:e.state.grouping.concat({fullname:t[t.length-1].fullname,id:t[t.length-1].id})})}}})}},{key:"render",value:function(){var e=this.state,t=e.group,a=e.grouping,n=e.title,s=e.id;return i.a.createElement(r.s,{onPageAfterIn:this.pageAfterIn.bind(this)},i.a.createElement(r.r,{title:q.group_form,backLink:q.back}),i.a.createElement(r.d,null,q.group_form),i.a.createElement(Ht,{group:t,submit:this.submit,editing:!0,grouping:a,id:s,title:n,handleChange:this.handleChangeValue,removeGrouping:this.removeGrouping}))}}]),t}(n.Component),Yt=function(e){return e.surveillances?i.a.createElement(r.o,{mediaList:!0},e.surveillances.map((function(e){return i.a.createElement(r.q,null,i.a.createElement("video",{autoPlay:!0,controls:!0,playsInline:!0,loop:!0,src:e.link,width:"640"}))}))):i.a.createElement("ul",null)},Xt=function(e){return i.a.createElement(r.s,null,i.a.createElement(r.r,{title:q.surveillances,backLink:q.back}),i.a.createElement(r.c,null,i.a.createElement(r.u,null,i.a.createElement(r.k,{width:"25",className:"ml-4"},i.a.createElement(r.e,{fill:!0,onClick:e.startRecording},i.a.createElement("i",{class:"fa fa-play ml-4","aria-hidden":"true"}),q.start)),i.a.createElement(r.k,{width:"25"},i.a.createElement(r.e,{fill:!0,onClick:function(){e.stream&&e.stream.getVideoTracks()[0]&&(e.stream.getVideoTracks()[0].stop(),e.stopRecording())}},i.a.createElement("i",{class:"fa fa-stop ml-4","aria-hidden":"true"}),q.stop)),i.a.createElement(r.k,{width:"25"},i.a.createElement(r.e,{fill:!0,onClick:e.uploadFromDb},i.a.createElement("i",{class:"fa fa-up ml-4","aria-hidden":"true"}),q.stop)),i.a.createElement(r.k,{width:"25"})),i.a.createElement("video",{autoPlay:!0,playsInline:!0,loop:!0,src:e.videoSrc,width:"640"})),i.a.createElement(r.d,null,q.list),i.a.createElement(Yt,{surveillances:e.surveillances}))},Zt=function(e){function t(){var e;return Object(d.a)(this,t),(e=Object(f.a)(this,Object(p.a)(t).call(this))).getList=e.getList.bind(Object(g.a)(e)),e.startRecording=e.startRecording.bind(Object(g.a)(e)),e.addScreenCastDb=e.addScreenCastDb.bind(Object(g.a)(e)),e.uploadFromDb=e.uploadFromDb.bind(Object(g.a)(e)),e.stopRecording=e.stopRecording.bind(Object(g.a)(e)),e.state={token:window.localStorage.getItem("token"),surveillances:null,chunks:[],stream:null,recorder:null,videoSrc:null,startTime:null,endTime:null,db:null,sessionId:null},e}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentWillMount",value:function(){_.on("got_list",this.getList)}},{key:"componentWillUnmount",value:function(){_.removeListener("got_list",this.getList)}},{key:"componentDidMount",value:function(){this.loadData()}},{key:"loadData",value:function(){o.a.instance.toast.show({text:q.receiving,closeTimeout:2e3,position:"top"}),w("surveillances",this.state.page,{},this.state.token)}},{key:"stopRecording",value:function(){clearInterval(window.intervalHandle)}},{key:"startRecording",value:function(){var e=Object(m.a)(u.a.mark((function e(){var t,a,n,i,s,l=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this,a=navigator.mediaDevices.getSupportedConstraints(),console.log(a),this.setState({sessionId:V.a.lib.WordArray.random(32)}),e.next=6,navigator.mediaDevices.getDisplayMedia({video:{mediaSource:"screen",frameRate:6,width:768,height:480}});case 6:n=e.sent,this.setState({stream:n}),this.setState({startTime:new Date}),i=new MediaRecorder(n),t=this,s=[],window.intervalHandle=null,window.intervalHandle=setInterval((function(){"inactive"!==i.state&&i.stop(),setTimeout((function(){try{i.start()}catch(e){}}),2e3)}),3e3),n.getVideoTracks()[0].onended=function(e){clearInterval(window.intervalHandle)},i.ondataavailable=function(e){s.push(e.data)},i.onpause=function(e){console.log(e.data)},i.onstop=function(e){var a=new Blob(s,{type:s[0].type});l.addScreenCastDb(a,t.state.sessionId)};case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addScreenCastDb",value:function(e,t){var a=window.indexedDB||window.webkitIndexedDB||window.mozIndexedDB||window.OIndexedDB||window.msIndexedDB,n=(window.IDBTransaction||window.webkitIDBTransaction||window.OIDBTransaction||window.msIDBTransaction,a.open("screenCastFiles",3));n.onsuccess=function(a){console.log("Success creating/accessing IndexedDB database");var i=n.result;i.onerror=function(e){console.log("Error creating/accessing IndexedDB database")};var s=i.transaction(["screenCastFiles"],"readwrite");console.log("added"),s.objectStore("screenCastFiles").put({blob:e,sessionId:t})},n.onupgradeneeded=function(e){var t=e.target.result;console.log("running onupgradeneeded"),t.objectStoreNames.contains("screenCastFiles")||(console.log("I need to make the screenCast objectstore"),t.createObjectStore("screenCastFiles",{autoIncrement:!0}))}}},{key:"uploadFromDb",value:function(){var e=this;console.log("Started");var t=window.indexedDB||window.webkitIndexedDB||window.mozIndexedDB||window.OIndexedDB||window.msIndexedDB,a=(window.IDBTransaction||window.webkitIDBTransaction||window.OIDBTransaction||window.msIDBTransaction,t.open("screenCastFiles",2));a.onsuccess=function(t){console.log("Success creating/accessing IndexedDB database");var n=a.result;n.onerror=function(e){console.log("Error creating/accessing IndexedDB database")};n.transaction(["screenCast"],"readwrite").objectStore("screenCast").getAll().onsuccess=function(t){console.log(t.target.result),window.ConcatenateBlobs(t.target.result,"video/x-matroska;codecs=avc1",(function(t){console.log(t),e.setState({videoSrc:URL.createObjectURL(t)})}))}}}},{key:"getList",value:function(){var e=_.getList(),t=_.getKlass();e&&"Surveillance"===t&&this.setState({surveillances:e})}},{key:"render",value:function(){var e=this.state,t=e.surveillances,a=e.stream,n=e.videoSrc;return i.a.createElement(Xt,{videoSrc:n,stream:a,surveillances:t,uploadFromDb:this.uploadFromDb,stopRecording:this.stopRecording,startRecording:this.startRecording})}}]),t}(i.a.Component),ea=function(e){var t=function(t){return!(!e.notification_setting||!e.notification_setting[t])||(e.notification_setting&&e.notification_setting[t],!1)};return i.a.createElement(i.a.Fragment,null,i.a.createElement(r.o,{form:!0,className:"fs-11"},i.a.createElement(r.q,null,i.a.createElement("span",null,q.private),i.a.createElement(r.A,{className:"pd-5",onChange:function(t){return e.changeSetting(t,"")}}),i.a.createElement("span",{className:"pd-10 fs-8"},q.if_someone_adds_you_youll_be_asked))),i.a.createElement(r.o,null,i.a.createElement(r.q,{title:q.blocked_list}),i.a.createElement(r.q,{title:function(){var t=[i.a.createElement("div",null,i.a.createElement("a",{className:"fs-11 ",href:"#",id:"user-blocklist"},i.a.createElement("div",{className:"item-title fs-11"},i.a.createElement("i",{className:"va-minus-2 ml-5 fa fa-user-plus"}),q.profiles,":")))];return e.blockList&&e.blockList.map((function(a){t.push(i.a.createElement(r.j,{text:a.fullname,deleteable:!0,onClick:function(){return e.removeBlocked(a.id)}}))})),t}()})),i.a.createElement("div",{className:"data-table card"},i.a.createElement("table",{className:"fs-11"},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("td",null,q.notification_type),i.a.createElement("td",null,q.mail_notification),i.a.createElement("td",null,q.push_notification),i.a.createElement("td",null,q.sms))),i.a.createElement("tbody",null,i.a.createElement("tr",null,i.a.createElement("td",{className:"fs-11"},q.add_involvement_to_tasks),i.a.createElement("td",null,i.a.createElement(r.A,{className:"pd-5",checked:t("add_involvement_to_tasks_email"),onChange:function(t){return e.changeSetting(t,"add_involvement_to_tasks_email")}})),i.a.createElement("td",null,i.a.createElement(r.A,{className:"pd-5",checked:t("add_involvement_to_tasks_push"),onChange:function(t){return e.changeSetting(t,"add_involvement_to_tasks_push")}})),i.a.createElement("td",null,i.a.createElement(r.A,{className:"pd-5",checked:t("add_involvement_to_tasks_sms"),onChange:function(t){return e.changeSetting(t,"add_involvement_to_tasks_sms")}}))),i.a.createElement("tr",null,i.a.createElement("td",{className:"fs-11"},q.remove_involvement_from_tasks),i.a.createElement("td",null,i.a.createElement(r.A,{className:"pd-5",checked:t("remove_involvement_from_tasks_email"),onChange:function(t){return e.changeSetting(t,"remove_involvement_from_tasks_email")}})),i.a.createElement("td",null,i.a.createElement(r.A,{className:"pd-5",checked:t("remove_involvement_from_tasks_push"),onChange:function(t){return e.changeSetting(t,"remove_involvement_from_tasks_push")}})),i.a.createElement("td",null,i.a.createElement(r.A,{className:"pd-5",checked:t("remove_involvement_from_tasks_sms"),onChange:function(t){return e.changeSetting(t,"remove_involvement_from_tasks_sms")}}))),i.a.createElement("tr",null,i.a.createElement("td",{className:"fs-11"},q.change_status_tasks),i.a.createElement("td",null,i.a.createElement(r.A,{className:"pd-5",checked:t("change_status_tasks_email"),onChange:function(t){return e.changeSetting(t,"change_status_tasks_email")}})),i.a.createElement("td",null,i.a.createElement(r.A,{className:"pd-5",checked:t("change_status_tasks_push"),onChange:function(t){return e.changeSetting(t,"change_status_tasks_push")}})),i.a.createElement("td",null,i.a.createElement(r.A,{className:"pd-5",checked:t("change_status_tasks_sms"),onChange:function(t){return e.changeSetting(t,"change_status_tasks_sms")}}))),i.a.createElement("tr",null,i.a.createElement("td",{className:"fs-11"},q.add_works_to_tasks),i.a.createElement("td",null,i.a.createElement(r.A,{className:"pd-5",checked:t("add_works_to_tasks_email"),onChange:function(t){return e.changeSetting(t,"add_works_to_tasks_email")}})),i.a.createElement("td",null,i.a.createElement(r.A,{className:"pd-5",checked:t("add_works_to_tasks_push"),onChange:function(t){return e.changeSetting(t,"add_works_to_tasks_push")}})),i.a.createElement("td",null,i.a.createElement(r.A,{className:"pd-5",checked:t("add_works_to_tasks_sms"),onChange:function(t){return e.changeSetting(t,"add_works_to_tasks_sms")}}))),i.a.createElement("tr",null,i.a.createElement("td",{className:"fs-11"},q.add_reports_to_tasks),i.a.createElement("td",null,i.a.createElement(r.A,{className:"pd-5",checked:t("add_reports_to_tasks_email"),onChange:function(t){return e.changeSetting(t,"add_reports_to_tasks_email")}})),i.a.createElement("td",null,i.a.createElement(r.A,{className:"pd-5",checked:t("add_reports_to_tasks_push"),onChange:function(t){return e.changeSetting(t,"add_reports_to_tasks_push")}})),i.a.createElement("td",null,i.a.createElement(r.A,{className:"pd-5",checked:t("add_reports_to_tasks_sms"),onChange:function(t){return e.changeSetting(t,"add_reports_to_tasks_sms")}}))),i.a.createElement("tr",null,i.a.createElement("td",{className:"fs-11"},q.add_comments_to_tasks),i.a.createElement("td",null,i.a.createElement(r.A,{className:"pd-5",checked:t("add_comments_to_tasks_email"),onChange:function(t){return e.changeSetting(t,"add_comments_to_tasks_email")}})),i.a.createElement("td",null,i.a.createElement(r.A,{className:"pd-5",checked:t("add_comments_to_tasks_push"),onChange:function(t){return e.changeSetting(t,"add_comments_to_tasks_push")}})),i.a.createElement("td",null,i.a.createElement(r.A,{className:"pd-5",checked:t("add_comments_to_tasks_sms"),onChange:function(t){return e.changeSetting(t,"add_comments_to_tasks_sms")}}))),i.a.createElement("tr",null,i.a.createElement("td",null),i.a.createElement("td",null),i.a.createElement("td",null),i.a.createElement("td",null)),i.a.createElement("tr",null,i.a.createElement("td",{className:"fs-11"},q.add_involvement_to_works),i.a.createElement("td",null,i.a.createElement(r.A,{className:"pd-5",checked:t("add_involvement_to_works_email"),onChange:function(t){return e.changeSetting(t,"add_involvement_to_works_email")}})),i.a.createElement("td",null,i.a.createElement(r.A,{className:"pd-5",checked:t("add_involvement_to_works_push"),onChange:function(t){return e.changeSetting(t,"add_involvement_to_works_push")}})),i.a.createElement("td",null,i.a.createElement(r.A,{className:"pd-5",checked:t("add_involvement_to_works_sms"),onChange:function(t){return e.changeSetting(t,"add_involvement_to_works_sms")}}))),i.a.createElement("tr",null,i.a.createElement("td",{className:"fs-11"},q.remove_involvement_from_works),i.a.createElement("td",null,i.a.createElement(r.A,{className:"pd-5",checked:t("remove_involvement_from_works_email"),onChange:function(t){return e.changeSetting(t,"remove_involvement_from_works_email")}})),i.a.createElement("td",null,i.a.createElement(r.A,{className:"pd-5",checked:t("remove_involvement_from_works_push"),onChange:function(t){return e.changeSetting(t,"remove_involvement_from_works_push")}})),i.a.createElement("td",null,i.a.createElement(r.A,{className:"pd-5",checked:t("remove_involvement_from_works_sms"),onChange:function(t){return e.changeSetting(t,"remove_involvement_from_works_sms")}}))),i.a.createElement("tr",null,i.a.createElement("td",{className:"fs-11"},q.change_status_works),i.a.createElement("td",null,i.a.createElement(r.A,{className:"pd-5",checked:t("change_status_works_email"),onChange:function(t){return e.changeSetting(t,"change_status_works_email")}})),i.a.createElement("td",null,i.a.createElement(r.A,{className:"pd-5",checked:t("change_status_works_push"),onChange:function(t){return e.changeSetting(t,"change_status_works_push")}})),i.a.createElement("td",null,i.a.createElement(r.A,{className:"pd-5",checked:t("change_status_works_sms"),onChange:function(t){return e.changeSetting(t,"change_status_works_sms")}}))),i.a.createElement("tr",null,i.a.createElement("td",{className:"fs-11"},q.add_todos_to_works),i.a.createElement("td",null,i.a.createElement(r.A,{className:"pd-5",checked:t("add_todos_to_works_email"),onChange:function(t){return e.changeSetting(t,"add_todos_to_works_email")}})),i.a.createElement("td",null,i.a.createElement(r.A,{className:"pd-5",checked:t("add_todos_to_works_push"),onChange:function(t){return e.changeSetting(t,"add_todos_to_works_push")}})),i.a.createElement("td",null,i.a.createElement(r.A,{className:"pd-5",checked:t("add_todos_to_works_sms"),onChange:function(t){return e.changeSetting(t,"add_todos_to_works_sms")}}))),i.a.createElement("tr",null,i.a.createElement("td",{className:"fs-11"},q.add_reports_to_works),i.a.createElement("td",null,i.a.createElement(r.A,{className:"pd-5",checked:t("add_reports_to_works_email"),onChange:function(t){return e.changeSetting(t,"add_reports_to_works_email")}})),i.a.createElement("td",null,i.a.createElement(r.A,{className:"pd-5",checked:t("add_reports_to_works_push"),onChange:function(t){return e.changeSetting(t,"add_reports_to_works_push")}})),i.a.createElement("td",null,i.a.createElement(r.A,{className:"pd-5",checked:t("add_reports_to_works_sms"),onChange:function(t){return e.changeSetting(t,"add_reports_to_works_sms")}}))),i.a.createElement("tr",null,i.a.createElement("td",{className:"fs-11"},q.add_comments_to_works),i.a.createElement("td",null,i.a.createElement(r.A,{className:"pd-5",checked:t("add_comments_to_works_email"),onChange:function(t){return e.changeSetting(t,"add_comments_to_works_email")}})),i.a.createElement("td",null,i.a.createElement(r.A,{className:"pd-5",checked:t("add_comments_to_works_push"),onChange:function(t){return e.changeSetting(t,"add_comments_to_works_push")}})),i.a.createElement("td",null,i.a.createElement(r.A,{className:"pd-5",checked:t("add_comments_to_works_sms"),onChange:function(t){return e.changeSetting(t,"add_comments_to_works_sms")}}))),i.a.createElement("tr",null,i.a.createElement("td",null),i.a.createElement("td",null),i.a.createElement("td",null),i.a.createElement("td",null)),i.a.createElement("tr",null,i.a.createElement("td",{className:"fs-11"},q.add_comments_to_reports),i.a.createElement("td",null,i.a.createElement(r.A,{className:"pd-5",checked:t("add_comments_to_reports_email"),onChange:function(t){return e.changeSetting(t,"add_comments_to_reports_email")}})),i.a.createElement("td",null,i.a.createElement(r.A,{className:"pd-5",checked:t("add_comments_to_reports_push"),onChange:function(t){return e.changeSetting(t,"add_comments_to_reports_push")}})),i.a.createElement("td",null,i.a.createElement(r.A,{className:"pd-5",checked:t("add_comments_to_reports_sms"),onChange:function(t){return e.changeSetting(t,"add_comments_to_reports_sms")}}))),i.a.createElement("tr",null,i.a.createElement("td",null),i.a.createElement("td",null),i.a.createElement("td",null),i.a.createElement("td",null)),i.a.createElement("tr",null,i.a.createElement("td",{className:"fs-11"},q.add_involvement_to_todos),i.a.createElement("td",null,i.a.createElement(r.A,{className:"pd-5",checked:t("add_involvement_to_todos_email"),onChange:function(t){return e.changeSetting(t,"add_involvement_to_todos_email")}})),i.a.createElement("td",null,i.a.createElement(r.A,{className:"pd-5",checked:t("add_involvement_to_todos_push"),onChange:function(t){return e.changeSetting(t,"add_involvement_to_todos_push")}})),i.a.createElement("td",null,i.a.createElement(r.A,{className:"pd-5",checked:t("add_involvement_to_todos_sms"),onChange:function(t){return e.changeSetting(t,"add_involvement_to_todos_sms")}}))),i.a.createElement("tr",null,i.a.createElement("td",{className:"fs-11"},q.remove_involvement_from_todos),i.a.createElement("td",null,i.a.createElement(r.A,{className:"pd-5",checked:t("remove_involvement_from_todos_email"),onChange:function(t){return e.changeSetting(t,"remove_involvement_from_todos_email")}})),i.a.createElement("td",null,i.a.createElement(r.A,{className:"pd-5",checked:t("remove_involvement_from_todos_push"),onChange:function(t){return e.changeSetting(t,"remove_involvement_from_todos_push")}})),i.a.createElement("td",null,i.a.createElement(r.A,{className:"pd-5",checked:t("remove_involvement_from_todos_sms"),onChange:function(t){return e.changeSetting(t,"remove_involvement_from_todos_sms")}}))),i.a.createElement("tr",null,i.a.createElement("td",null),i.a.createElement("td",null),i.a.createElement("td",null),i.a.createElement("td",null)),i.a.createElement("tr",null,i.a.createElement("td",{className:"fs-11"},q.add_involvement_to_time_sheets),i.a.createElement("td",null,i.a.createElement(r.A,{className:"pd-5",checked:t("add_involvement_to_time_sheets_email"),onChange:function(t){return e.changeSetting(t,"add_involvement_to_time_sheets_email")}})),i.a.createElement("td",null,i.a.createElement(r.A,{className:"pd-5",checked:t("add_involvement_to_time_sheets_push"),onChange:function(t){return e.changeSetting(t,"add_involvement_to_time_sheets_push")}})),i.a.createElement("td",null,i.a.createElement(r.A,{className:"pd-5",checked:t("add_involvement_to_time_sheets_sms"),onChange:function(t){return e.changeSetting(t,"add_involvement_to_time_sheets_sms")}}))),i.a.createElement("tr",null,i.a.createElement("td",{className:"fs-11"},q.remove_involvement_from_timesheets),i.a.createElement("td",null,i.a.createElement(r.A,{className:"pd-5",checked:t("remove_involvement_from_timesheets_email"),onChange:function(t){return e.changeSetting(t,"remove_involvement_from_timesheets_email")}})),i.a.createElement("td",null,i.a.createElement(r.A,{className:"pd-5",checked:t("remove_involvement_from_timesheets_push"),onChange:function(t){return e.changeSetting(t,"remove_involvement_from_timesheets_push")}})),i.a.createElement("td",null,i.a.createElement(r.A,{className:"pd-5",checked:t("remove_involvement_from_timesheets_sms"),onChange:function(t){return e.changeSetting(t,"remove_involvement_from_timesheets_sms")}})))))))},ta=function(e){function t(){var e,a;return Object(d.a)(this,t),(a=Object(f.a)(this,Object(p.a)(t).call(this))).getInstance=a.getInstance.bind(Object(g.a)(a)),a.changeSetting=a.changeSetting.bind(Object(g.a)(a)),a.loadBlockList=a.loadBlockList.bind(Object(g.a)(a)),a.removeBlocked=a.removeBlocked.bind(Object(g.a)(a)),a.state=(e={token:window.localStorage.getItem("token"),setting:{},title:null,id:null},Object(R.a)(e,"setting",null),Object(R.a)(e,"notification_setting",null),Object(R.a)(e,"blockList",[]),e),a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentWillMount",value:function(){_.on("got_instance",this.getInstance)}},{key:"componentWillUnmount",value:function(){_.removeListener("got_instance",this.getInstance)}},{key:"componentDidMount",value:function(){this.loadData()}},{key:"loadData",value:function(){N("settings",1,this.state.token)}},{key:"pageAfterIn",value:function(){this.loadBlockList()}},{key:"loadBlockList",value:function(){var e=this,t=e.$f7;t.autocomplete.create({openIn:"popup",openerEl:"#user-blocklist",multiple:!0,valueProperty:"id",textProperty:"fullname",searchbarDisableText:q.cancel,popupCloseLinkText:q.close,notFoundText:q.not_found,limit:50,searchbarPlaceholder:q.search,source:function(e,a){var n=[];0!==e.length?t.request({url:O.server+"/profiles/search",method:"GET",dataType:"json",data:{q:e},success:function(e){for(var t=0;t<e.data.length;t++)n.push(e.data[t]);a(n)}}):a(n)},on:{change:function(t){t&&t[t.length-1]&&(e.setState({blockList:e.state.blockList.concat({fullname:t[t.length-1].fullname,id:t[t.length-1].id})}),T("settings/add_block",{profile_id:t[t.length-1].id},e.state.token))}}})}},{key:"getInstance",value:function(){var e=_.getIntance(),t=_.getKlass();e&&"Setting"===t?this.setState({title:e.title,id:e.id,notification_setting:e.notification_setting}):this.setState({notification_setting:[]})}},{key:"changeSetting",value:function(e,t){var a={item:t};e.target.checked?(this.setState((function(e){var a=Object.assign({},e.notification_setting);return a[t]=!0,{notification_setting:a}})),T("settings/add",a,this.state.token)):(this.setState((function(e){var a=Object.assign({},e.notification_setting);return a[t]=!1,{notification_setting:a}})),T("settings/remove",a,this.state.token))}},{key:"removeBlocked",value:function(e){this.setState({blockList:this.state.blockList.filter((function(t){return t.id!==e}))}),T("settings/remove_block",{profile_id:e},this.state.token)}},{key:"render",value:function(){var e=this.state,t=e.notification_setting,a=e.title,n=e.blockList;return i.a.createElement(r.s,{onPageAfterIn:this.pageAfterIn.bind(this)},i.a.createElement(r.r,{title:q.work_form,backLink:q.back}),i.a.createElement(r.d,null,q.work_form),i.a.createElement(ea,{notification_setting:t,title:a,changeSetting:this.changeSetting,blockList:n,submit:this.submit,editing:!0,handleChange:this.handleChangeValue,removeBlocked:this.removeBlocked}))}}]),t}(n.Component),aa=function(e){return i.a.createElement(r.s,null,i.a.createElement(r.r,{title:q.sign_up},i.a.createElement(r.n,{panelOpen:"right"},i.a.createElement(r.m,{f7:"bars"}))),i.a.createElement(r.f,null,i.a.createElement(r.i,null,q.login),i.a.createElement(r.g,{className:"mh-auto"},i.a.createElement(r.o,null,i.a.createElement(r.p,{label:q.email,type:"text",autofocus:!0,placeholder:q.enter_your_email,value:e.email,onInput:function(t){e.handleChange({email:t.target.value})}}))),i.a.createElement(r.h,null,i.a.createElement(r.n,{href:"/sign_up/",animate:!1,ignoreCache:!0},q.you_can_sign_up," "),i.a.createElement(r.e,{fill:!0,className:"fs-11 external f-color-black bg-teal",href:"https://auth.ut.ac.ir:8443/cas/login?service=https%3A%2F%2Ftavan.ut.ac.ir%2Fusers%2Fservice",animate:!1,ignoreCache:!0},q.cas," "),i.a.createElement(r.n,{className:"btn-notice"}),i.a.createElement(r.e,{className:"col btn",fill:!0,onClick:e.submit},q.login))))},na=function(e){function t(){var e;return Object(d.a)(this,t),(e=Object(f.a)(this,Object(p.a)(t).call(this))).submit=e.submit.bind(Object(g.a)(e)),e.handleChangeValue=e.handleChangeValue.bind(Object(g.a)(e)),e.setInstance=e.setInstance.bind(Object(g.a)(e)),e.state={token:window.localStorage.getItem("token"),email:"",password:""},e}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentWillMount",value:function(){_.on("set_instance",this.setInstance)}},{key:"componentWillUnmount",value:function(){_.removeListener("set_instance",this.setInstance)}},{key:"componentDidMount",value:function(){this.$f7route.params.token&&T("users/validate_token",{},this.$f7route.params.token),this.state.token&&this.state.token.length>10&&T("users/validate_token",{},this.state.token)}},{key:"submit",value:function(){T("users/login",{email:this.state.email,password:this.state.password})}},{key:"setInstance",value:function(){var e=_.getKlass();"Login"===e&&this.$f7router.navigate("/verification/"+this.state.email),"Validate"===e&&(this.$f7router.navigate("/"),window.location.reload()),console.log(e)}},{key:"handleChangeValue",value:function(e){this.setState(e)}},{key:"render",value:function(){var e=this.state;e.username,e.password;return i.a.createElement(aa,{submit:this.submit,handleChange:this.handleChangeValue})}}]),t}(i.a.Component),ia=function(e){function t(){var e;return Object(d.a)(this,t),(e=Object(f.a)(this,Object(p.a)(t).call(this))).handleChangeValue=e.handleChangeValue.bind(Object(g.a)(e)),e.setInstance=e.setInstance.bind(Object(g.a)(e)),e.state={email:"",password:""},e}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentWillMount",value:function(){_.on("set_instance",this.setInstance)}},{key:"componentWillUnmount",value:function(){_.removeListener("set_instance",this.setInstance)}},{key:"componentDidMount",value:function(){T("users/validate_token",{},this.$f7route.params.token)}},{key:"setInstance",value:function(){var e=_.getIntance();"Validate"===_.getKlass()?(window.localStorage.setItem("token",e.token),this.$f7router.navigate("/"),window.location.reload()):(this.$f7router.navigate("/login_error/"),window.location.reload())}},{key:"handleChangeValue",value:function(e){this.setState(e)}},{key:"render",value:function(){var e=this.state;e.username,e.password;return i.a.createElement(aa,{submit:this.submit,handleChange:this.handleChangeValue})}}]),t}(i.a.Component),sa=function(e){return i.a.createElement(r.s,null,i.a.createElement(r.r,{title:q.sign_up},i.a.createElement(r.n,{panelOpen:"right"},i.a.createElement(r.m,{f7:"bars"}))),i.a.createElement(r.f,null,i.a.createElement(r.i,null,q.sign_up),i.a.createElement(r.g,null,i.a.createElement(r.o,null,i.a.createElement(r.p,{label:q.firstname+" *",placeholder:q.enter_your_name,type:"text",name:V.a.lib.WordArray.random(32),onInput:function(t){e.handleChange({name:t.target.value})}}),i.a.createElement(r.p,{label:q.surename+" *",placeholder:q.enter_your_surename,type:"text",name:V.a.lib.WordArray.random(32),onInput:function(t){e.handleChange({surename:t.target.value})}}),i.a.createElement(r.p,{label:" * "+q.email,type:"email",validate:!0,placeholder:q.enter_your_email,className:"ltr",value:e.email,onInput:function(t){e.handleChange({email:t.target.value})}}))),i.a.createElement(r.h,null,i.a.createElement(r.n,{href:"/login/"},q.if_registered,"\xa0",q.you_can_login," "),i.a.createElement(r.n,{className:"btn-notice"}),i.a.createElement(r.e,{className:"col btn",fill:!0,onClick:e.submit},q.sign_up))))},la=function(e){function t(){var e;return Object(d.a)(this,t),(e=Object(f.a)(this,Object(p.a)(t).call(this))).submit=e.submit.bind(Object(g.a)(e)),e.handleChangeValue=e.handleChangeValue.bind(Object(g.a)(e)),e.setInstance=e.setInstance.bind(Object(g.a)(e)),e.state={email:"",name:"",surename:""},e}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentWillMount",value:function(){_.on("set_instance",this.setInstance)}},{key:"componentWillUnmount",value:function(){_.removeListener("set_instance",this.setInstance)}},{key:"submit",value:function(){this.$$(".btn").hide(),this.$$(".btn-notice").text(q.submitting);var e={email:this.state.email,name:this.state.name,surename:this.state.surename};if(this.state.email&&this.state.email.length>0&&this.state.name&&this.state.name.length>0&&this.state.surename&&this.state.surename.length>0)T("users/sign_up",e);else{this.$f7.dialog.alert(q.incomplete_data,q.alert)}}},{key:"setInstance",value:function(){"SignUp"===_.getKlass()&&(this.$$(".btn").show(),this.$f7router.navigate("/verification/"+this.state.email))}},{key:"handleChangeValue",value:function(e){this.setState(e),console.log(e)}},{key:"render",value:function(){var e=this.state;e.username,e.password;return i.a.createElement(sa,{submit:this.submit,handleChange:this.handleChangeValue})}}]),t}(i.a.Component),oa=function(e){return i.a.createElement(r.s,null,i.a.createElement(r.r,{title:q.verification},i.a.createElement(r.n,{panelOpen:"right"},i.a.createElement(r.m,{f7:"bars"}))),i.a.createElement(r.f,null,i.a.createElement(r.i,null,q.login),i.a.createElement(r.g,null,i.a.createElement(r.o,null,i.a.createElement(r.p,{label:q.email,type:"text",autofocus:!0,placeholder:q.enter_your_email,value:e.email,onInput:function(t){e.handleChange({email:t.target.value})}}),i.a.createElement(r.p,{label:q.verification_code,type:"text",placeholder:q.enter_verification_code,onInput:function(t){e.handleChange({verificationCode:t.target.value})}}))),i.a.createElement(r.h,null,i.a.createElement(r.n,{href:"/sign_up/",animate:!1,ignoreCache:!0},q.you_can_sign_up," "),i.a.createElement(r.n,{className:"btn-notice"}),i.a.createElement(r.e,{className:"col btn",fill:!0,onClick:e.submit},q.login))))},ra=function(e){function t(){var e;return Object(d.a)(this,t),(e=Object(f.a)(this,Object(p.a)(t).call(this))).submit=e.submit.bind(Object(g.a)(e)),e.handleChangeValue=e.handleChangeValue.bind(Object(g.a)(e)),e.setInstance=e.setInstance.bind(Object(g.a)(e)),e.state={verificationCode:"",email:""},e}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentWillMount",value:function(){_.on("set_instance",this.setInstance)}},{key:"componentWillUnmount",value:function(){_.removeListener("set_instance",this.setInstance)}},{key:"componentDidMount",value:function(){this.setState({email:this.$f7route.params.email})}},{key:"submit",value:function(){T("users/verify",{verification_code:this.state.verificationCode})}},{key:"setInstance",value:function(){var e=_.getIntance(),t=_.getKlass();e&&"Verify"==t&&(window.localStorage.setItem("token",e.token),this.$f7router.navigate("/"),window.location.reload())}},{key:"handleChangeValue",value:function(e){this.setState(e)}},{key:"render",value:function(){var e=this.state,t=(e.username,e.email);return i.a.createElement(oa,{submit:this.submit,email:t,handleChange:this.handleChangeValue})}}]),t}(i.a.Component),ca=function(e){if(e.notifications&&e.notifications.length>0){var t=function(e){if(!e.seen)return"bg-blonde"};return i.a.createElement(r.f,null,i.a.createElement(r.i,null),i.a.createElement(r.g,null,i.a.createElement(r.o,{mediaList:!0},e.notifications.map((function(e){return i.a.createElement(r.q,{className:"fs-11 "+t(e),key:V.a.lib.WordArray.random(32),link:"/"+e.target_type+"/"+e.target_id,title:(a=e.profile,i.a.createElement(r.n,{href:"/profiles/"},a.fullname)),text:e.notification_text.title},i.a.createElement("img",{slot:"media",src:e.profile.avatar,width:"32",height:"32"}));var a})))),i.a.createElement(r.h,null))}return i.a.createElement("ul",null)},ua=function(e){return i.a.createElement(r.s,null,i.a.createElement(r.r,{title:q.notifications},i.a.createElement(r.n,{panelOpen:"right"},i.a.createElement(r.m,{f7:"bars"}))),i.a.createElement(ca,{notifications:e.notifications,loadMore:e.loadMore}))},ma=[{path:"/",component:Y},{path:"/login/",component:na},{path:"/sign_up/",component:la},{path:"/verification/:email",component:ra},{path:"/login_jwt/:token",component:ia},{path:"/panel-right/",component:X},{path:"/notifications/",component:function(e){function t(){var e;return Object(d.a)(this,t),(e=Object(f.a)(this,Object(p.a)(t).call(this))).getList=e.getList.bind(Object(g.a)(e)),e.loggedIn=Tt.bind(Object(g.a)(e)),e.interaction=e.interaction.bind(Object(g.a)(e)),e.setInstance=e.setInstance.bind(Object(g.a)(e)),e.search=e.search.bind(Object(g.a)(e)),e.loadMore=e.loadMore.bind(Object(g.a)(e)),e.state={token:window.localStorage.getItem("token"),notifications:[],query:null,page:1},e}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentWillMount",value:function(){_.on("got_list",this.getList),_.on("set_instance",this.setInstance)}},{key:"componentWillUnmount",value:function(){_.removeListener("got_list",this.getList),_.removeListener("set_instance",this.setInstance)}},{key:"componentDidMount",value:function(){this.loggedIn(),this.loadData()}},{key:"loadData",value:function(){w("notifications",this.state.page,{},this.state.token)}},{key:"search",value:function(e){var t=this;this.setState({notifications:[],page:1}),this.setState(e,(function(){w("notifications/search",t.state.page,{q:t.state.query})}))}},{key:"loadMore",value:function(){var e=this;this.state.query&&this.state.query.length>0?this.setState({page:this.state.page+1},(function(){w("notifications/search",e.state.page,{q:e.state.query},e.state.token)})):this.setState({page:this.state.page+1},(function(){w("notifications",e.state.page,{},e.state.token)}))}},{key:"setInstance",value:function(){var e=_.getIntance();e&&this.setState({notifications:this.state.notifications.map((function(t){return t.id===e.id?Object.assign({},t,e):t}))})}},{key:"getList",value:function(){var e=_.getList(),t=_.getKlass();e.length>0&&"Notification"===t&&this.setState({notifications:this.state.notifications.concat(e)});T("notifications",{},this.state.token)}},{key:"interaction",value:function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s={interaction_type:e,interactionable_id:t,interactionable_type:a,source_type:n,source_id:i};T("interactions",s,this.state.token)}},{key:"render",value:function(){var e=this.state.notifications;return i.a.createElement(ua,{interaction:this.interaction,loadMore:this.loadMore,notifications:e,search:this.search})}}]),t}(i.a.Component)},{path:"/roles/",component:re},{path:"/roles/:roleId/edit",component:me},{path:"/roles/new",component:ue},{path:"/roles/:roleId",component:se},{path:"/settings/",component:ta},{path:"/groups/",component:zt},{path:"/groups/:groupId/edit",component:Qt},{path:"/groups/new",component:Jt},{path:"/groups/:groupId",component:Bt},{path:"/statuses/",component:Oe},{path:"/statuses/:statusId/edit",component:Ie},{path:"/statuses/new",component:we},{path:"/statuses/:statusId",component:_e},{path:"/tasks/",component:qe},{path:"/tasks/:taskId/edit",component:Ue},{path:"/tasks/new",component:Fe},{path:"/tasks/:taskId",component:Ve},{path:"/tags/",component:ge},{path:"/tags/:tagId/edit",component:ke},{path:"/tags/new",component:be},{path:"/tags/:tagId",component:he},{path:"/time_sheets/",component:mt},{path:"/time_sheets/:timeSheetId/edit",component:ft},{path:"/time_sheets/new",component:ht},{path:"/time_sheets/:timeSheetId",component:rt},{path:"/reports/",component:xt},{path:"/reports/:reportId/edit",component:Ft},{path:"/reports/new/:callerType/:callerId",component:Pt},{path:"/reports/:reportId",component:St},{path:"/works/",component:tt},{path:"/works/:workId/edit",component:it},{path:"/works/new/:taskId",component:nt},{path:"/works/:workId",component:Xe},{path:"/todos/:todoId/edit",component:lt},{path:"/todos/new/:workId",component:st},{path:"/profiles/",component:kt},{path:"/profiles/:profileId/edit",component:Ot},{path:"/profiles/new",component:Ct},{path:"/profiles/:profileId",component:gt},{path:"/surveillances/",component:Zt},{path:"(.*)",component:function(){return i.a.createElement(r.s,null,i.a.createElement(r.r,{title:"Not found",backLink:"Back"}),i.a.createElement(r.c,{strong:!0},i.a.createElement("p",null,"Sorry"),i.a.createElement("p",null,"Requested content not found.")))}}],da=function(e){function t(){var e;return Object(d.a)(this,t),(e=Object(f.a)(this,Object(p.a)(t).call(this))).uploadFromDb=e.uploadFromDb.bind(Object(g.a)(e)),e.state={token:window.localStorage.getItem("token")},e}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=Object(m.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=(t=this).$f7,$&&$.requestPermission().then(Object(m.a)(u.a.mark((function e(){var a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.getToken();case 2:a=e.sent,n={token:a},t.state.token&&t.state.token.length>10&&T("devices",n,t.state.token);case 5:case"end":return e.stop()}}),e)})))).catch((function(e){console.log("Unable to get permission to notify.",e)})),navigator.serviceWorker.addEventListener("message",(function(e){a.notification.create({icon:"",title:e.data.firebaseMessaging.payload.notification.title,titleRightText:"",cssClass:"notification",subtitle:e.data.firebaseMessaging.payload.notification.body,closeTimeout:5e3}).open()})),setInterval((function(){t.uploadFromDb()}),3e4);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"uploadFromDb",value:function(){var e=this;console.log("DB Sync. Started");var t=window.indexedDB||window.webkitIndexedDB||window.mozIndexedDB||window.OIndexedDB||window.msIndexedDB,a=(window.IDBTransaction||window.webkitIDBTransaction||window.OIDBTransaction||window.msIDBTransaction,t.open("screenCastFiles",3));a.onsuccess=function(t){console.log("Success creating/accessing IndexedDB database");var n=a.result;n.onerror=function(e){console.log("Error creating/accessing IndexedDB database")};var i=n.transaction(["screenCastFiles"],"readwrite"),s=i.objectStore("screenCastFiles").openCursor();s.onerror=function(e){console.err("error fetching data")},s.onsuccess=function(t){var a=t.target.result;if(a){var n=a.primaryKey,s=a.value;console.log(n,s),!function(e,t,a){var n=j+"/"+e,i=new FormData;t.map((function(e){return i.append(e.label,e.value)}));var s={headers:{"content-type":"multipart/form-data",Authorization:"bearer "+a}};C.a.post(n,i,s).then((function(e){k.dispatch({type:"GENERAL_POST_FILE_SUCCESS",instance:e.data})})).catch((function(e){console.log(e)}))}("surveillances",[{label:"file",value:s.blob},{label:"surveillance[start_time]",value:V.a.lib.WordArray.random(32)}],e.state.token),i.objectStore("screenCastFiles").delete(n),a.continue()}}}}},{key:"render",value:function(){var e={id:"io.framework7.testapp",name:"Framework7",theme:"aurora",panel:{rightBreakpoint:960},view:{},routes:ma};return i.a.createElement(r.b,{params:e},i.a.createElement(r.w,null),i.a.createElement(r.t,{left:!0,cover:!0,themeDark:!0},i.a.createElement(r.C,{url:"/panel-left/"})),i.a.createElement(r.t,{right:!0,reveal:!0,themeDark:!0},i.a.createElement(r.C,{url:"/panel-right/"})),i.a.createElement(r.C,{id:"main-view",url:"/app",pushState:!0,main:!0,className:"safe-areas"}))}}]),t}(i.a.Component);a(414),a(415),a(416),a(417),a(418),a(419),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));"serviceWorker"in navigator&&navigator.serviceWorker.register("./firebase-messaging-sw.js").then((function(e){console.log("Registration successful, scope is:",e.scope)})).catch((function(e){console.log("Service worker registration failed, error:",e)})),o.a.use(r.D),l.a.render(i.a.createElement(da),document.getElementById("root"))}},[[167,1,2]]]);
//# sourceMappingURL=main.058d1975.chunk.js.map